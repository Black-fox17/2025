const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./assets/dg-styles-DGpmRY5j.css","./dg-pages.mUDwHjKk.min.js","./common.Bh9H96fG.min.js","./vendor.DgP4VjGb.min.js","./xss.B7BQCPi7.min.js","./assets/common-DtVydTAd.css","./shared/dg-pages/dg-saves-page.Dn3k3JOq.min.js","./assets/shared/dg-pages/dg-saves-page-KecEizAp.css","./dg-modals.B6TtLhCd.min.js","./shared/dg-modals/dg-nav-menu.Ba7jUlxf.min.js","./shared/dg-modals/dg-saves-page.CdKMTlvF.min.js","./assets/shared/dg-modals/dg-saves-page-C9RfgYFD.css","./shared/dg-modals/dg-trades-page.CaAZR-Vv.min.js","./assets/dg-modals-ClgZY6OQ.css","./assets/dg-pages-660EOJU3.css","./dg-save-heart.CakyPuYP.min.js","./assets/dg-save-heart-B-Qqt8rT.css","./dg-shopping-cart.B3FWA8oe.min.js","./assets/dg-shopping-cart-YLAaDLn3.css","./dg-nav-menu.C2NkEDYB.min.js","./shared/dg-nav-menu/dg-trades-page.nIOTsTSF.min.js","./assets/shared/dg-nav-menu/dg-trades-page-UJ8H_4qX.css","./shared/dg-nav-menu/dg-save-heart.BvZ0-xq9.min.js","./shared/dg-nav-menu/dg-saves-page.Bn7oemIg.min.js","./assets/dg-nav-menu-C7WCMMYm.css","./change-dealer-modal.BM91tFny.min.js","./assets/change-dealer-modal-BbnbGE5B.css"])))=>i.map(i=>d[i]);
var ne=Object.defineProperty;var se=(a,e,t)=>e in a?ne(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var d=(a,e,t)=>se(a,typeof e!="symbol"?e+"":e,t);import{J as f,c as v,w as x,O as oe,r as C,s as j,ac as ie,B as re,ae as ce,ax as le}from"./vendor.DgP4VjGb.min.js";import{bD as Ke,bi as Qe,bE as Xe,b as M,bF as P,aG as de,bv as ue,ay as pe,an as ve,bG as ge,bu as me,bH as he,w as U,i as be,r as A,D as r,aI as W,bI as E,bJ as Ie,e as V,l as fe,av as _,bK as Se,c as G,bL as ye,bM as Oe,bN as we,E as $,bO as Te,bP as H,bt as L,bQ as Ce,bR as Ae,bS as Me,bT as De,bU as _e,b7 as Ee,A as Pe,bV as T,Y as ke,aY as Ve,bW as w}from"./common.Bh9H96fG.min.js";import"./xss.B7BQCPi7.min.js";const He=new M("DG JS API"),O=a=>(...e)=>(He.debug(`Called '${a.name}'`,{args:e}),a(...e));function Le(a){return typeof a=="object"}const p=(a,e)=>{const t=v(a);return new ge(n=>{x(t,s=>{const o=Le(s)?oe(s):s;n(o)},{immediate:!0})},e)},Re=a=>{const{vuexStore:e,pinia:t}=a,n=new P(a),s=v(()=>e.getters.garage),o=de(),u=v(()=>o.garageItemsCount),y=p(()=>u.value),h=p(()=>e.getters.currentBuildItems),i=ue(t),l=p(()=>i.activeTradeIns.filter(c=>!me(c)),()=>i.fetchTradeIns()),b=p(()=>(e.getters.recentlyViewedCurrentInventoryItems||[]).map(I=>({vin:I.vin,dealerCd:I.dealerCd}))),m={},g=pe(t),D=p(()=>g.currentNotifications.reduce((I,k)=>({...I,[k.id]:k}),m)),F=v(()=>e.state.idToken),J=p(()=>!!he(F.value)),z=p(()=>{var c;return((c=s.value)==null?void 0:c.sharedSavesDealers)??{}}),Y=ve(t),K=p(()=>Y.activeDeals),Q=p(()=>e.getters.dgId),X=c=>g.markNotificationAsRead(c),Z=c=>g.deleteNotification(c),ee=()=>g.deleteAllNotifications(),te=async c=>await i.saveTradeIns(c),ae=async(c,I)=>{await n.toggleCurrentDealerSharedSaves({dealerCd:c,isEnabled:I,showErrorModalOnFailure:!1})};return{observables:{savesCount:y,notifications:D,isLoggedIn:J,dealerCdToIsUserSharingSaves:z,activePurchases:K,dgid:Q,previouslyViewedInventory:b,savedBuilds:h,savedTradeIns:l},operations:{markNotificationAsRead:O(X),deleteNotification:O(Z),deleteAllNotifications:O(ee),toggleDealerSharedSaves:O(ae),saveTradeIn:O(te)}}};class Ne{constructor(){d(this,"inlineSavesApps");this.inlineSavesApps=C({})}getInlineSaveItem(e){return this.inlineSavesApps.value[e]}onInlineSaveAppsChange(e){U(this.inlineSavesApps,e)}trackInlineSaveItem(e){this.inlineSavesApps.value[e.inlineSaveId]=e}stopTrackingInlineSaveItem(e){delete this.inlineSavesApps.value[e]}deleteInlineSaveItem(e){const t=this.getInlineSaveItem(e);return t?(t.app.unmount(),!0):!1}getInlineSaveInvItemData(e){const t=Object.values(this.inlineSavesApps.value).find(({saveItem:n})=>be(n)&&n.vin===e);return t==null?void 0:t.saveItem}}const R="close_all";class Be{constructor(){d(this,"subscribers");this.subscribers=[]}onCloseAll(e){return this.subscribe(t=>{t===R&&e()})}subscribe(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter(n=>n!==e)}}closeAllTooltips(){this.subscribers.forEach(e=>e(R))}}function qe(a){A.debug("Initializing inline save hearts");const{vuexStore:e,pinia:t}=a,n=new Ne,s=new P(a),o=new Be,u=r.inlineSaveItems??{};n.onInlineSaveAppsChange(i=>{const l=Object.entries(i).reduce((b,[m,g])=>({...b,[m]:g.saveItem}),{});r.inlineSaveItems=l}),N(e,t,n,o,s,u);const y=async(i,l=!0)=>{var b;if(Object.keys(((b=i==null?void 0:i.mstLeadSummary)==null?void 0:b.estimate)??{}).length>0){const m=E(i);if(V(m)){const g=e.getters.garage,D=fe(m,g,n);await s.saveOrViewEstimateItem(m,D,l?"save":"view");return}}A.warn("Invalid estimate, not saving",i)},h=i=>{const l=E(i);return V(l)&&s.isEstimateHearted(l)};r.initInlineSaveHearts(n,{renderInlineSaves:(i,l)=>N(e,t,n,o,s,i,l),saveEstimate:y,isCurrentDealerEstimateHearted:h,hideAllTooltips:()=>o.closeAllTooltips()})}async function N(a,e,t,n,s,o,u){A.debug("Rendering inline save hearts",o),o&&Object.keys(o).length>0&&W.attemptConnection();const y=new Set(["inv","build","estimate"]);for(const[h,i]of Object.entries(o??{})){if(!y.has(i.type)){A.warn(`'${i.type}' is not a valid inline save type. Check ${h}.`);continue}const l=E(i);await Ie({store:a,pinia:e,saveItem:l,inlineSaveId:h,inlineSavesManager:t,analyticsData:u,tooltipService:n}),await s.saveAsRecentlyViewedIfApplicable(l)}}class xe{constructor(e,t){d(this,"requestedToBeOpen");d(this,"certificationType");d(this,"dgUiStore");d(this,"hostId");this.requestedToBeOpen=C(!1),this.dgUiStore=e,this.hostId=t,this.certificationType=C(_.gold)}setupOnPage(){const e=this.createApp(),t=this.createHostElement();e.mount(t)}openModal(e){const t=e.toUpperCase();if(!(t===_.gold||t===_.silver)){Se.warn(`Invalid certification type: ${e}. Unable to open TCUV modal.`);return}this.requestedToBeOpen.value=!0,this.certificationType.value=t}closeModal(){this.requestedToBeOpen.value=!1}createApp(){const e=v(()=>this.requestedToBeOpen.value),t=v(()=>this.certificationType.value);return G("dg-tcuv-modal",this.dgUiStore,()=>j(ye.asyncComponent,{isOpen:e.value,certificationType:t.value,onClose:()=>this.closeModal()}))}createHostElement(){const e=document.body.querySelector(`#${this.hostId}`);e&&document.body.removeChild(e);const t=document.createElement("div");return t.id=this.hostId,document.body.appendChild(t),t}}const je=new M("SmartPath Onboarding Modal"),B=new Oe(`dg_has_seen_smartpath_modal_${we.environment}`);class Ue{constructor(e,t){d(this,"requestedToBeOpen");d(this,"dgUiStore");d(this,"hostId");this.requestedToBeOpen=C(!1),this.dgUiStore=e,this.hostId=t}get store(){return this.dgUiStore.vuexStore}setupOnPage(){const e=this.createApp(),t=this.createHostElement();e.mount(t);const n=v(()=>this.store.getters.activeDealer),s=v(()=>{var o;return(o=n.value)==null?void 0:o.isSmartPathDealer});U(s,o=>{this.openOnboardingModalIfDesired(!!o)})}openModal(){this.requestedToBeOpen.value=!0}async openOnboardingModalIfDesired(e){r.currentPageWantsDgToAutomaticallyOpenOnboardingModal&&e&&(B.get()||(this.openModal(),B.set(!0)))}closeModal(){this.requestedToBeOpen.value=!1}createApp(){const e=!$.supportsTdr,t=v(()=>this.requestedToBeOpen.value&&e);return ie(()=>{this.requestedToBeOpen.value&&!e&&je.debug("Onboarding modal is requested to be open, but not shown because it is disabled")}),G("dg-smartpath-onboarding-modal",this.dgUiStore,()=>j(Te.asyncComponent,{isOpen:t.value,isEnabled:e,onClose:()=>this.closeModal()}))}createHostElement(){const e=document.body.querySelector(`#${this.hostId}`);e&&document.body.removeChild(e);const t=document.createElement("div");return t.id=this.hostId,document.body.appendChild(t),t}}const q=new M("Recently Viewed Store"),We=re("recentlyViewed",()=>{const a=H(t=>t.getters.currentInventoryItemsRenderData.filter(n=>n.vehicleUnavailable&&!n.inventoryItem.isFavorite)),e=H(t=>{const n=ce();return n?new P({vuexStore:t,pinia:n}):(q.debug("No Pinia instance is currently active"),null)});x(a,async t=>{await Promise.all(t.map(n=>{var s;(s=e.value)==null||s.removeSavedInventoryItem(n.inventoryItem.vin),q.debug("removing vehicle",{vin:n.inventoryItem.vin})}))})}),S=new M("main");(async()=>{S.debug("main function start.");try{const a=L(),e=window.location.hostname;(e.includes("local.dg")||L()!==3||a===3&&(e.includes("tldealersystems")||e.includes("qa.monogram")||e.includes("stage.monogram")))&&await le(Ce.awsWafChallengeScriptUrl[r.environment])}catch(a){S.warn("Challenge script failed to load",{error:a})}try{r.validatePageDataHub();const a=Ae(),e=Me(a),t={vuexStore:a,pinia:e};r.initDgUi(t),W.init(a),r.initCheckInventory(()=>(S.warn("DGDataHub.checkInventory is deprecated. Inventory will be automatically updated."),Promise.all([De(a),_e(e)]))),!1||a.dispatch(Ee.InitDg);const s=Re(t);r.setApi(s),Pe.init(a),await f(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),r.isComponentIncludedOnPage(T.inlineSaveHeart)&&qe(t),await Ge(t),ke(),We()}catch(a){S.error("startup error",a)}})();async function Ge(a){new w(a,()=>f(()=>import("./dg-pages.mUDwHjKk.min.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url),"dg-pages-container").configure(),r.isComponentIncludedOnPage(T.topNavSaveHeart)&&new w(a,()=>f(()=>import("./dg-save-heart.CakyPuYP.min.js"),__vite__mapDeps([15,3,2,4,5,16]),import.meta.url),"dg-save-heart",{attributesToWatch:["color","weight"]}).configure(),r.isComponentIncludedOnPage(T.shoppingCart)&&new w(a,()=>f(()=>import("./dg-shopping-cart.B3FWA8oe.min.js"),__vite__mapDeps([17,3,2,4,5,18]),import.meta.url),"dg-shopping-cart",{attributesToWatch:["color","show-continue-purchase-text","force-show"]}).configure();const t=(o,u={})=>new w(a,()=>f(()=>import("./dg-nav-menu.C2NkEDYB.min.js"),__vite__mapDeps([19,2,3,4,5,20,21,9,22,23,24]),import.meta.url),o,{rootProps:{rootId:o,isDesktop:!1,isMobile:!1,isTCOM:!1,isTablet:!1,isForAllWidths:!1,...u},attributesToWatch:["color"]});r.isComponentIncludedOnPage(T.navMenu)&&(t("dg-component-nav-menu",{isForAllWidths:!0}).configure(),t("dg-component-nav-menu-desktop",{isDesktop:!0}).configure(),t("dg-component-nav-menu-mobile",{isMobile:!0}).configure(),t("dg-component-nav-menu-tablet",{isTablet:!0}).configure());const n=()=>t("dg-component-nav-menu-tcom-mobile",{isMobile:!0,isTCOM:!0}).mount();r.initRenderMobileNav(n),$e(a),Fe(a);let s;if($.tierNumber===2){const{setupChangeActiveDealerModal:o}=await f(async()=>{const{setupChangeActiveDealerModal:u}=await import("./change-dealer-modal.BM91tFny.min.js");return{setupChangeActiveDealerModal:u}},__vite__mapDeps([25,2,3,4,5,26]),import.meta.url);s=o(a)}r.initGetWarningState(()=>({dgLoaded:a.vuexStore.state.appLoadingState===Ve.loaded,modalShown:(s==null?void 0:s.isOpen)??!1}))}function $e(a){try{const e=new Ue(a,"dg-smartpath-modal-host");e.setupOnPage(),r.initOnboardingModal(()=>e.openModal())}catch(e){S.error("Error setting up smartpath onboarding modal",e)}}function Fe(a){try{const e=new xe(a,"dg-tcuv-modal-host");e.setupOnPage(),r.initTCUVStandardModal(t=>e.openModal(t))}catch(e){S.error("Error setting up tcuv modal",e)}}
//# sourceMappingURL=dg-ui-entry.CEFlSAXL.min.js.map
