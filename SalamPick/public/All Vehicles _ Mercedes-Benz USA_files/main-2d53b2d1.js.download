"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[7038],{81442:function(e,t,n){n.d(t,{b:function(){return a}});var i=n(65025),a={createFeaturedOffer:function(e){var t=e.dataset,n=t.offerDetailsModal,a=t.marketType,s=function(e){var t={};return e.dealerIds&&e.dealerIds.split(",").forEach((function(e){t[e]=!0})),t}(t),o=e.querySelector("#".concat(n)).innerHTML;return new i.Z(e,o,a,s)}}},36227:function(e,t,n){n.d(t,{E:function(){return d}});var i=n(15671),a=n(43144),s=n(2473),o=n(14569),r=n(90921),c=n(19186),l="data-form-config",h=function(){function e(t,n){(0,i.Z)(this,e),this.element=t,this.pageType=t.dataset.pageType,this.modalOfferDetailsID=n,this.init(),this.setLinkFormData(),this.clickHandlerModalDisclaimerLinks=this.clickHandlerModalDisclaimerLinks.bind(this)}return(0,a.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.attachEvents(),document.body.classList.add("updated-modal-icon")}},{key:"cacheDOM",value:function(){this.offerDetailsCTA=this.element.querySelector("[data-".concat("modal-button","]"))}},{key:"attachEvents",value:function(){this.offerDetailsCTA&&this.offerDetailsCTA.addEventListener("click",this.clickHandlerOfferDetailsCTA.bind(this))}},{key:"clickHandlerModalDisclaimerLinks",value:function(e){var t=e.modalContainer.querySelectorAll(".disclaimer__marker");null==t||t.forEach((function(t){t.addEventListener("click",(function(t){var n,i;t.preventDefault();var a=null==t||null===(n=t.currentTarget)||void 0===n||null===(i=n.dataset)||void 0===i?void 0:i.legend;a&&window.dispatchEvent(new CustomEvent(r._U.OPEN_DISCLAIMER,{detail:{legend:a,currentTarget:t.currentTarget}})),e.modalCloseElm.click()}))}))}},{key:"setLinkFormData",value:function(){var e=Array.from(this.element.getElementsByTagName("a")).filter((function(e){var t;return(null==e||null===(t=e.getAttribute("href"))||void 0===t?void 0:t.indexOf("/intercept/lead-form/"))>-1})),t={formType:s.wK.FORM_TYPE.SPECIAL_OFFER,sourceType:"specialOfferPage"===this.pageType?s.wK.SOURCE_TYPE.DEFAULT:s.wK.SOURCE_TYPE.HOLIDAY_CAMPAIGN_SPECIAL_OFFERS};null==e||e.forEach((function(e){e.getAttribute(l)||e.setAttribute(l,JSON.stringify(t))}))}},{key:"clickHandlerOfferDetailsCTA",value:function(){var e,t=this.element.querySelector("#".concat(this.modalOfferDetailsID)).innerHTML;(e=new o.Modal(void 0,{modalContent:t,size:o.Modal.SIZES.DIALOG,customClassName:"featured-offers-tilev2__modal--dialog",callbacks:{beforeClose:function(){e.destroy(),e=null}}})).open({callingContainer:this.offerDetailsCTA});var n=Array.from(e.modalContainer.getElementsByTagName("a")).filter((function(e){var t;return(null==e||null===(t=e.getAttribute("href"))||void 0===t?void 0:t.indexOf("/intercept/lead-form/"))>-1}));null==n||n.forEach((function(t){c.Z.addInterceptLink(t,(function(){e.modalCloseElm.click()}))})),this.clickHandlerModalDisclaimerLinks(e)}}]),e}(),d={createFeaturedOffersTile:function(e){var t=e.dataset.offerDetailsModal;return new h(e,t)}}},37664:function(e,t,n){n.d(t,{ZP:function(){return c}});var i=n(30168),a=n(8357);function s(){var e=(0,i.Z)(['\n    <div class="stay-connected__message" data-analytics-container="{\'blade\':\'newsletter-confirmed\'}">\n        <p class="stay-connected__subscribed-message">',"</p>\n    </div>\n"]);return s=function(){return e},e}function o(){var e=(0,i.Z)(['\n    <div class="stay-connected__message" data-analytics-container="{\'blade\':\'newsletter-confirmed\'}">\n        <p class="stay-connected__exists-message">',"</p>\n    </div>\n"]);return o=function(){return e},e}function r(){var e=(0,i.Z)(['\n    <div class="stay-connected__message" data-analytics-container="{\'blade\':\'newsletter-confirmed\'}">\n        <p class="stay-connected__error-message">',"</p>\n    </div>\n"]);return r=function(){return e},e}var c={SubscribeSuccessTemplate:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message,t=void 0===e?"":e;return(0,a.e2)(s(),t)},SubscribeExistsTemplate:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message,t=void 0===e?"":e;return(0,a.e2)(o(),t)},SubscribeErrorTemplate:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message,t=void 0===e?"":e;return(0,a.e2)(r(),t)}}},1476:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(15671),a=n(32765),s=n(11435),o=function e(){(0,i.Z)(this,e),s.Z.registerClasses(a.ZP)}},63989:function(e,t,n){n.d(t,{Z:function(){return D}});var i=n(15671),a=n(43144),s=n(8357),o=n(48218),r=function(){function e(){(0,i.Z)(this,e),this.navBlocked=!1,this.wheelTimeout=0,this.wheelLastDeltaY=0,this.wheelCount=0,this.wheelDistance=0,this.onLifecycleTransition=this.onLifecycleTransition.bind(this),this.onDockedFooterClosed=this.onDockedFooterClosed.bind(this),this.onDockedFooterOpen=this.onDockedFooterOpen.bind(this),this.onScrollAbort=this.onScrollAbort.bind(this),this.onWheel=this.onWheel.bind(this),this.wheelEventComplete=this.wheelEventComplete.bind(this),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.attachEvents()}},{key:"attachEvents",value:function(){this.attachWheelEvent(),s.Jw.addEventListener(o.fD.LIFECYCLE_TRANSITION,this.onLifecycleTransition),s.Jw.addEventListener(o.fD.SPECIALTY_PAGE_SCROLL_ABORT,this.onScrollAbort),s.Jw.addEventListener(o.fD.DOCKED_FOOTER.CLOSE,this.onDockedFooterClosed),s.Jw.addEventListener(o.fD.DOCKED_FOOTER.OPEN,this.onDockedFooterOpen),s.Jw.addEventListener(o.fD.SPECIALTY_PAGE_LOCK_SCROLL,this.onDockedFooterOpen),s.Jw.addEventListener(o.fD.SPECIALTY_PAGE_UNLOCK_SCROLL,this.onDockedFooterClosed)}},{key:"attachWheelEvent",value:function(){document.body.addEventListener(o.FP.WHEEL,this.onWheel)}},{key:"detachWheelEvent",value:function(){document.body.removeEventListener(o.FP.WHEEL,this.onWheel)}},{key:"onScrollAbort",value:function(){this.attachWheelEvent()}},{key:"onWheel",value:function(e){var t=e.deltaY;0!==e.deltaMode&&(t=120*(t<0?-1:1)),clearTimeout(this.wheelTimeout),this.wheelCount+=1,this.wheelDistance+=t,Math.abs(t)<this.wheelLastDeltaY?this.wheelEventComplete():(this.wheelLastDeltaY=Math.abs(t),this.wheelTimeout=setTimeout(this.wheelEventComplete,40))}},{key:"wheelEventComplete",value:function(){Math.abs(this.wheelDistance)/this.wheelCount>=25&&this.wheelCount>5&&!this.navBlocked?(this.detachWheelEvent(),this.dispatchScrollNavigationEvent(this.wheelDistance>0)):this.attachWheelEvent(),this.wheelLastDeltaY=0,this.wheelCount=0,this.wheelDistance=0}},{key:"onLifecycleTransition",value:function(e){var t=e.detail;t.transitionStage===o.ch.PLAYIN_BEGUN?this.setNavBlocked(!0):t.transitionStage===o.ch.PLAYIN_COMPLETE&&this.setNavBlocked(!1)}},{key:"onDockedFooterOpen",value:function(){this.setNavBlocked(!0)}},{key:"onDockedFooterClosed",value:function(){this.setNavBlocked(!1)}},{key:"setNavBlocked",value:function(e){this.navBlocked=e,this.navBlocked||this.attachWheelEvent()}},{key:"dispatchScrollNavigationEvent",value:function(e){s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.SPECIALTY_PAGE_SCROLL,{detail:{navigateNext:e}}))}}]),e}(),c=n(42982),l=n(4942),h=n(30168),d=n(61020);function u(){var e=(0,h.Z)(['\n    <div class="waypoint-nav__container sticky-nav__container">\n        <button class="waypoint__cta waypoint__cta--disabled icon-mb icon-arrow-up-square"\n            data-analytics-trigger="page-nav-prev"\n            data-qa-id="prev-waypoint-cta">\n            <span class="offscreen">','</span>\n        </button>\n        <ul class="waypoint-nav__list">\n            ','\n        </ul>\n        <button class="waypoint__cta waypoint__cta--disabled icon-mb icon-arrow-down-square"\n            data-analytics-trigger="page-nav-next"\n            data-qa-id="next-waypoint-cta">\n            <span class="offscreen">',"</span>\n        </button>\n    </div>\n"]);return u=function(){return e},e}var p=n(21255);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var f="waypoint-nav__link--active",y="waypoint-nav--modal-open",m="waypoint__cta--disabled",E="in-place",C="active-chapter-index",g="tabindex",k={next:"Go to next chapter:",prev:"Go to previous chapter:"},L=function(){function e(t){(0,i.Z)(this,e),this.element=t,this.pageData=window.mbNafta.ns("specialtyPageData"),this.pageType=this.pageData.pageType,this.localization=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k,{next:this.pageData[this.pageType].localization.goToNextChapter,prev:this.pageData[this.pageType].localization.goToPreviousChapter}),this.onHashChange=this.onHashChange.bind(this),this.onLifecycleTransition=this.onLifecycleTransition.bind(this),this.onScreenResize=this.onScreenResize.bind(this),this.onSpecialtyHeaderInited=this.onSpecialtyHeaderInited.bind(this),this.openNavigationModal=this.openNavigationModal.bind(this),this.closeNavigationModal=this.closeNavigationModal.bind(this),this.onScrollEvent=this.onScrollEvent.bind(this),this.onPrevClick=this.onPrevClick.bind(this),this.onNextClick=this.onNextClick.bind(this),this.onWaypointLinkClick=this.onWaypointLinkClick.bind(this),this.onSwipeUp=this.onSwipeUp.bind(this),this.onSwipeDown=this.onSwipeDown.bind(this),this.lockChapterSwiping=this.lockChapterSwiping.bind(this),this.unlockChapterSwiping=this.unlockChapterSwiping.bind(this),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.firstTime=!0,this.currentScreenState=s.sp.getState(),this.swipeBlocked=!1,this.populateTemplate(),this.cacheDOM(),this.attachEvents(),this.playIn(),this.initNavigation()}},{key:"lockChapterSwiping",value:function(){this.swipeBlocked||(this.swipeBlocked=!0)}},{key:"unlockChapterSwiping",value:function(){this.swipeBlocked&&(this.swipeBlocked=!1)}},{key:"onSwipeUp",value:function(){this.swipeBlocked||this.handleRelativeNavigation(!1)}},{key:"onSwipeDown",value:function(){this.swipeBlocked||this.handleRelativeNavigation(!0)}},{key:"playIn",value:function(){this.waypointLinks.forEach((function(e,t){s.sp.gte(s.sp.SIZES.XLARGE)?setTimeout((function(){e.parentNode.classList.add(E)}),100*t+200):e.parentNode.classList.add(E)}))}},{key:"initNavigation",value:function(){this.onHashChange()}},{key:"populateTemplate",value:function(){var e=p.Z.allChapters.map((function(e){return{waypointNumber:e.chapterNumber,waypointLabel:e.name,waypointKey:e.deepLink,dataAnalyticsTrigger:"page-nav-".concat(e.deepLink)}})),t=s.jG.fromTemplate(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return(0,s.dy)(u(),t.prev,(0,d.Z)(e),t.next).trim()}(e,this.localization));s.jG.append(t,this.element)}},{key:"cacheDOM",value:function(){this.waypointNavList=this.element.querySelector(".".concat("waypoint-nav__list")),this.pageContent=document.querySelector(".".concat("page-content")),this.specialtyPage=this.element.parentNode,this.specialtyChapterlabel=document.querySelector(".".concat("specialty-chapter__label")),this.waypointLinks=(0,c.Z)(this.element.querySelectorAll(".".concat("waypoint-nav__link"))),this.closeModalElm=this.element.querySelector(".".concat("waypoint-nav__close-modal")),this.openModalElm=this.element.querySelector(".".concat("waypoint-nav__open-modal")),this.openModalInnerElm=this.element.querySelector(".".concat("waypoint-nav__open-modal-inner")),this.navContainerElm=this.element.querySelector(".".concat("waypoint-nav__container")),this.waypointCtaElms=(0,c.Z)(this.element.querySelectorAll(".".concat("waypoint__cta")))}},{key:"attachEvents",value:function(){var e=this;s.m8.addHashChangeListener(this.onHashChange),s.sp.addResizeListener(this.onScreenResize),s.Jw.addEventListener(o.fD.SPECIALTY_HEADER_INITED,this.onSpecialtyHeaderInited),s.Jw.addEventListener(o.fD.SPECIALTY_PAGE_SCROLL,this.onScrollEvent),s.Jw.addEventListener(o.fD.LIFECYCLE_TRANSITION,this.onLifecycleTransition),this.openModalElm.addEventListener(o.FP.CLICK,this.openNavigationModal),this.closeModalElm.addEventListener(o.FP.CLICK,this.closeNavigationModal),this.waypointCtaElms[0].addEventListener(o.FP.CLICK,this.onPrevClick),this.waypointCtaElms[1].addEventListener(o.FP.CLICK,this.onNextClick),s.Xh.isTouch()&&(this.swipeContainer=new s.Xh(this.specialtyPage),this.swipeContainer.on(s.Xh.EVENTS.SWIPE_UP,this.onSwipeUp),this.swipeContainer.on(s.Xh.EVENTS.SWIPE_DOWN,this.onSwipeDown)),this.waypointLinks.forEach((function(t){return t.addEventListener(o.FP.CLICK,e.onWaypointLinkClick)})),s.Jw.addEventListener(o.fD.SPECIALTY_PAGE_LOCK_SCROLL,this.lockChapterSwiping),s.Jw.addEventListener(o.fD.SPECIALTY_PAGE_UNLOCK_SCROLL,this.unlockChapterSwiping)}},{key:"detachEvents",value:function(){var e=this;s.m8.removeHashChangeListener(this.onHashChange),s.sp.removeResizeListener(this.onScreenResize),s.Jw.removeEventListener(o.fD.SPECIALTY_HEADER_INITED,this.onSpecialtyHeaderInited),s.Jw.removeEventListener(o.fD.SPECIALTY_PAGE_SCROLL,this.onScrollEvent),s.Jw.removeEventListener(o.fD.LIFECYCLE_TRANSITION,this.onLifecycleTransition),this.openModalElm.removeEventListener(o.FP.CLICK,this.openNavigationModal),this.closeModalElm.removeEventListener(o.FP.CLICK,this.closeNavigationModal),this.waypointCtaElms[0].removeEventListener(o.FP.CLICK,this.onPrevClick),this.waypointCtaElms[1].removeEventListener(o.FP.CLICK,this.onNextClick),this.swipeContainer&&(this.swipeContainer.off(s.Xh.EVENTS.SWIPE_UP,this.onSwipeUp),this.swipeContainer.off(s.Xh.EVENTS.SWIPE_DOWN,this.onSwipeDown)),this.waypointLinks.forEach((function(t){return t.removeEventListener(o.FP.CLICK,e.onWaypointLinkClick)})),s.Jw.removeEventListener(o.fD.SPECIALTY_PAGE_LOCK_SCROLL,this.lockChapterSwiping),s.Jw.removeEventListener(o.fD.SPECIALTY_PAGE_UNLOCK_SCROLL,this.unlockChapterSwiping)}},{key:"onSpecialtyHeaderInited",value:function(){this.dispatchSpecialtyPageHashUpdate()}},{key:"onWaypointLinkClick",value:function(e){e.currentTarget.blur(),e.currentTarget.classList.contains(f)&&(e.preventDefault(),e.stopPropagation(),s.sp.gte(s.sp.SIZES.XLARGE)||this.closeNavigationModal())}},{key:"onHashChange",value:function(e){var t=document.location.hash.replace("#","").split("|")[0],n=e||""!==t?t:p.Z.allChapters[0].deepLink;this.nextChapterData=p.Z.getChapterByName(n),this.nextChapterData&&(this.firstTime&&(this.setActiveNavigationLink(),this.setOpenModalText(),this.firstTime=!1),this.element.classList.contains(y)&&this.closeNavigationModal(),this.dispatchSpecialtyPageHashUpdate())}},{key:"onLifecycleTransition",value:function(e){e.detail.transitionStage===o.ch.PLAYOUT_COMPLETE&&(this.setActiveNavigationLink(),this.setOpenModalText())}},{key:"onScreenResize",value:function(e){e!==this.currentScreenState&&(this.currentScreenState=e,this.element.classList.contains(y)&&this.closeNavigationModal())}},{key:"onScrollEvent",value:function(e){var t=e.detail;this.handleRelativeNavigation(t.navigateNext)}},{key:"handleRelativeNavigation",value:function(e){var t=this.activeNavLinkIndex+(e?1:-1),n=this.waypointLinks[t];n?n.click():s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.SPECIALTY_PAGE_SCROLL_ABORT))}},{key:"setPrevNextButtonsState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.waypointCtaElms.forEach((function(n,i){if(n.classList.remove(m),n.removeAttribute(g),0===t&&0===i||e.waypointLinks.length-1===t&&1===i)n.classList.add(m),n.setAttribute(g,"-1"),n.children[0].innerText=e.localization[0===i?"prev":"next"];else{var a=p.Z.allChapters[0===i?t-1:t+1].name;n.children[0].innerText="".concat(e.localization[0===i?"prev":"next"]," ").concat(a)}}))}},{key:"onPrevClick",value:function(){this.handleRelativeNavigation(!1)}},{key:"onNextClick",value:function(){this.handleRelativeNavigation(!0)}},{key:"dispatchSpecialtyPageHashUpdate",value:function(){s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.SPECIALTY_PAGE_HASH_UPDATED,{detail:{nextChapterData:this.nextChapterData}}))}},{key:"setActiveNavigationLink",value:function(){var e=this;this.navContainerElm.setAttribute(C,this.nextChapterData.index),this.waypointLinks.forEach((function(t){var n=t.hash.replace("#","")===e.nextChapterData.deepLink;t.classList[n?"add":"remove"](f),n||t.blur()})),this.setPrevNextButtonsState(this.nextChapterData.index)}},{key:"setOpenModalText",value:function(){this.openModalInnerElm.innerText=this.nextChapterData.chapterNumber,this.openModalElm.setAttribute("data-".concat(C),this.nextChapterData.index)}},{key:"openNavigationModal",value:function(){this.element.classList.add(y),s.jG.append(this.element,this.pageContent.parentNode)}},{key:"closeNavigationModal",value:function(){this.element.classList.remove(y),s.jG.insertAdjacentElement(this.element,this.specialtyChapterlabel,s.jG.POSITIONS.AFTER_END)}},{key:"activeNavLinkIndex",get:function(){return this.waypointLinks.findIndex((function(e){return e.classList.contains(f)}))}}]),e}(),w=function(){function e(t){(0,i.Z)(this,e),this.element=t,this.onHashChange=this.onHashChange.bind(this),this.onLifecycleTransition=this.onLifecycleTransition.bind(this),this.onTransitionEnd=this.onTransitionEnd.bind(this),this.onScreenResize=this.onScreenResize.bind(this),this.currentScreenState=s.sp.getState(),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.firstPass=!0,this.cacheDOM(),this.attachEvents()}},{key:"cacheDOM",value:function(){this.chapterLabelContainerElm=this.element.querySelector(".".concat("specialty-chapter__label")),this.chapterTitleElm=this.element.querySelector(".".concat("specialty-chapter__label-title")),this.chapterNumberElm=this.element.querySelector(".".concat("specialty-chapter__label-number"))}},{key:"attachEvents",value:function(){s.sp.addResizeListener(this.onScreenResize),this.chapterLabelContainerElm.addEventListener(o.FP.TRANSITION_END,this.onTransitionEnd),s.Jw.addEventListener(o.fD.SPECIALTY_PAGE_HASH_UPDATED,this.onHashChange),s.Jw.addEventListener(o.fD.LIFECYCLE_TRANSITION,this.onLifecycleTransition)}},{key:"onScreenResize",value:function(e){e!==this.currentScreenState&&(this.currentScreenState.small&&!e.small&&this.expand(),this.currentScreenState=e)}},{key:"onHashChange",value:function(e){var t=e.detail;this.nextChapterData=t.nextChapterData,this.firstPass&&this.expand()}},{key:"onLifecycleTransition",value:function(e){e.detail.transitionStage===o.ch.PLAYOUT_COMPLETE&&this.collapse()}},{key:"onTransitionEnd",value:function(){"30px"===this.chapterLabelContainerElm.style.width&&this.expand()}},{key:"expand",value:function(){this.chapterTitleElm.innerText=this.nextChapterData.name,this.chapterNumberElm.innerText=this.nextChapterData.chapterNumber,this.chapterLabelContainerElm.classList.remove("specialty-chapter__label--collapse"),this.chapterLabelContainerElm.style.width="".concat(this.chapterTitleElm.offsetWidth+this.chapterNumberElm.offsetWidth+35,"px"),this.firstPass=!1}},{key:"collapse",value:function(){this.chapterLabelContainerElm.style.width="30px"}}]),e}(),b=n(11435),_=n(89462),S={WAYPOINT_NAV:"waypoint-nav",CLICK_SHIELD:"specialty-page__click-shield"},D=function(){function e(t){(0,i.Z)(this,e),this.element=t,this.currentChapter=null,this.currentChapterData=null,this.nextChapterData=null,this.onHashChange=this.onHashChange.bind(this),this.onLifecycleTransition=this.onLifecycleTransition.bind(this),this.onProxyClassesLoaded=this.onProxyClassesLoaded.bind(this),this.addClickShield=this.addClickShield.bind(this),this.removeClickShield=this.removeClickShield.bind(this),this.init()}return(0,a.Z)(e,[{key:"init",value:function(){this.cacheDOM(),this.attachEvents(),this.initComponents()}},{key:"cacheDOM",value:function(){this.navigationNavElm=this.element.querySelector(".".concat(S.WAYPOINT_NAV)),this.chapterTitleElm=this.element.querySelector(".".concat(S.CHAPTER_TITLE))}},{key:"initComponents",value:function(){p.Z.allChapters=window.mbNafta.ns("specialtyPageData").chapterData,this.chapterTitle=new w(this.element),this.scrollNavigation=new r,this.navigation=new L(this.navigationNavElm)}},{key:"attachEvents",value:function(){s.Jw.addEventListener(o.fD.SPECIALTY_PAGE_HASH_UPDATED,this.onHashChange),s.Jw.addEventListener(o.fD.LIFECYCLE_TRANSITION,this.onLifecycleTransition),s.Jw.addEventListener(o.fD.DOCKED_FOOTER.OPEN,this.addClickShield),s.Jw.addEventListener(o.fD.DOCKED_FOOTER.CLOSE,this.removeClickShield)}},{key:"onProxyClassesLoaded",value:function(e){e.detail&&e.detail.registeredClasses&&Object.hasOwnProperty.call(e.detail.registeredClasses,this.currentChapterData.data.type)&&(s.Jw.removeEventListener(o.fD.DATA_LOADED,this.onProxyClassesLoaded),this.playChapter())}},{key:"addClickShield",value:function(){var e=(0,_.kY)()({getNode:!0});s.jG.append(e,this.element),e.addEventListener(o.FP.CLICK,(function(){s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.DOCKED_FOOTER.TOGGLE_TRIGGER))}))}},{key:"removeClickShield",value:function(){this.element.querySelector(".".concat(S.CLICK_SHIELD)).remove()}},{key:"onHashChange",value:function(e){var t=e.detail;this.nextChapterData=t.nextChapterData,this.currentChapter||(this.updateCurrentChapterData(),b.Z.classIsRegistered(this.currentChapterData.data.type)?this.playChapter():s.Jw.addEventListener(o.fD.DATA_LOADED,this.onProxyClassesLoaded))}},{key:"onLifecycleTransition",value:function(e){var t=e.detail;t.transitionStage===o.ch.PLAYOUT_BEGUN?s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.DOCKED_FOOTER.HIDE_FOOTER_BUTTON)):t.transitionStage===o.ch.PLAYOUT_COMPLETE&&(this.updateCurrentChapterData(),this.playChapter())}},{key:"updateCurrentChapterData",value:function(){this.currentChapterData=this.nextChapterData,this.nextChapterData=null}},{key:"playChapter",value:function(){this.currentChapter=new b.Z(this.currentChapterData.data.type,this.currentChapterData),p.Z.chapterCount===this.currentChapterData.index+1&&s.Jw.dispatchEvent(s.Jw.createCustomEvent(o.fD.DOCKED_FOOTER.SHOW_FOOTER_BUTTON))}}]),e}()},4190:function(e,t,n){n.d(t,{N:function(){return g}});var i=n(4942),a=n(15671),s=n(43144),o=n(8357),r=n(48218),c=n(52597),l=n(14569),h=n(47755),d=n(30168);function u(){var e=(0,d.Z)(['\n<div class="terms-of-use__wrapper">\n    <h4 class="terms-of-use__title">','</h4>\n    <p class="terms-of-use__description">','</p>\n    <div class="terms-of-use__check" data-policy-check></div>\n    <div class="terms-of-use__ctas-wrapper">\n        <button class="terms-of-use__cta button button_secondary button--wide" data-analytics-trigger="cta-decline-log-out" data-decline-cta>','</button>\n        <button class="terms-of-use__cta button button_primary button--wide disabled" data-analytics-trigger="cta-accept-continue" data-accept-cta>',"</button>\n    </div>\n</div>\n"]);return u=function(){return e},e}function p(){var e=(0,d.Z)(['\n<div class="terms-of-use__wrapper">\n    <h4 class="terms-of-use__title">','</h4>\n    <p class="terms-of-use__description">','</p>\n    <div class="terms-of-use__check" data-policy-check></div>\n    <div class="terms-of-use__ctas-wrapper">\n        <button class="terms-of-use__cta button button_primary button--wide disabled" data-analytics-trigger="cta-accept-continue" data-accept-cta>','</button>\n        <button class="terms-of-use__cta button button_secondary button--wide" data-analytics-trigger="cta-decline-log-out" data-decline-cta>',"</button>\n    </div>\n</div>\n"]);return p=function(){return e},e}var v=function(e){return c.Rh.authenticationFetch("".concat(e,"/secure/profile/acceptTerms?accepted=true")).then((function(e){return e.result}))};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var y={accept:"Accept and Continue",decline:"Decline and Log Out",description:"Accepting our Terms of Use will give you access to additional features throughout our site. Declining will log you out, but you will still be able to browse MBUSA.com.",policies:"policies",privacyPolicy:"I acknowledge that I have read and agree to all applicable Mercedes-Benz policies, including the {termsofuse} and {privacystatement}",privacyPolicyLinkLabel:"Mercedes-Benz policies",subtitle:"Weâ€™ve updated our Terms of Use since the last time you logged in.",title:"Legal Notice",updateDescription:"Please accept these terms to continue to your account and enjoy all the features of MBUSA.com. If you decline, you will be logged out, but you can still browse the site."},m=window.mbNafta.ns("pageData","termsOfUse").localization,E=window.mbNafta.applicationProperties.profileServiceLocale,C=window.mbNafta.pageData.basePath,g=function(){function e(t){(0,a.Z)(this,e),this.authApi=new c.$S;var n=o.pR.getCookie(r.E9.SHOW_TERMS),s=o.pR.getCookie(r.E9.FIRST_LOGIN);if(this.authApi.isLoggedIn()&&n&&"false"!==n&&(this.content=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y,{},m),!(window.location.pathname.indexOf(this.content.legalNoticeURI)>-1||window.location.pathname.indexOf("admin/ciam")>-1)))if(this.termsElement=s?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.e2)(u(),e.title,e.description,e.decline,e.accept)}(this.content)({getNode:!0}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.e2)(p(),e.title,e.description,e.accept,e.decline)}(this.content)({getNode:!0}),this.modal=null,this.acceptCta=null,this.declineCta=null,this.policyCheckContainer=null,this.accepted=!1,this.onPolicyCheck=this.onPolicyCheck.bind(this),this.onAccept=this.onAccept.bind(this),this.onClose=this.onClose.bind(this),this.cacheDOM(),this.attachEvents(),this.renderPolicyCheckbox(),t)t.appendChild(this.termsElement);else{if(window.location.pathname.indexOf("/accept-terms")>-1)return;this.createModal(),this.modal.open()}}return(0,s.Z)(e,[{key:"cacheDOM",value:function(){this.acceptCta=this.termsElement.querySelector("[".concat("data-accept-cta","]")),this.declineCta=this.termsElement.querySelector("[".concat("data-decline-cta","]")),this.policyCheckContainer=this.termsElement.querySelector("[".concat("data-policy-check","]"))}},{key:"attachEvents",value:function(){this.acceptCta.addEventListener(r.FP.CLICK,this.onAccept),this.declineCta.addEventListener(r.FP.CLICK,this.onClose)}},{key:"detachEvents",value:function(){this.acceptCta.removeEventListener(r.FP.CLICK,this.onAccept),this.declineCta.removeEventListener(r.FP.CLICK,this.onClose)}},{key:"destroy",value:function(){this.detachEvents(),this.termsElement.remove()}},{key:"createModal",value:function(){this.modalElm=o.jG.fromTemplate('<div class="terms-of-use-modal"></div>'),this.modalElm.appendChild(this.termsElement),this.modal=new l.Modal(void 0,{modalContent:this.modalElm,callbacks:{beforeClose:this.onClose},sizeSmall:l.Modal.SIZES.FULLSCREEN,sizeLarge:l.Modal.SIZES.INSET})}},{key:"renderPolicyCheckbox",value:function(){var e="<a href='".concat(this.content.mercedesMePrivacyURI,"' target='_blank' data-analytics-trigger='cta' aria-label='").concat(this.content.privacyPolicyLinkLabel,"'>").concat(this.content.privacyPolicyLinkLabel,"</a>"),t="<a href='".concat(this.content.termsOfUseUri,"' target='_blank' data-analytics-trigger='cta' aria-label='").concat(this.content.terms,"'>").concat(this.content.terms,"</a>"),n=(0,o.NR)(this.content.privacyPolicy,[t,e]);this.policyCheckbox=new h.ZS({id:"policyCheckbox",labelText:n,checked:!1,analyticsTrigger:"cta-terms",onChangeCallback:this.onPolicyCheck}),this.policyCheckContainer.appendChild(this.policyCheckbox.render())}},{key:"onPolicyCheck",value:function(){this.acceptCta.classList.toggle("disabled")}},{key:"onAccept",value:function(){var e=this;this.accepted=!0,v(E).then((function(){if(o.pR.deleteCookie({name:r.E9.SHOW_TERMS}),!e.modal){var t=decodeURIComponent(o.pR.getCookie(r.E9.AUTH_REDIRECT));t||(t="".concat(C,"/home")),window.location.replace(t)}})),this.modal&&this.modal.close()}},{key:"onClose",value:function(){if(!this.accepted){var e=decodeURIComponent(o.pR.getCookie(r.E9.AUTH_REDIRECT));e||(e="".concat(C,"/home")),this.authApi.authRedirect(c.$S.AUTH_PAGES.LOGOUT,e)}}}]),e}()},53620:function(e,t,n){n.d(t,{g:function(){return C}});var i=n(70885),a=n(15671),s=n(43144),o=n(8357),r=n(74050),c=n(98243),l=window.mbNafta.pageData.videoHub;var h=n(4942),d=n(30168),u=n(90459);function p(){var e=(0,d.Z)(['\n    <li class="overlay-video-grid__videos-topic">\n        <button class="overlay-video-grid__videos-link"\n                data-video-id="','"\n                ','\n                data-video-path="','"\n                data-video-title="','"\n                data-video-body="','"\n                data-video-category="','"\n                data-video-category-title="','"\n                aria-description="','">\n            <div class="overlay-video-grid__videos-container">\n                <img class="overlay-video-grid__videos-container-placeholder" src="','" role="presentation" />\n                <span class="overlay-video-grid__videos-container-timestamp" aria-label="','"><span>','</span></span>\n            </div>\n            <h4 class="overlay-video-grid__videos-heading">\n                ',"\n            </h4>\n            ","\n        </button>\n    </li>\n"]);return p=function(){return e},e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var f={minute:"minute",minutes:"minutes",second:"second",seconds:"seconds"},y=function(){function e(t,n){(0,a.Z)(this,e),this.data=t,this.tag=n,this.content=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f,{},window.mbNafta.ns("pageData","localization").videoHub),this.render=this.render.bind(this)}return(0,s.Z)(e,[{key:"render",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.e2)(p(),e.video,e.transcript?'data-video-transcript="'.concat(e.transcript,'"'):"",e.path,e.heading,e.body,t.name,t.title,(0,o.NR)(u.Z.modalAlertYouTube,[e.heading]),e.thumbnail,function(e,t){if(e&&-1!==e.indexOf(":")){var n=e.split(":"),i=1===parseInt(n[0],10)?t.minute:t.minutes,a=1===parseInt(n[1],10)?t.second:t.seconds;return"".concat(parseInt(n[0],10)," ").concat(i,", ").concat(parseInt(n[1],10)," ").concat(a)}return""}(e.timestamp,n),e.timestamp,e.heading,e.subHeading?'<h5 class="overlay-video-grid__videos-subheading">'.concat(e.subHeading,"</h5>"):"")}(this.data,this.tag,this.content)({getNode:!0})}}]),e}();function m(){var e=(0,d.Z)(['\n    <div class="overlay-video-grid" id="','" data-filter-waypoint="','" data-waypoint-label="','">\n        <section class="wrapper" data-load-module="OverlayVideoGrid">\n            <div class="overlay-video-grid__copy-container overlay-video-grid__copy-container--left overlay-video-grid__link">\n                <h3 class="default-content-section_header" data-focus-element="true" tabindex="-1">\n                    ','\n                </h3>\n        \n                <ul class="overlay-video-grid__videos-topics wrapper" data-overlay-video-grid-items></ul>\n            </div>\n        </section>\n    </div>\n']);return m=function(){return e},e}var E=function(){function e(t){(0,a.Z)(this,e),this.tag=t.tag,this.videos=t.videos,this.render=this.render.bind(this)}return(0,s.Z)(e,[{key:"render",value:function(){var e=this,t=this.renderSection(this.tag),n=t.querySelector("[".concat("data-overlay-video-grid-items","]"));return this.videos.forEach((function(t){var i=e.renderVideo(t,e.tag);o.jG.append(i,n)})),t}},{key:"renderSection",value:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.e2)(m(),e.name,e.name,e.title,e.title)}(e)({getNode:!0})}},{key:"renderVideo",value:function(e,t){return new y(e,t).render()}}]),e}(),C=function(){function e(t,n){(0,a.Z)(this,e),this.createGrids=this.createGrids.bind(this),this.handleSearchResults=this.handleSearchResults.bind(this),this.updateUrl=this.updateUrl.bind(this),this.resultsElm=t,this.authoredElm=n,this.stickyNav=null,this.sections=null,this.stickyNavElm=document.querySelector(".sticky-nav")}return(0,s.Z)(e,[{key:"searchVideos",value:function(e){var t=this;this.data=e,function(e){var t,n=l.endpoints.resourcePath,i=l.endpoints.search,a=e.year||null,s=e.classBodyStyle||null,o=e.categoryType||null,r=e.categoryName||null;t=a?".".concat(a):"",t+=s?".".concat(s):"",t+=o?".".concat(o):"",t+=r?".".concat(r):"";var c="".concat(n,".").concat(i).concat(t,".json");return fetch(c,{headers:{"Referrer-Policy":"origin",Referer:window.location.href},method:"GET"}).then((function(e){return e.json()}))}(e).then(this.handleSearchResults).catch((function(e){console.error("Video search failed: ".concat(e)),t.searchError()}))}},{key:"handleSearchResults",value:function(e){this.sections=e,this.createGrids(e),this.updateUrl()}},{key:"createGrids",value:function(e){var t=this,n=o.jG.fromTemplate("<div></div>");if(!(e.length>0))throw Error("Video search failed");e.forEach((function(e){var i=t.renderSection(e);o.jG.append(i,n)})),n=o.jG.unwrappedFragment(n),this.appendResults(n),this.removeAuthored(),this.stickyNavElm&&this.renderStickyNav()}},{key:"updateUrl",value:function(){var e=window.location.search.substring(1).split("&"),t={};e.forEach((function(e){var n=e.split("="),a=(0,i.Z)(n,2),s=a[0],r=a[1];t[o.pu[s]]=r})),Object.entries(this.data).forEach((function(e){null!==e[1]&&(t[e[0]]=e[1])})),window.history.replaceState(t,document.title,"".concat((0,o.HD)(t)))}},{key:"searchError",value:function(){return null}},{key:"renderSection",value:function(e){return new E(e).render()}},{key:"renderStickyNav",value:function(){o.jG.empty(this.stickyNavElm),this.stickyNav=new c.StickyNav(this.stickyNavElm,{waypointSection:"data-filter-waypoint",waypointDataset:"filterWaypoint"})}},{key:"appendResults",value:function(e){this.resultsElm.setAttribute("aria-hidden",!1),o.jG.insert(e,this.resultsElm),new r.Z(this.resultsElm,this.sections)}},{key:"removeAuthored",value:function(){this.authoredElm.remove()}}]),e}()},50615:function(e,t,n){n(26981);var i=n(40327);n(66337),n(94128),n(74124),n(57147),t.Z=function(){(0,i.customEvent)(),(0,i.arrayFilter)(),(0,i.arrayFind)(),(0,i.arrayFindIndex)(),(0,i.arrayUnique)(),(0,i.arrayFlat)(),(0,i.elementMatches)(),(0,i.elementRemove)(),(0,i.objectFromEntries)(),(0,i.objectValues)(),(0,i.promise)(),(0,i.stringIncludes)(),(0,i.wheelEvent)()}}},function(e){e.O(0,[7576,4569,7856,9936,8174,1467,3831,7088,1752,3989,5384,2201,2729,8357,816,7491,4470,7842,2051,9334,8421,616,3154,2473,8243,2605,1047,5541,4670,9688,8044,9645,7206,544,4626,495,3087,1940,6038,817,2722,9064,7748,8623,4190,9141,7214,8340,9543,4121,3637],(function(){return 60563,e(e.s=60563)})),e.O()}]);
//# sourceMappingURL=main-2d53b2d1.js.map