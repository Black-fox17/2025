"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[4470],{16266:function(t,e,n){n.d(e,{D:function(){return f}});var i=n(15671),o=n(43144),a=n(4942),s=n(48218),r=n(8357),c=n(55235),l=n(30168);function u(){var t=(0,l.Z)(['\n    <div class="dealer-search-bar">\n        <div class="dealer-search-bar__location-search" data-location-search=""></div>\n        <div class="dealer-search-bar__cta">\n            <button class="','" data-cta-button="" data-analytics-trigger="cta">\n                ',"\n            </button>\n        </div>\n    </div>\n"]);return u=function(){return t},t}var h=function(t){var e=t.ctaLabel,n=t.buttonStyle;return(0,r.e2)(u(),n,e)};function d(){var t=(0,l.Z)(['\n    <form onSubmit="return false;">\n        <h3 class="preferred-dealer-plugin__sub-heading">','</h3>\n        <div class="dealer-search-bar">\n            <div class="dealer-search-bar__location-search" data-location-search=""></div>\n            <div class="dealer-search-bar__cta">\n                <button type="button" class="','" data-cta-button="" data-analytics-trigger="contact-dealer-search">\n                    ',"\n                </button>\n            </div>\n        </div>\n    </form>\n"]);return d=function(){return t},t}var v=function(t){var e=t.ctaLabel,n=t.buttonStyle,i=t.sectionHeading;return(0,r.e2)(d(),i,n,e)},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.autoSubmitLocation,o=void 0===n||n,a=e.buttonStyle,s=void 0===a?"button button_secondary":a,c=e.country,l=e.ctaLabel,u=void 0===l?"":l,d=e.dealerSearchErrorMessage,f=void 0===d?"":d,m=e.dealerSearchErrorMessageUS,p=void 0===m?"":m,b=e.defaultLocation,y=e.onCTAClick,L=void 0===y?r.ZT:y,E=e.onSubmit,g=void 0===E?r.ZT:E,S=e.isCTASubmit,C=void 0===S||S,k=e.searchInputLabel,I=void 0===k?"":k,O=e.searchInputLabelUS,_=void 0===O?"":O,w=e.sectionHeading,P=void 0===w?"":w,B=e.theme,A=void 0===B?t.THEMES.DEALER_SEARCH:B,T=e.onErrorMessage,Z=void 0===T?r.ZT:T,M=e.shouldPreventDefaultOnSubmit,D=void 0!==M&&M,V=e.config,U=void 0===V?{}:V;(0,i.Z)(this,t),this.element=(A===t.THEMES.CHOOSE_A_DEALER?v:h)({ctaLabel:u,buttonStyle:s,sectionHeading:P})({getNode:!0}),this.searchInputLabel=I,this.searchInputLabelUS=_,this.dealerSearchErrorMessage=f,this.dealerSearchErrorMessageUS=p,this.locationSearch=null,this.locationSearchElem=null,this.ctaButtonElm=null,this.onCTAClickCallback=L,this.onSubmitCallback=g,this.isCTASubmit=C,this.country=c,this.defaultLocation=b,this.theme=A,this.autoSubmitLocation=o,this.onErrorMessageCallback=Z,this.shouldPreventDefaultOnSubmit=D,this.config=U,this.ctaClick=this.ctaClick.bind(this),this.submitLocation=this.submitLocation.bind(this),this.cacheDOM(),this.attachEvents(),this.createLocationSearch()}return(0,o.Z)(t,[{key:"cacheDOM",value:function(){this.locationSearchElem=this.element.querySelector("[".concat("data-location-search","]")),this.ctaButtonElm=this.element.querySelector("[".concat("data-cta-button","]"))}},{key:"attachEvents",value:function(){this.isCTASubmit||this.ctaButtonElm&&this.ctaButtonElm.addEventListener(s.FP.CLICK,this.ctaClick)}},{key:"createLocationSearch",value:function(){this.locationSearch=new c.U({searchLength:3,searchInputLabel:this.searchInputLabel,searchInputLabelUS:this.searchInputLabelUS,country:this.country,defaultLocation:this.defaultLocation,errorMessage:this.dealerSearchErrorMessage,errorMessageUS:this.dealerSearchErrorMessageUS,onSubmit:this.submitLocation,onSubmitBtn:this.isCTASubmit?this.ctaButtonElm:null,autoSubmitLocation:this.autoSubmitLocation,onErrorMessageCallback:this.onErrorMessageCallback,shouldPreventDefaultOnSubmit:this.shouldPreventDefaultOnSubmit,config:this.config}),this.locationSearchElem.appendChild(this.locationSearch.render())}},{key:"submitLocation",value:function(t){var e=this;new Promise((function(n){"place"===t.type?n({searchString:t.value,searchLocation:t.id,searchByType:"place",autoSubmit:e.autoSubmitLocation}):"zip"===t.type&&n({searchString:t.value,searchLocation:t.value,searchByType:"zip",autoSubmit:e.autoSubmitLocation})})).catch((function(e){console.warn("Location could not be found for ".concat(t.id," ").concat(e))})).then(this.onSubmitCallback)}},{key:"ctaClick",value:function(t){t.preventDefault(),this.onCTAClickCallback(this.locationSearch.searchInputElm.value)}},{key:"detachEvents",value:function(){this.isCTASubmit||this.ctaButtonElm.removeEventListener(s.FP.CLICK,this.ctaClick)}},{key:"destroy",value:function(){this.detachEvents(),this.locationSearch&&(this.locationSearch.destroy(),this.locationSearch=null),this.locationSearchElem=null,this.ctaButtonElm=null,this.element.remove()}},{key:"showError",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.locationSearch.showErrorMessage(t,e)}},{key:"render",value:function(){return this.element}},{key:"focus",set:function(t){t&&(this.locationSearch.focus=t)}}]),t}();(0,a.Z)(f,"THEMES",{DEALER_SEARCH:"dealerSearch",CHOOSE_A_DEALER:"chooseADealerPlugin"})},83224:function(t,e,n){n.d(e,{T:function(){return h},Z:function(){return d}});var i=n(4942),o=n(15671),a=n(43144),s=n(30168),r=n(8357);function c(){var t=(0,s.Z)(['\n    <div class="loading-spinner '," ",'">\n    </div>']);return c=function(){return t},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var u={isInline:!1,isLarge:!1},h=function(){function t(){var e,n,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.Z)(this,t),this.config=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u,{},s),this.element=(n=(e=s).isInline,a=e.isLarge,(0,r.e2)(c(),n?"loading-spinner--inline":"",a?"loading-spinner--large":""))({getNode:!0})}return(0,a.Z)(t,[{key:"destroy",value:function(){this.element.remove()}},{key:"render",value:function(){return this.element}}]),t}(),d={LoadingSpinner:h}},55235:function(t,e,n){n.d(e,{U:function(){return F}});var i=n(30168),o=n(87757),a=n.n(o),s=n(15861),r=n(15671),c=n(43144),l=n(82963),u=n(61120),h=n(60136),d=n(4942),v=n(72307),f=n.n(v),m=n(48218),p=n(92059),b=n(80662),y=n(70816),L=n(8357),E=n(37898),g=n(71002),S=n(12641),C={locations:null,locationValue:{type:"string",value:""}},k=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return(0,r.Z)(this,e),(0,l.Z)(this,(0,u.Z)(e).call(this,t))}return(0,h.Z)(e,t),(0,c.Z)(e,[{key:"setLocation",value:function(t){this.state.locationValue=function(t){return"object"===(0,g.Z)(t)&&Object.prototype.hasOwnProperty.call(t,"place_id")?{type:"place",value:"".concat((e=t).terms[0].value,", ").concat(e.terms[1].value),id:e.place_id}:(0,E.isValidZip)(t)?{type:"zip",value:t}:{type:"string",value:t};var e}(t)}},{key:"getLocations",value:function(t,e){var n=this;return b.cJ.getCityNames(t,e).then((function(t){t&&e!==S.Z.COUNTRIES.US&&(n.state.locations=t)})).catch((function(t){throw t}))}},{key:"clearLocations",value:function(){this.state.locations=null}}]),e}(p.y);function I(){var t=(0,i.Z)(['\n    <div class="location-search__locations" aria-hidden="true">\n        <ul class="location-search__list"\n            data-location-list=""\n            id="','"\n            role="listbox">\n        </ul>\n        <div class="location-search__engine"></div>\n    </div>\n']);return I=function(){return t},t}function O(){var t=(0,i.Z)(['\n    <li class="location-search__location"\n        data-location="','"\n        tabindex="','"\n        role="option">\n        ',", ","\n    </li>\n"]);return O=function(){return t},t}var _="aria-hidden",w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.ZT,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,r.Z)(this,t),this.element=function(t){return(0,L.e2)(I(),t)}(n)({getNode:!0}),this.onSelectCallback=e,this.locationList=null,this.locationElms=[],this.locations=null,this.onSelect=this.onSelect.bind(this),this.cacheDOM()}return(0,c.Z)(t,[{key:"cacheDOM",value:function(){this.locationList=this.element.querySelector("[".concat("data-location-list","]"))}},{key:"attachEvents",value:function(){var t=this;this.locationElms.forEach((function(e,n){e.addEventListener(m.FP.CLICK,t.onSelect.bind(t,t.locations[n]))}))}},{key:"detachEvents",value:function(){var t=this;this.locationElms.forEach((function(e){e.removeEventListener(m.FP.CLICK,t.onSelect)}))}},{key:"destroy",value:function(){this.detachEvents(),this.locations=null,this.element.remove()}},{key:"displayLocations",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.locations=e,this.locations.forEach((function(e,n){var i=e.terms[0].value,o=e.terms[1].value,a=function(t,e,n,i){return(0,L.e2)(O(),t,i?"0":"-1",e,n)}(e.place_id,i,o,0===n)({getNode:!0});t.locationElms.push(a),L.jG.append(a,t.locationList)})),this.element.setAttribute(_,"false"),this.attachEvents()}},{key:"hideLocations",value:function(){this.detachEvents(),this.locations=null,this.locationElms.forEach((function(t){t.remove()})),this.locationElms=[],this.element.setAttribute(_,"true")}},{key:"onSelect",value:function(t){this.onSelectCallback(t)}},{key:"render",value:function(){return this.element}}]),t}();function P(){var t=(0,i.Z)(['\n    <div class="location-search">\n        <div class="location-search__form">\n            <div class="form__input form__input--inline" \n                 data-search-input-container=""\n                 role="combobox"\n                 aria-expanded="false"\n                 aria-haspopup="listbox"\n                 aria-owns="','">\n                <input class="form__input-field ','"\n                    data-search-input=""\n                    data-analytics-trigger="locator-search"\n                    id="','"\n                    required\n                    data-required="true"\n                    aria-describedby="','"\n                    aria-required="true"\n                    aria-controls="','"\n                    autoComplete="off" />\n                <label class="form__input-label" for="','">\n                    ','\n                </label>\n                <button type="button" class="form__input-reset" data-clear-button="">\n                    <span class="offscreen">Delete</span>\n                </button>\n                <span id=',' class="form__input-error" data-error-message></span>\n            </div>\n        </div>\n        <div class="location-search__results" data-search-locations="">\n        </div>\n    </div>\n']);return P=function(){return t},t}function B(){var t=(0,i.Z)(['<svg class="form__input--icon error-icon" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <circle cx="12.5" cy="12" r="12" fill="#D92121"/>\n                <path d="M11.5 6.01196H13.5V13.012H11.5V6.01196Z" fill="white"/>\n                <path d="M12.5 17.512C13.3284 17.512 14 16.8404 14 16.012C14 15.1835 13.3284 14.512 12.5 14.512C11.6716 14.512 11 15.1835 11 16.012C11 16.8404 11.6716 17.512 12.5 17.512Z" fill="white"/>\n            </svg>']);return B=function(){return t},t}function A(){var t=(0,i.Z)(['<svg class="form__input--icon success-icon" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <circle cx="12.5" cy="12" r="12" fill="#198025"/>\n                <path d="M10.317 17.048L6.5 12.308L7.79 11.272L10.396 14.512L17.276 6.95996L18.5 8.07396L10.317 17.048Z" fill="white"/>\n            </svg>']);return A=function(){return t},t}var T="location-search--active",Z="error",M="form__input-dropdown",D="form__input-reset--visible",V="data-search-locations",U="aria-expanded",j="aria-invalid",N="error",x=function(t){return{terms:[{value:t.address_components[0].long_name},{value:t.address_components.find((function(t){return-1!==t.types.indexOf("administrative_area_level_1")})).short_name}],place_id:t.place_id}},F=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.formElm,o=void 0===i?null:i,a=n.searchLength,s=void 0===a?3:a,c=n.searchInputLabel,h=void 0===c?"":c,d=n.searchInputLabelUS,v=void 0===d?"":d,f=n.errorMessage,m=void 0===f?"":f,p=n.errorMessageUS,b=void 0===p?"":p,y=n.theme,E=void 0===y?"":y,g=n.onSubmit,S=void 0===g?L.ZT:g,C=n.onSubmitBtn,k=void 0===C?null:C,I=n.disableReset,O=void 0!==I&&I,_=n.country,w=n.defaultLocation,B=n.autoSubmitLocation,A=void 0===B||B,T=n.onInputChangeCallback,Z=void 0===T?L.ZT:T,M=n.onAutoSubmitErrorCallback,D=void 0===M?L.ZT:M,V=n.onErrorMessageCallback,U=void 0===V?L.ZT:V,j=n.shouldPreventDefaultOnSubmit,N=void 0!==j&&j,x=n.config,F=void 0===x?{}:x;(0,r.Z)(this,e),t=(0,l.Z)(this,(0,u.Z)(e).call(this));var K=(0,L.fV)(),q="listbox".concat(K),H="error".concat(K);return t.element=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0,o=i.searchInputLabel,a=i.searchInputLabelUS,s=i.disableReset;return(0,L.e2)(P(),e,s?"":"form__input-field--can-reset",t,n,e,t,o||a,n)}(K,q,H,{searchInputLabel:h,searchInputLabelUS:v,disableReset:O})({getNode:!0}),t.config=F,t.formElm=o,t.searchInputElm=null,t.searchInputContainerElm=null,t.onSubmitBtn=k,t.clearButtonElm=null,t.errorMessageElm=null,t.disableReset=O,t.locationListElm=null,t.locationList=null,t.searchLengthBuffer=s,t.onSubmitCallback=S,t.country=_,t.errorMessage=m,t.errorMessageUS=b,t.errored=!1,t.theme=E,t.defaultLocation=w,t.onInputChangeCallback=Z,t.autoSubmitLocation=A,t.onAutoSubmitErrorCallback=D,t.onErrorMessageCallback=U,t.shouldPreventDefaultOnSubmit=N,t.init(q),t}var n;return(0,h.Z)(e,t),(0,c.Z)(e,[{key:"init",value:(n=(0,s.Z)(a().mark((function t(e){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.model=new k,this.onKeydown=this.onKeydown.bind(this),this.onInputChange=this.onInputChange.bind(this),this.checkInputChangeKey=this.checkInputChangeKey.bind(this),this.onLocationSelection=this.onLocationSelection.bind(this),this.searchPlaces=this.searchPlaces.bind(this),this.searchPlacesDebounce=(0,L.Ds)(this.searchPlaces,100).bind(this),this.onInputFocus=this.onInputFocus.bind(this),this.submitLocation=this.submitLocation.bind(this),this.onSubmitBtnClick=this.onSubmitBtnClick.bind(this),this.clearInputValue=this.clearInputValue.bind(this),this.toggleClearButton=this.toggleClearButton.bind(this),this.onlocationListChange=this.onlocationListChange.bind(this),this.setLocationToLS=this.setLocationToLS.bind(this),this.onClickOutside=this.onClickOutside.bind(this),this.onTabOutside=this.onTabOutside.bind(this),this.onClearBtnClick=this.onClearBtnClick.bind(this),this.cacheDOM(),this.attachEvents(),t.next=21,y.s.getInstance();case 21:this.dealerLocationPrioritization=t.sent,this.disableReset&&this.disableClearButton(),!this.defaultLocation||null!==(n=this.config)&&void 0!==n&&null!==(i=n.variantInfo)&&void 0!==i&&i.isLargeFormat||this.setDefaultLocation(),this.locationList=new w(this.onLocationSelection,e),L.jG.insert(this.locationList.render(),this.locationListElm);case 26:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setDefaultLocation",value:function(){var t=this;if(this.defaultLocation.searchLocation)switch(this.defaultLocation.searchByType){case"place":b.cJ.getPlaceInfo(this.defaultLocation.searchLocation).then(x).then((function(e){t.onLocationSelection(e,t.autoSubmitLocation),t.searchInputElm.blur(),t.searchInputElm.focus()})).catch((function(e){console.log(e),t.onAutoSubmitErrorCallback()}));break;case"zip":this.setLocation(this.defaultLocation.searchLocation),this.setInputValue(this.defaultLocation.searchLocation),this.autoSubmitLocation&&window.setTimeout(this.submitLocation.bind(this))}}},{key:"cacheDOM",value:function(){this.formElm=this.element.querySelector(".".concat("form__input")),this.searchInputElm=this.element.querySelector("[".concat("data-search-input","]")),this.searchInputContainerElm=this.element.querySelector("[".concat("data-search-input-container","]")),this.locationListElm=this.element.querySelector("[".concat(V,"]")),this.clearButtonElm=this.element.querySelector("[".concat("data-clear-button","]")),this.errorMessageElm=this.element.querySelector("[".concat("data-error-message","]"))}},{key:"attachEvents",value:function(){this.onSubmitBtn&&this.onSubmitBtn.addEventListener(m.FP.CLICK,this.onSubmitBtnClick),this.searchInputElm.addEventListener(m.FP.KEYDOWN,this.onKeydown),this.searchInputElm.addEventListener(m.FP.INPUT,this.onInputChange),this.searchInputElm.addEventListener(m.FP.FOCUS,this.onInputFocus),this.clearButtonElm.addEventListener(m.FP.CLICK,this.onClearBtnClick),this.locationListElm.addEventListener(m.FP.KEYDOWN,this.onlocationListChange),this.attachAllyEvents(),this.model.attach(this)}},{key:"attachAllyEvents",value:function(){this.tabOutside=new L.yM(this.element,{onBlur:this.onTabOutside}),this.clickOutside=new L.Lp(this.element,L.ZT,this.onClickOutside,{useCapture:!1})}},{key:"detachEvents",value:function(){this.onSubmitBtn&&this.onSubmitBtn.removeEventListener(m.FP.CLICK,this.onSubmitBtnClick),this.searchInputElm.removeEventListener(m.FP.KEYDOWN,this.onKeydown),this.searchInputElm.removeEventListener(m.FP.INPUT,this.onInputChange),this.searchInputElm.removeEventListener(m.FP.KEYUP,this.onInputChange),this.searchInputElm.removeEventListener(m.FP.FOCUS,this.onInputFocus),this.clearButtonElm.removeEventListener(m.FP.CLICK,this.onClearBtnClick),this.locationListElm.removeEventListener(m.FP.KEYDOWN,this.onlocationListChange),this.detachAllyEvents(),this.model.detach(this)}},{key:"detachAllyEvents",value:function(){var t,e;null===(t=this.tabOutside)||void 0===t||t.destroy(),null===(e=this.clickOutside)||void 0===e||e.destroy()}},{key:"destroy",value:function(){this.detachEvents(),this.element.remove()}},{key:"onClickOutside",value:function(){this.doBlur()}},{key:"onTabOutside",value:function(){this.doBlur()}},{key:"onClearBtnClick",value:function(){this.clearInputValue(),this.searchInputElm.focus()}},{key:"onUpdate",value:function(t,e){f()(t.locations,e.locations)||(this.onLocationsChange(),this.detachAllyEvents(),this.attachAllyEvents())}},{key:"toggleClearButton",value:function(t){this.clearButtonElm&&(""!==t?this.clearButtonElm.classList.add(D):this.clearButtonElm.classList.remove(D))}},{key:"getLocationListDOMElements",value:function(){return this.element.querySelector(".".concat("location-search__list"))}},{key:"onlocationListChange",value:function(t){var e=document.activeElement;switch(t.which){case m.sd.UP:this.handleOptionUpArrow(t,e);break;case m.sd.DOWN:this.handleOptionDownArrow(t,e);break;case m.sd.ENTER:this.processKeyEnterOnLocationList(t)}}},{key:"handleOptionUpArrow",value:function(t,e){if(t.preventDefault(),e){var n=e.previousElementSibling;n?n.focus():this.searchInputElm.focus()}}},{key:"handleOptionDownArrow",value:function(t,e){if(t.preventDefault(),e){var n=e.nextElementSibling;n&&n.focus()}}},{key:"processKeyEnterOnLocationList",value:function(t){t.preventDefault();var e=document.activeElement;e&&(this.setLocation(e.innerHTML),this.submitLocation())}},{key:"disableClearButton",value:function(){this.clearButtonElm.remove(),this.clearButtonElm=null}},{key:"onKeydown",value:function(t){t.which!==m.sd.TAB&&(this.shouldPreventDefaultOnSubmit&&t.which===m.sd.ENTER&&t.preventDefault(),this.searchInputElm.addEventListener(m.FP.KEYUP,this.onInputChange))}},{key:"onInputChange",value:function(t){this.searchInputElm.removeEventListener(m.FP.KEYUP,this.onInputChange);var n=t.target.value,i=t.which;this.toggleClearButton(n),this.theme===e.THEMES.GLOBALNAV?this.errored?(this.model.state.inputValue="",this.model.state.locationValue.value="",this.hideErrorMessage()):this.checkInputChangeKey(i,n):(this.errored&&this.hideErrorMessage(),this.checkInputChangeKey(i,n)),"function"==typeof this.onInputChangeCallback&&this.onInputChangeCallback(n)}},{key:"checkInputChangeKey",value:function(t,e){t===m.sd.ENTER?this.submitLocation():t===m.sd.DOWN?this.locationListElm.focus():e!==this.model.state.inputValue&&(this.setInputValue(e),this.setLocation(e),this.searchPlacesDebounce())}},{key:"appendIcon",value:function(t){"success"===t&&null===this.searchInputContainerElm.querySelector(".success-icon")?this.searchInputContainerElm.appendChild((0,L.e2)(A())({getNode:!0})):t===N&&null===this.searchInputContainerElm.querySelector(".error-icon")&&this.searchInputContainerElm.appendChild((0,L.e2)(B())({getNode:!0}))}},{key:"onSubmitBtnClick",value:function(t){this.shouldPreventDefaultOnSubmit&&t.preventDefault(),this.submitLocation()}},{key:"onInputFocus",value:function(){var t=this.searchInputElm.value;this.theme===e.THEMES.GLOBALNAV&&this.hideErrorMessage(),this.element.classList.add(T);var n=this.element.querySelector(".".concat(M));n&&(n.style.display="block"),this.toggleClearButton(t)}},{key:"doBlur",value:function(){this.element.classList.remove(T),this.clearButtonElm&&this.clearButtonElm.classList.remove(D);var t=this.element.querySelector(".".concat(M));t&&(t.style.display="none"),(0,L.wr)(document.activeElement,"[".concat(V,"]"))||this.removeLocationList()}},{key:"onLocationsChange",value:function(){var t=this.model.state.locations;this.locationList&&this.removeLocationList(),t&&t.length>0&&this.country!==S.Z.COUNTRIES.US&&this.displayLocationList()}},{key:"onLocationSelection",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="".concat(t.terms[0].value,", ").concat(t.terms[1].value);this.setInputValue(n),L.sp.gte(L.sp.SIZES.LARGE)&&(this.searchInputElm.focus(),this.searchInputElm.blur()),this.setLocation(t),e&&this.submitLocation(),this.removeLocationList()}},{key:"setInputValue",value:function(t){this.searchInputElm.value=t}},{key:"clearInputValue",value:function(){this.setInputValue(""),this.toggleClearButton(""),this.setLocation(""),this.onInputChangeCallback(""),this.removeLocationList()}},{key:"setLocation",value:function(t){this.model.setLocation(t)}},{key:"autoSelectLocation",value:function(){var t=this,e=this.model.state.locationValue;return this.model.getLocations(e.value,this.country).then((function(){t.model.state.locations&&t.onLocationSelection(t.model.state.locations[0])})).catch((function(t){throw t}))}},{key:"shouldAutoPick",value:function(){var t=this,e=this.model.state.locationValue;return e&&"string"===e.type&&e.value.length>=t.searchLengthBuffer}},{key:"submitLocation",value:function(){var t=this.model.state.locationValue;this.country===S.Z.COUNTRIES.US&&"string"===t.type||!(0,E.isPlace)(t.value)&&!(0,E.isValidZip)(t.value)?this.showErrorMessage():(this.errored=!1,this.hideErrorMessage(),this.setLocationToLS(t),this.shouldAutoPick()?this.autoSelectLocation():"place"!==t.type&&"zip"!==t.type||(this.onSubmitCallback(t),this.removeLocationList()))}},{key:"setLocationToLS",value:function(t){var e=y.s.DATA_TYPES.LAST_SEARCHED_LOCATION,n=t.value;t.id&&(n=t.id),this.dealerLocationPrioritization.set(e,[n,t.type],!0)}},{key:"searchPlaces",value:function(){var t=this.model.state.locationValue;t&&t.value.length>=this.searchLengthBuffer&&!(0,E.isValidZipStart)(t.value)?this.model.getLocations(t.value,this.country):this.model.clearLocations()}},{key:"showErrorMessage",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=window.mbNafta.ns("pageData").localization.defaultErrorLabel;this.errored=!0;var a=n||this.errorMessage||o;null===(t=this.searchInputElm.querySelector(".success-icon"))||void 0===t||t.remove(),this.appendIcon(N),this.theme===e.THEMES.GLOBALNAV?(this.searchInputElm.value=a,this.searchInputElm.classList.add("".concat(Z))):(this.formElm.classList.add("".concat(Z)),this.errorMessageElm.innerText=a,i&&this.searchInputElm.focus()),this.searchInputElm.setAttribute(j,"true"),this.onErrorMessageCallback()}},{key:"hideErrorMessage",value:function(){var t;this.errored=!1,null===(t=this.searchInputContainerElm.querySelector(".error-icon"))||void 0===t||t.remove(),this.theme===e.THEMES.GLOBALNAV?(this.clearInputValue(),this.searchInputElm.classList.remove("".concat(Z))):(this.formElm.classList.remove("".concat(Z)),this.formElm.removeAttribute("data-error")),this.searchInputElm.setAttribute(j,"false")}},{key:"displayLocationList",value:function(){this.locationList.displayLocations(this.model.state.locations),this.searchInputContainerElm.setAttribute(U,"true")}},{key:"removeLocationList",value:function(){this.locationList&&(this.locationList.hideLocations(),this.searchInputContainerElm.setAttribute(U,"false"))}},{key:"validate",value:function(){var t=this.model.state.locationValue&&this.model.state.locationValue.value,e=!!t&&((0,E.isPlace)(t)||(0,E.isValidZip)(t));return e?this.hideErrorMessage():this.showErrorMessage(),e}},{key:"getLocation",value:function(){var t=this;return new Promise((function(e){t.shouldAutoPick()?t.autoSelectLocation().then((function(){return e(t.model.state.locationValue)})):e(t.model.state.locationValue)}))}},{key:"render",value:function(){return this.element}},{key:"focus",set:function(t){t&&this.searchInputElm.focus()}}]),e}(p.Q);(0,d.Z)(F,"THEMES",{GLOBALNAV:"globalNav"})},92059:function(t,e,n){n.d(e,{y:function(){return u},Q:function(){return h}});var i=n(15671),o=n(43144),a=n(72307),s=n.n(a),r=n(71002),c=function(t){if(t.Proxy)return t.Proxy;var e=null;function n(t){return!!t&&("object"===(0,r.Z)(t)||"function"==typeof t)}var i=function(t,i){if(!n(t)||!n(i))throw new TypeError("Cannot create proxy with a non-object as target or handler");var o=function(){};e=function(){o=function(t){throw new TypeError("Cannot perform '".concat(t,"' on a proxy that has been revoked"))}};var a=i;for(var s in i={get:null,set:null,apply:null,construct:null},a){if(!(s in i))throw new TypeError("Proxy polyfill does not support trap '".concat(s,"'"));i[s]=a[s]}"function"==typeof a&&(i.apply=a.apply.bind(a));var r=this,c=!1,l="function"==typeof t;(i.apply||i.construct||l)&&(r=function(){var e=this&&this.constructor===r,n=Array.prototype.slice.call(arguments);if(o(e?"construct":"apply"),e&&i.construct)return i.construct.call(this,t,n);if(!e&&i.apply)return i.apply(t,this,n);if(l)return e?(n.unshift(t),new(t.bind.apply(t,n))):t.apply(this,n);throw new TypeError(e?"not a constructor":"not a function")},c=!0);var u=i.get?function(t){return o("get"),i.get(this,t,r)}:function(t){return o("get"),this[t]},h=i.set?function(t,e){o("set"),i.set(this,t,e,r)}:function(t,e){o("set"),this[t]=e},d=Object.getOwnPropertyNames(t),v={};d.forEach((function(e){if(!c||!(e in r)){var n={enumerable:!!Object.getOwnPropertyDescriptor(t,e).enumerable,get:u.bind(t,e),set:h.bind(t,e)};Object.defineProperty(r,e,n),v[e]=!0}}));var f=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(r,Object.getPrototypeOf(t)):r.__proto__?r.__proto__=t.__proto__:f=!1,i.get||!f)for(var m in t)v[m]||Object.defineProperty(r,m,{get:u.bind(t,m)});return Object.seal(t),Object.seal(r),r};return i.revocable=function(t,n){return{proxy:new i(t,n),revoke:e}},i}("undefined"!=typeof process&&"[object process]"=={}.toString.call(process)?n.g:self),l=function(){function t(e,n){return(0,i.Z)(this,t),t.buildProxy("",e,n)}return(0,o.Z)(t,null,[{key:"buildProxy",value:function(e,n,i){return new c(n,{set:function(t,e,n){var o=Object.assign({},t);return t[e]=n,i(o,t),!0},get:function(n,o){var a=n[o];return a instanceof Object?t.buildProxy("".concat(e).concat(o),a,i):a}})}}]),t}(),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,t),this.observers=[],this.state=new l(e,this.onChange.bind(this))}return(0,o.Z)(t,[{key:"attach",value:function(t){this.observers.push(t)}},{key:"detach",value:function(t){this.observers.splice(this.observers.indexOf(t),1)}},{key:"destroy",value:function(){this.observers=[]}},{key:"onChange",value:function(t,e){var n=this;s()(t,e)||Object.keys(this.observers).forEach((function(i){Object.prototype.hasOwnProperty.call(n.observers,i)&&n.observers[i].onUpdate(t,e)}))}}]),t}(),h=function(){function t(){(0,i.Z)(this,t)}return(0,o.Z)(t,[{key:"onUpdate",value:function(){return this}}]),t}()}}]);
//# sourceMappingURL=c39ec17affb62bd8baa5.bundle.js.map