"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[7491],{68434:function(t,e,n){var i=n(8357);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ZT,n=document.createElement("script");n.type="text/javascript",n.src=t,n.async=!0,n.onload=e,document.head.appendChild(n)}e.Z={loadScript:function(t,e){o(t,e)},loadScripts:function t(e,n,i){if(i){var a=e.shift();if(!a)return void n();o(a,(function(){return t(e,n)}))}else{var r=[];e.forEach((function(t){var e=new Promise((function(e){o(t,e)}));r.push(e)})),Promise.all(r).then((function(){n()}))}}}},87491:function(t,e,n){n.d(e,{a:function(){return M}});var i=n(4942),o=n(8357),a=n(80662);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c="https://www.google.com/maps/dir/Current+Location",l=window.mbNafta.applicationProperties,d=l.dealerLocatorService,u=l.inventoryConfig,f=u.inventoryUrl,h=u.inventoryService,p=u.isInventoryEnabled,g={dealers:"dealers",collisionCenters:"cc"},m={INVENTORY:"inventory"},v={};function y(t){var e="";return t.forEach((function(t){"phone"===t.type&&(e=t.value)})),e}function w(t){var e=t.activities,n="NO_SCHEDULE_SERVICE_URL";return e&&e.forEach((function(t){"service"===t.name&&(n=t.url&&(-1!==t.url.indexOf("://")?t.url:"//".concat(t.url))||"")})),n}function O(t){var e,n,i,a=t.url;return p?(e=t,n=f.split(".")[0],i=o.Uw.hyphenate(o.Uw.toAlphaNumeric(e.name)),a="".concat(n,"/").concat(i,"/").concat(e.id).concat((0,o.kT)())):a=a&&(-1!==a.indexOf("://")?a:"//".concat(a))||"",a}function b(t){return encodeURI("".concat(c,"/").concat(t.name,"+")+"".concat(t.address[0].line1,"+")+"".concat(t.address[0].city,"+")+"".concat(t.address[0].state,"+")+"".concat(t.address[0].zip))}function C(t,e,n){var i=t.location.dist;if(i){var o,a,r="".concat(parseFloat(i).toFixed(1)),s=(null===(o=window.mbNafta.applicationProperties)||void 0===o||null===(a=o.distance)||void 0===a?void 0:a.distanceUnitAbbr)||"",c=n||s||t.location.distunit||"";if("en"===e)return"".concat(r," ").concat(c);if("fr"===e){var l=r.replace(/\./,",");return"".concat(l," ").concat(c)}if("es"===e)return"".concat(r," ").concat(c)}return""}function k(t,e,n){var i=t.address[0];return Object.assign({},{id:(0,o.fV)(),dealerId:t.id,name:t.name,address:i&&i.line1,city:i&&i.city,state:i&&i.state.toUpperCase(),zip:i&&i.zip,country:i&&i.country,distance:C(t.address[0],e,n),location:{lat:i&&i.location.lat,lng:i&&i.location.lng},phone:t.contact&&y(t.contact),contact:t.contact,phoneFormatted:t.contact&&o.uf.toPhone(y(t.contact)),scheduleServiceUrl:w(t),url:t.url&&(-1!==t.url.indexOf("://")?t.url:"//".concat(t.url))||"",inventoryUrl:t.activities&&O(t),isAmg:!!t.badges&&-1!==t.badges.indexOf("amg"),isAmgElite:!!t.badges&&-1!==t.badges.indexOf("amgelite"),directionsLink:b(t),badges:t.badges,isDealership:"DEALER"===t.type,marketCode:t.marketCode,regionCode:t.regionCode,placeId:t.placeId,type:t.type})}var T=function(t,e){var n=[];return t.forEach((function(t){n.push({id:(0,o.fV)(),name:t.name,dealer:t.dealer.name,address:t.address[0].line1,city:t.address[0].city,state:t.address[0].state.toUpperCase(),zip:t.address[0].zip,country:t.address[0].country,distance:C(t.address[0],e),location:{lat:t.address[0].location.lat,lng:t.address[0].location.lng},phone:y(t.contact),phoneFormatted:o.uf.toPhone(y(t.contact)),isCertified:"true"===t.certified,directionsLink:b(t),type:t.type})})),n};function P(t,e){var n=null;return t.dealers&&t.dealers.length>0?(n=function(t,e){return t.map((function(t){return k(t,e)}))}(t.dealers,e),t.inventoryDealerIds&&(n=n.map((function(e){return e.hasInventory=-1!==t.inventoryDealerIds.indexOf(e.dealerId),e})))):t.cc&&t.cc.length>0&&(n=T(t.cc,e)),n}function _(t,e,n){var i={results:[]};if(t.lcp&&t.lcp.name&&(i.lcpHeader=t.lcp.name),200!==t.status.code){if("4"===t.status.code.toString().charAt(0))throw new Error("CLIENT_ERROR");if("5"===t.status.code.toString().charAt(0))throw new Error("SERVER_ERROR")}return t.results&&t.results.length>0&&(i.results=t.results.map((function(i){var o=k(i,n);return t.inventoryDealerIds&&(o.hasInventory=function(t,e,n){return"ca"!==e?-1!==n.indexOf(t.id):-1!==n.indexOf(t.id)&&t.activities&&t.activities.some((function(t){return t.name&&"sales"===t.name}))}(i,e,t.inventoryDealerIds)),o}))),i.totalCount=t.totalCount,t.prefDealer&&t.prefDealer.id&&(i.prefDealer=k(t.prefDealer,n)),i}function L(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=[(e=t,fetch(e).then((function(t){return t.json()})))];return p&&i.push(function(t){var e=t?"new":"cpo",n="".concat(h,"/").concat(e,"/dealers");return v[e]?Promise.resolve(v[e]):fetch(n).then((function(t){return t.json()})).then((function(t){return v[e]=t,v[e]}))}(n)),Promise.all(i).then((function(t){return s({},t[0],{inventoryDealerIds:t[1]&&t[1].result})}))}function E(t,e){return e===m.INVENTORY?t.filter((function(t){return t.hasInventory})):t}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.zip,n=t.lat,i=t.lng,a=t.radius,r=void 0===a?25:a,s=t.country,c=t.type,l=t.language,u=t.limit,f=t.isNew;return L("".concat(d,"/").concat(s,"/").concat(c).concat((0,o.HD)({zip:e,lat:n,lng:i,radius:r,limit:u})),f).then((function(t){return P(t,l)}))}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.zip,n=t.lat,i=t.lng,a=t.country,r=t.language,s=t.start,c=t.count,l=t.filter,u=void 0===l?"all":l,f=t.isNew,h=t.state,p=t.prefId;return L("".concat(d,"/").concat(a,"/search").concat((0,o.HD)({zip:e,lat:n,lng:i,start:s,count:c,filter:u,state:h,prefId:p})),f).then((function(t){return _(t,a,r)}))}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.radius,n=t.searchType,i=t.country,o=t.language,r=t.limit,s=t.searchByType,c=t.searchLocation,l={radius:e,type:n,country:i,language:o,limit:r,isNew:t.isNew,start:t.start,count:t.count,filter:t.filter,state:t.state,prefId:t.prefId};if("zip"===s)l.zip=c;else if("place"===s)return a.cJ.getPlaceCoordinates(c).then((function(t){var e=t.lat,n=t.lng;return l.lat=e,l.lng=n,l}));return Promise.resolve(l)}var M={TYPES:g,FILTER_TYPES:m,formatDealer:k,deepCloneDealer:function(t){return Object.assign({},t,{badges:Object.values(t.badges),contact:Object.values(t.contact).map((function(t){return Object.assign({},t)})),location:Object.assign({},t.location)})},getLocations:function(t,e){var n="".concat(d,"/").concat(t,"/states?lang=").concat(e);return fetch(n).then((function(t){return t.json()}))},getByState:function(t,e,n,i){return L("".concat(d,"/").concat(t,"/").concat(n,"?state=").concat(e)).then((function(t){return P(t,i)}))},getDealers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.radius,n=void 0===e?"all":e,i=t.searchType,o=void 0===i?g.dealers:i,a=t.country,r=void 0===a?"us":a,s=t.language,c=void 0===s?"en":s,l=t.limit,d=t.searchByType,u=t.searchLocation,f=t.filterBy,h=void 0===f?null:f,p=t.isNew;return S({radius:n,searchType:o,country:r,language:c,limit:l,searchByType:d,searchLocation:u,isNew:void 0===p||p}).then(I).then((function(t){return t&&h?E(t,h):t}))},getDealer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.country,i=t.language,a=t.type,r="".concat(d,"/").concat(n,"/").concat(a).concat((0,o.HD)({id:e}));return fetch(r).then((function(t){return t.json()})).then((function(t){return P(t,i)})).then((function(t){if(t&&t.length)return t[0];throw new Error("No dealers found with the id ".concat(e))}))},getDealerWithDistance:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.country,i=t.language,a=t.type,r=t.zip,s="".concat(d,"/").concat(n,"/").concat(a).concat((0,o.HD)({id:e,zip:r}));return fetch(s).then((function(t){return t.json()})).then((function(t){return P(t,i)})).then((function(t){if(t&&t.length)return t[0];throw new Error("No dealers found with the id ".concat(e))}))},getDealersAlt:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.country,n=void 0===e?"us":e,i=t.language,o=void 0===i?"en":i,a=t.searchByType,r=t.searchLocation,c=t.filterBy,l=void 0===c?null:c,d=t.isNew,u=void 0===d||d,f=t.start,h=t.count,p=t.filter,g=t.state,m=t.prefId;return S({country:n,language:o,searchByType:a,searchLocation:r,filterBy:l,isNew:u,start:f,count:h,filter:p,state:g,prefId:m}).then(D).then((function(t){return t.results&&l?s({results:E(t.results,l),totalCount:t.totalCount},t.prefDealer&&{prefDealer:t.prefDealer}):t}))},getDealersByLCP:function(t,e,n,i,a,r){var s=n;return L("".concat(d,"/").concat(t,"/search").concat((0,o.HD)({lcp:s,filter:i,start:a,count:r}))).then((function(n){return _(n,t,e)}))}}},80662:function(t,e,n){n.d(e,{b6:function(){return I},UZ:function(){return D},cJ:function(){return g}});var i,o=n(68434),a={loadGoogleMaps:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",a=window.mbNafta.ns("applicationProperties","googleApiKey"),r=window.mbNafta.ns("applicationProperties","googleMapChannel"),s=window.mbNafta.ns("pageData").language||n,c=null===(t=window.mbNafta.ns("pageData"))||void 0===t||null===(e=t.variantInfo)||void 0===e?void 0:e.isLargeFormat;return i||(i=new Promise((function(t){window.mapApiReady=function(){return t()};var e="https://maps.googleapis.com/maps/api/js?libraries=geometry,places&v=".concat(c?"3.53":"3","&key=").concat(a,"&channel=").concat(r,"&language=").concat(s,"&callback=mapApiReady");o.Z.loadScript(e)}))),i}},r=n(4942),s=n(8357),c=n(48218);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t){return new Promise((function(e,n){a.loadGoogleMaps().then((function(){(new window.google.maps.Geocoder).geocode(t,e,n)})).catch(n)}))}function f(t){return u({placeId:t})}function h(t){return new Promise((function(e,n){f(t).then((function(t){t?u({latLng:t[0].geometry.location}).then((function(t){var i=t.find((function(t){return t.address_components.some((function(t){var e,n;return(null===(e=t.types)||void 0===e?void 0:e.includes(c.gT.GOOGLE_API.POSTAL_CODE))&&!(null!==(n=t.types)&&void 0!==n&&n.includes(c.gT.GOOGLE_API.POSTAL_CODE_PREFIX))}))}));t&&i?e(i):n(null)})).catch(n):n(null)})).catch(n)}))}function p(t){return new Promise((function(e,n){f(t).then((function(t){t?e(t[0]):n(null)})).catch(n)}))}var g={getGeoInfo:u,getCityNames:function(t,e){return new Promise((function(n,i){t&&e?a.loadGoogleMaps().then((function(){(new google.maps.places.AutocompleteService).getPlacePredictions({input:t,types:["geocode"],componentRestrictions:{country:e}},n,i)})):i("Search value or Country not provided")}))},getPlaceCoordinate:f,getPlaceCoordinates:function(t){return u({placeId:t}).then((function(t){return t[0]})).then((function(t){return{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}}))},getClosestPlaceFullInfo:h,getPlaceInfo:p,getCityStateForPlace:function(t){return p(t).then((function(t){return{city:t.address_components[0].long_name,region:t.address_components.find((function(t){return-1!==t.types.indexOf("administrative_area_level_1")})).short_name}}))},getPlacePostalCode:function(t){return h(t).then((function(t){var e=t.address_components.filter((function(t){return-1!==t.types.indexOf("postal_code")}));return e&&e[0]?e[0].long_name:null}))},getAddressCoordinates:function(t,e){return new Promise((function(n,i){u({address:t,componentRestrictions:{country:e}}).then((function(t){if(t&&t.length){var e=t[0].geometry.location,i={lat:e.lat(),lng:e.lng()};n(i)}})).catch(i)}))},getAddressLocation:function(t){var e=t.address,n=t.country;return new Promise((function(t,i){u({address:e,componentRestrictions:{country:n}}).then((function(t){return t&&t.length?h(t[0].place_id):null})).then((function(e){if(e){var n=e.address_components.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n={};return e.types.length>1&&(n=e.types.reduce((function(){var t=arguments.length>1?arguments[1]:void 0;return d({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},(0,r.Z)({},t,e.short_name))}),{})),d({},t,(0,r.Z)({},e.types[0],e.short_name),n)}),e.address_components[0]);t({city:n.locality||n.sublocality||"",state:n.administrative_area_level_1||"",zip:n.postal_code||""})}else i()})).catch(i)}))},getPlaceRatings:function(t){var e=t.placeId,n=t.apiContainer,i=t.fields,o=void 0===i?["rating","url"]:i,r=t.callback,c=void 0===r?s.ZT:r;e&&n&&a.loadGoogleMaps().then((function(){new google.maps.places.PlacesService(n).getDetails({placeId:e,fields:o},c)}))}},m=n(71002),v=n(15671),y=n(43144),w=function(t,e,n){var i=Math.pow(2,e.getZoom()),o=e.getBounds(),a=e.getProjection(),r=new n.LatLng(o.getNorthEast().lat(),o.getSouthWest().lng()),s=a.fromLatLngToPoint(r),c=a.fromLatLngToPoint(t);return new n.Point(Math.floor((c.x-s.x)*i),Math.floor((c.y-s.y)*i))},O=window.mbNafta.ns("pageData").country||"us",b=window.mbNafta.ns("pageData").language||"en",C={center:{us:{lat:37.774929,lng:-95.712891},ca:{lat:60.015785,lng:-101.990666},mx:{lat:23.6345,lng:-102.5528}}[O],zoom:4,panControl:!1,streetViewControl:!0,scaleControl:!1,mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:1},trafficLayerControl:!0,language:b,enableHoverInteractions:!0,enabledLarge:!0},k=n(30168),T=n(37898);function P(){var t=(0,k.Z)(['\n    <div class="google-map__detailed-info-window" data-analytics-container="dl-map-info">\n        ',"\n        ","\n        ","\n        ","\n        ","\n    </div>\n"]);return P=function(){return t},t}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E="Show Traffic",I=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.element,i=e.config,o=void 0===i?{}:i,r=e.content,c=void 0===r?{}:r,l=e.variantOptions,d=void 0===l?{}:l,u=e.infoWindowOptions,f=void 0===u?{}:u,h=e.customControls,p=void 0===h?[]:h,g=e.onMapCreatedCallback,m=e.markerClickCallback,y=e.customMarkerBoundsCallback,w=e.onLoadCallback;(0,v.Z)(this,t),this.element=n,this.maps=null,this.map=null,this.trafficLayer=null,this.trafficStatus=!1,this.trafficControlText=null,this.config=L({},C,{},o),this.markers=[],this.isPreferred=!1,this.isDestroyed=!1,this.bounds=null,this.infoWindow=null,this.infoWindowOptions=f,this.customControls=p,this.detailedInfoWindow=null,this.detailedInfoWindowListener=null,this.content=c,this.isTilesLoaded=!1,this.onMapCreatedCallback=g,this.markerClickCallback=m,this.customMarkerBoundsCallback=y,this.variantOptions=d,this.onLoadCallback=w,this.currentScreenState=s.sp.getState(),this.onScreenResize=this.onScreenResize.bind(this),this.enableKeyboardPan=this.enableKeyboardPan.bind(this),a.loadGoogleMaps(this.config.language).then(this.createMap.bind(this)).then(this.attachEvents.bind(this))}return(0,y.Z)(t,[{key:"attachEvents",value:function(){s.sp.addResizeListener(this.onScreenResize,150),window.addEventListener(c.FP.FOCUS,this.enableKeyboardPan,!0)}},{key:"enableKeyboardPan",value:function(){document.activeElement.parentNode.classList.contains("".concat("gm-style"))?this.map.set("keyboardShortcuts",!0):this.map.set("keyboardShortcuts",!1)}},{key:"detachEvents",value:function(){s.sp.removeResizeListener(this.onScreenResize),window.removeEventListener(c.FP.FOCUS,this.enableKeyboardPan,!0)}},{key:"destroyMarkers",value:function(){this.markers.forEach((function(t){t&&t.setMap(null)})),this.markers=[],this.maps&&(this.bounds=new this.maps.LatLngBounds)}},{key:"destroyMarker",value:function(t){var e=this.markers.find((function(e){return e.info.id===t}));if(e){var n=this.markers.indexOf(e);-1!==n&&(this.markers[n].setMap(null),this.markers.splice(n,1))}}},{key:"markerMouseOverHandler",value:function(t){t.info.isDetailedInfoWindowOpen||(this.infoWindow.setContent("".concat(t.info.name)),s.Gu.isEmpty(this.infoWindowOptions)||this.infoWindow.setOptions(this.infoWindowOptions),this.infoWindow.open(this.map,t))}},{key:"markerMouseOverHandlerById",value:function(t){var e=this.markers.find((function(e){return e.info.id===t}));e&&this.markerMouseOverHandler(e)}},{key:"markerMouseOutHandler",value:function(){this.infoWindow.setContent(""),this.infoWindow.close()}},{key:"markerClickHandler",value:function(t){var e,n,i;this.markerClickCallback&&"function"==typeof this.markerClickCallback?this.markerClickCallback(t.info):(this.detailedInfoWindow.close(),this.infoWindow.close(),this.detailedInfoWindow.setContent((e=t.info,n=this.content,i=this.variantOptions,(0,s.e2)(P(),e.name?'<h3 class="google-map__detailed-info-window-title">'.concat(e.name,"</h3>"):"",e.city||e.state||e.zip||e.address||e.phone?'<div class="google-map__detailed-info-window-address">\n            '.concat(e.address?'<span class="google-map__detailed-info-window-address-1">'.concat(e.address,"</span>"):"","\n            ").concat(e.city||e.state||e.zip?'<span class="google-map__detailed-info-window-address-2">'.concat(e.city?"".concat(e.city):"").concat(e.state?", ".concat(e.state):"").concat(e.zip?", ".concat(e.zip):"","</span>"):"","\n            ").concat(e.phone?"".concat(i.isOnDisplay||i.isDealer||i.isWheelstand?'<span class="google-map__detailed-info-window-phone-number">'.concat(e.phoneFormatted,"<span></span>"):'<a href="tel:'.concat(e.phone,'" class="google-map__detailed-info-window-phone-number" data-analytics-trigger="call-dealer">').concat(e.phoneFormatted,"</a>")):"","\n        </div>"):"",e.distance?'<span class="google-map__detailed-info-window-distance">'.concat(n.distance,": ").concat(e.distance,"</span>"):"",e.locDesc?'<br/><span class="google-map__detailed-info-window-description">'.concat(e.locDesc,"</span>"):"",i.isOnDisplay||i.isDealer||i.isWheelstand?"":"".concat(n&&e.directionsLink&&n.getDirections?'<a class="link link_bold google-map__detailed-info-window-directions-cta" href="'.concat(e.directionsLink,'" ').concat((0,T.isExternalLink)(e.directionsLink)?' target="_blank"':"",' rel="noopener" data-analytics-trigger="cta">').concat(n.getDirections,"</a>"):"","\n        ").concat(e.getDirections&&e.directionsLink?'<a class="link link_bold google-map__detailed-info-window-directions-cta" href="'.concat(e.directionsLink,'" ').concat((0,T.isExternalLink)(e.directionsLink)?' target="_blank"':"",' rel="noopener" data-analytics-trigger="cta">').concat(e.getDirections,"</a>"):"")))({getNode:!0})),s.Gu.isEmpty(this.infoWindowOptions)||this.detailedInfoWindow.setOptions(this.infoWindowOptions),this.detailedInfoWindow.open(this.map,t),t.info.isDetailedInfoWindowOpen=!0,this.detailedInfoWindow.associatedKey=t.info.id,this.centerMap(t.getPosition()))}},{key:"detailedInfoWindowCloseHandler",value:function(){var t=this;this.markers.find((function(e){return e.info.id===t.detailedInfoWindow.associatedKey})).info.isDetailedInfoWindowOpen=!1,this.detailedInfoWindow.associatedKey=null}},{key:"forceInfoWindowClose",value:function(){this.detailedInfoWindow.close(),this.infoWindow.close(),this.markers.forEach((function(t){t&&t.info.isDetailedInfoWindowOpen&&(t.info.isDetailedInfoWindowOpen=!1)})),this.detailedInfoWindow.associatedKey=null}},{key:"triggerResize",value:function(){this.maps.event.trigger(this.map,c.FP.RESIZE)}},{key:"addMarkers",value:function(t,e){var n=this;t&&t.length?(t.forEach((function(t){var e=new n.maps.Marker({position:{lat:parseFloat(t.location.lat),lng:parseFloat(t.location.lng)},map:n.map,title:"".concat(t.name),animation:n.maps.Animation.DROP,icon:"object"===(0,m.Z)(t.icon)?L({},t.icon,{scaledSize:new n.maps.Size(30,36)}):t.icon,info:t,label:t.label?{color:"#FFF",text:t.label.toString(),fontSize:"12px",fontWeight:"bold"}:""});n.config.enableHoverInteractions&&(e.addListener(c.FP.MOUSEOVER,n.markerMouseOverHandler.bind(n,e)),e.addListener(c.FP.MOUSEOUT,n.markerMouseOutHandler.bind(n,e))),t.address&&e.addListener(c.FP.CLICK,n.markerClickHandler.bind(n,e)),n.bounds.extend(e.getPosition()),n.markers.push(e)})),this.isPreferred=e,this.fitBounds()):this.centerMap(this.config.center,!0)}},{key:"createCustomControls",value:function(){var t=this;this.customControls.forEach((function(e){var n=document.createElement("button");n.classList.add("google-map__button"),n.appendChild(e.label),n.addEventListener(c.FP.CLICK,e.onClick),t.map.controls[t.maps.ControlPosition[e.position]].push(n)}))}},{key:"centerMap",value:function(t,e){t=t||this.config.center,this.map.setCenter(t),e&&this.map.setZoom(this.config.zoom)}},{key:"fitBounds",value:function(){var t=this;if(this.map.fitBounds(this.bounds),1===this.markers.length&&(this.isPreferred?(this.maps.event.addListenerOnce(this.map,"bounds_changed",(function(){return t.map.setZoom(12)})),this.maps.event.addListenerOnce(this.map,"idle",(function(){return t.map.setZoom(12)}))):this.map.setZoom(15)),this.detailedInfoWindow.associatedKey){var e=this.markers.find((function(e){return e.info.id===t.detailedInfoWindow.associatedKey}));this.centerMap(e.getPosition())}this.config.leftOffset&&!this.currentScreenState.small&&this.config.enabledLarge&&(this.isTilesLoaded?this.offsetMap():this.maps.event.addListenerOnce(this.map,"tilesloaded",(function(){t.isTilesLoaded=!0,t.offsetMap()})))}},{key:"offsetMap",value:function(){var t=this.map.getBounds();if(!this.bounds.isEmpty()){var e=w(t.getNorthEast(),this.map,this.maps).x,n=w(this.bounds.getSouthWest(),this.map,this.maps).x,i=w(this.bounds.getNorthEast(),this.map,this.maps).x,o=this.config.leftOffset-n,a=e-i-30;if(o>=0)if(o<a){var r=Math.round((a-o)/2);this.map.panBy(-r,0),w(this.bounds.getSouthWest(),this.map,this.maps).x<=this.config.leftOffset&&this.offsetMap(this.map,this.bounds)}else this.map.setZoom(this.map.getZoom()-1),this.offsetMap(this.map,this.bounds)}}},{key:"createMap",value:function(){var t=this;this.isDestroyed||(this.maps=window.google.maps,this.map=new this.maps.Map(this.element,this.config),this.bounds=new this.maps.LatLngBounds,this.infoWindow=new this.maps.InfoWindow,this.detailedInfoWindow=new this.maps.InfoWindow,this.detailedInfoWindowListener=this.detailedInfoWindow.addListener(c.fD.CLOSE_CLICK,this.detailedInfoWindowCloseHandler.bind(this)),this.maps.event.addListenerOnce(this.map,"tilesloaded",(function(){t.isTilesLoaded=!0,t.onLoadCallback&&t.onLoadCallback()})),this.config.trafficLayerControl&&this.createTrafficToggle(),this.onMapCreatedCallback&&"function"==typeof this.onMapCreatedCallback&&this.onMapCreatedCallback(),this.customControls.length>0&&this.createCustomControls())}},{key:"destroyMap",value:function(){this.detachEvents(),this.map&&(this.map=null,this.detailedInfoWindowListener.remove()),this.isDestroyed=!0}},{key:"createTrafficToggle",value:function(){var t=document.createElement("div");t.className="google-map__traffic-toggle",this.trafficControlText=document.createElement("div"),this.trafficControlText.className="google-map__traffic-text",this.trafficControlText.innerHTML="Traffic",this.trafficControlText.title=E,t.appendChild(this.trafficControlText),this.trafficLayer=new this.maps.TrafficLayer,this.map.controls[this.maps.ControlPosition.TOP_RIGHT].push(t),this.maps.event.addDomListener(t,c.FP.CLICK,this.toggleTrafficLayer.bind(this))}},{key:"toggleTrafficLayer",value:function(){this.trafficStatus?(this.trafficStatus=!1,this.trafficLayer.setMap(null),this.trafficControlText.title=E):(this.trafficStatus=!0,this.trafficLayer.setMap(this.map),this.trafficControlText.title="Hide Traffic")}},{key:"openInfoWindow",value:function(t){var e=this.markers.find((function(e){return e.info.id===t}));e&&this.maps.event.trigger(e,c.FP.CLICK)}},{key:"onScreenResize",value:function(t){return t.fullscreen?(this.currentScreenState=t,this.fitBounds(),!0):s.Gu.objectsAreEqual(t,this.currentScreenState)?(this.currentScreenState=t,!1):(this.currentScreenState=t,this.fitBounds(),!0)}}]),t}();(0,r.Z)(I,"CUSTOM_CONTROL_POSITIONS",{TOP_CENTER:"TOP_CENTER",TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",LEFT_TOP:"LEFT_TOP",LEFT_CENTER:"LEFT_CENTER",LEFT_BOTTOM:"LEFT_BOTTOM",RIGHT_TOP:"RIGHT_TOP",RIGHT_CENTER:"RIGHT_CENTER",RIGHT_BOTTOM:"RIGHT_BOTTOM",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_CENTER:"BOTTOM_CENTER",BOTTOM_RIGHT:"BOTTOM_RIGHT"});var D={collisionCenters:"/etc/designs/mb-nafta/images/icon-mb-collision-center_black.png",dealers:"/etc/designs/mb-nafta/images/icon-mb-dealer-location_black.png",preferredDealer:"/etc/designs/mb-nafta/images/icon-mb-dealer-location_denim.png"}}}]);
//# sourceMappingURL=6ab7bd2179c3beee0e2a.bundle.js.map