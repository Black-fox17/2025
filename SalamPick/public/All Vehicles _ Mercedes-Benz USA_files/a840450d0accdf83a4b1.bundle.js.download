"use strict";(self.webpackChunk_mbusa_now_aem=self.webpackChunk_mbusa_now_aem||[]).push([[2473],{50115:function(e,t,n){var i=n(67294),r=n(45697),o=n.n(r),a=n(27856),l=n.n(a),s=n(81252),c=n(12641),d=c.Z.COUNTRIES,u=c.Z.RESERVATION_STATUSES,h=function(e){var t=e.contactDealerForPrice,n=void 0!==t&&t,r=e.status,o=e.content,a=e.isProfile,c=void 0!==a&&a,h=e.isImInterestedLeadForm,m=void 0!==h&&h,f=e.disclaimer,v=void 0===f?null:f,p=r&&r!==u.NOT_RESERVABLE&&o[r]?r===u.RESERVED?c?o[r].profile:o[r].inventory:o[r]:{},b=p.label,y=p.tooltipMessage;return window.mbNafta.pageData.country!==d.US||!o||!r||m&&r!==u.RESERVED||n?null:i.createElement("div",{className:"reservation-badge-container"},i.createElement("label",{className:"reservation-badge reservation-badge--".concat(r.toLowerCase()).concat(c?" profile-badge":"")},b),y&&!m?i.createElement(s.I,{label:b,position:s.I.POSITION.CENTER},i.createElement(i.Fragment,null,i.createElement("span",{dangerouslySetInnerHTML:{__html:l().sanitize(y)}}),v)):null)};h.propTypes={contactDealerForPrice:o().bool,status:o().string.isRequired,content:o().object.isRequired,isProfile:o().bool,isImInterestedLeadForm:o().bool,disclaimer:o().object},t.Z=(0,i.memo)(h)},2473:function(e,t,n){n.d(t,{mv:function(){return Ge},wK:function(){return tt}});var i=n(4942),r=n(8357),o=n(2279),a={requestQuote:{default:"REQUEST_QUOTE",byo:"BYO_REQUEST_QUOTE",cpo:"CPO_INVT_GET_E_PRICE",cpoNonDse:"CPO_INVT_GET_E_PRICE",po:"PO_INVT_GET_E_PRICE",poNonDse:"PO_INVT_GET_E_PRICE",inventory:"NEW_INVT_GET_E_PRICE",inventoryNonDse:"NEW_INVT_NON_DSE_GET_E_PRICE",model:"MODEL_REQUEST_QUOTE",pe:"PE_REQUEST_QUOTE",campaignForm:"DD_CAMPAIGN_FORM",holidayCampaignCarousel:"HOLIDAY_CAMPAIGN_CAROUSAL"},contact:{byo:"CONTACT_DEALER",byosoon:"BYO_CONTACT_DEALER_IM_INTERESTED",cpo:"CPO_CONTACT_DEALER",cpoNonDse:"CPO_CONTACT_DEALER",default:"CONTACT_DEALER",eudelivery:"EUROPEAN_DELIVERY_CONTACT_DEALER",fleetb2b:"FLEET_PROGRAM_CONTACT_DEALER",inventory:"NEW_INVT_CONTACT_DEALER",inventoryNonDse:"NEW_INVT_CONTACT_DEALER",newReserve:"NEW_RESERVE_CONTACT_DEALER",pe:"PE_REQUEST_QUOTE",poReserve:"PO_RESERVE_CONTACT_DEALER",profile:"PROFILE_NEW_CONTACT_DEALER",profileCpo:"PROFILE_CPO_CONTACT_DEALER",profileCreditApp:"PROFILE_CREDIT_CONTACT_DEALER",profilepricesoon:"PROFILE_PRICE_SOON_IM_INTERESTED",reserve:"CPO_RESERVE_CONTACT_DEALER",campaignHero:"DD_CAMPAIGN_HERO",tradeIn:"TRADE_IN_CALCULATOR_CONTACT_DEALER",holidayCampaignHero:"HOLIDAY_CAMPAIGN_HERO"},scheduleTestDrive:{byo:"BYO_SCH_TEST_DRIVE",cpo:"CPO_INVT_SCH_TEST_DRIVE",cpoNonDse:"CPO_INVT_SCH_TEST_DRIVE",cpoHome:"CPO_INVT_HOME_SCH_TEST_DRIVE",default:"SCH_TEST_DRIVE",inventory:"NEW_INVT_SCH_TEST_DRIVE",model:"MODEL_SCH_TEST_DRIVE",newReserve:"NEW_RESERVE_SCH_TEST_DRIVE",poReserve:"PO_RESERVE_SCH_TEST_DRIVE",po:"PO_INVT_SCH_TEST_DRIVE",reserve:"CPO_RESERVE_SCH_TEST_DRIVE"},ePrice:{cpo:"CPO_INVT_GET_E_PRICE",po:"PO_INVT_GET_E_PRICE",profile:"PROFILE_NEW_INVT_GET_E_PRICE",profileCpo:"PROFILE_CPO_INVT_GET_E_PRICE",inventory:"NEW_INVT_GET_E_PRICE"},imInterested:{inventory:"NEW_INVT_IM_INTERESTED",cpo:"CPO_INVT_IM_INTERESTED",cpoNonDse:"CPO_INVT_NON_DSE_IM_INTERESTED",default:"NEW_INVT_IM_INTERESTED",po:"PO_INVT_IM_INTERESTED",poNonDse:"PO_INVT_NON_DSE_IM_INTERESTED",profilepricesoon:"PROFILE_PRICE_SOON_IM_INTERESTED"},specialOffer:{cpo:"CPO_CONTACT_DEALER",default:"SO_CONTACT_DEALER",so:"SO_CONTACT_DEALER",holidayCampaignSplOffers:"HOLIDAY_CAMPAIGN_SPECIAL_OFFERS"}};function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={interest:"lease",make:"Mercedes-Benz",model:"Full Line",status:"new",year:"0",price:{currency:"USD",priceAmount:"0"}};function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=e.address,i=e.email,r=e.isEmailPreferredContactMethod,o=e.firstName,a=e.lastName,l=e.phoneNumber,s=e.emailSubscribed;return{address:n,email:{emailAddress:i.trim(),isPreferredContactMethod:r,communicationOptIn:s},firstName:o.trim(),languagePreference:t,lastName:a.trim(),phone:[{phoneNumber:l,preferredContactMethod:!r,type:"phone"}]}}function u(){return[{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.pR.getCookie("MBUSA_WEB_ID"),source:"webId"}]}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=a[t],r=e[(null==i?void 0:i[n])||(null==i?void 0:i.default)];return r||(console.warn("LFS undefined provider (formType, sourceType, providers)",t,n,e),r=e.CONTACT_DEALER),r}function m(e,t){return!1===(null==t?void 0:t.available)?"Availability Note: ".concat(e):""}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2?arguments[2]:void 0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(n){return e.indexOf(n.id)>-1?t[n.contentLabelKey]:null})).filter(Boolean)}function v(e,t,n){var i=f(e,t,n);return i.length?"Interested In: ".concat(i.join(", ")):""}function p(e){return"Preferred Contact Method: ".concat(e?"Email":"Phone")}function b(e){return e?["This prospect built the following car on the passenger car shopping Website:",e.vehicleName,"Trim: ".concat(e.trim),"Wheels: ".concat(e.wheels),"Options: ".concat(e.options),"Packages: ".concat(e.packages)].join("\n"):null}function y(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(Boolean);return e.length?"Preferred Contact Phone Method: ".concat(e.join(" or ")):""}function g(e){return null!=e&&e.stockId?"Dealer Stock Number: ".concat(e.stockId).trim():""}function E(e){var t,n,i,r,o,a,l,s=(null==e||null===(t=e.exteriorBaseImage)||void 0===t?void 0:t.imgL)||(null==e?void 0:e.exteriorBaseImage)||(null==e||null===(n=e.images)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.imgL)||(null==e||null===(r=e.image)||void 0===r||null===(o=r.desktop)||void 0===o?void 0:o.url)||(null==e||null===(a=e.exteriorBaseImage)||void 0===a||null===(l=a.desktop)||void 0===l?void 0:l.url);return s?"Vehicle Exterior Image: ".concat(s):""}function _(e){var t=e.customerContact,n=e.content,i=e.interests,r=e.vehicle,a=e.ctas,l=e.unsavedBuild,s=t.isEmailPreferredContactMethod,c=t.preferedContactPhoneMethods;return[m(n.availabilityNote,r),v(i,a,n),p(s),y(c),b(l),g(r),E(r),(0,o.Nd)(r),(0,o.XZ)(r),(0,o.iX)(r)].filter(Boolean).join("\n")}function O(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"USD",a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0;if(e){var d,u=e.exteriorcolor,h=e.hasMSRP,m=e.interiorcolor,f=e.modelId,v=void 0===f?"Full Line":f,p=e.modelName,b=e.modelLineName,y=e.msrp,g=e.price,E=e.type,O=e.vin,C=e.year,T=_({customerContact:i,vehicle:e,interests:n,content:t,ctas:a,unsavedBuild:l}),P=e.isCPO||"CPO"===E,S="PRE"===E&&!P,I=("PRE"===E||P)&&!S,N="PRE"!==E||!P&&!S,D=null===(d=h?null==y?void 0:y.price:g)||void 0===d?void 0:d.toString(),k="new";S?k="used":I&&(k="CPO");var L={class:e.class,comments:T,interest:N?"lease":"buy",make:"Mercedes-Benz",model:v,modelId:v,modelName:p,trim:b,status:k,year:C};return u&&m&&(L.colorcombination={exteriorcolor:u,interiorcolor:m}),(D||null!=y&&y.priceCurrency)&&(L.price={currency:o,priceAmount:D||(null==y?void 0:y.priceCurrency)}),O&&(L.vin=O),[L]}return c.class=(null==r?void 0:r.class)||c.class,c.model=(null==r?void 0:r.model)||c.model,c.year=(null==r?void 0:r.year)||c.year,[s({comments:_({customerContact:i,interests:n,content:t})},c)]}var C={createRequestObject:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.comments,i=t.config,r=i.currency,o=i.formConfig,a=i.formType,l=i.language,s=i.props,c=i.providers,m=i.sourceType,f=i.webId,v=t.content,p=t.context,b=t.customerContact,y=t.dealer,g=t.interests,E=t.unsavedBuild,_=t.vehicle,C=o.ctas;return{context:p,prospect:{customer:{comments:n.trim(),contact:d(b,l)},dealer:(e=y,{dealerCode:e.dealerId,dealerName:e.chosenDealerName}),id:u(f),provider:h(c,a,m),requestdate:(new Date).toJSON(),vehicle:O(_,v,g,b,s,r,C,E)}}},getSelectedInterestsLabels:f},T=n(52597),P=n(13629),S=function(e,t,n){var i=new T.$S;return P.N6.getToken(t).then((function(t){var r={"Content-Type":"application/json","Referrer-Policy":"origin",Referer:window.location.href,"X-RECAPTCHA-TOKEN":t};i.isLoggedIn()&&(r.Authorization="Bearer ".concat(i.getLoginToken()));var o={body:JSON.stringify(n),headers:r,method:"POST"};return fetch(e,o)})).then((function(e){return e.json()})).then((function(e){if(!function(e){return/^2\d\d$/.test(e.status.code)}(e))throw Error("Lead Submission Not Successful");return e}))},I=n(15671),N=n(43144),D=n(85879),k=n(24429),L=n(75297),R=n(97844),w=n(48218),A=n(30168),j=n(12641);function F(){var e=(0,A.Z)(["\n    <div class=\"dealer-form\" data-analytics-container=\"{'blade': '",'\'}">\n        <form id="dealer-form__form">\n            ','\n            <section id="dealer-form__header">\n            </section>\n            <section id="dealer-form__vehicle">\n            </section>\n            <section id="dealer-form__dealer">\n            </section>\n            <section id="dealer-form__customer">\n            </section>\n            <section id="dealer-form__comments"></section>\n            <section id="dealer-form__subscribe">\n            </section>\n            <section id="dealer-form__privacy">\n            </section>\n            <section id="dealer-form__section-submit">\n                <button id="dealer-form__submit" data-analytics-trigger="cta-','-submit" class="button button_primary">',"</button>\n            </section>\n        </form>\n    </div>"]);return F=function(){return e},e}var V=n(47755),M="new_inv",x="cpo_inv",H="quote",Z="test_drive";function B(){var e=(0,A.Z)(['\n    <div class="dealer-form__header">\n        <h1 class="dealer-form__header--title">',"</h1>\n        ",'\n        <div class="dealer-form__header--ctas"></div>\n    </div>\n']);return B=function(){return e},e}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={leadsFormHeading:"How can we help you?",leadsFormSubhead:"Tell us what you’re interested in. Select all that apply.",leadsFormHeadingOffers:"Want to learn more?",leadsFormSubheadOffers:"Contact your dealer about this special offer by entering your information below.",leadsFormSubheadCampaign:"Contact your dealer about Mercedes-Benz Dream Days by entering your details below."},Y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,I.Z)(this,e),this.content=q({},K,{},t),this.config=q({},n),this.selectedCTAs=[],this.createHeader(),this.cacheDOM(),this.config.hideCTAs||this.renderHeaderCTAs()}return(0,N.Z)(e,[{key:"createHeader",value:function(){var e,t,n,i,o,a,l;this.element=(o=void 0===(i=(n={dealerFormHeaderTitle:null===(e=this.content)||void 0===e?void 0:e.leadsFormHeading,dealerFormHeaderDescription:null===(t=this.content)||void 0===t?void 0:t.leadsFormSubhead}).dealerFormHeaderTitle)?"":i,l=void 0===(a=n.dealerFormHeaderDescription)?"":a,(0,r.e2)(B(),o,l?'<p class="dealer-form__header--description">'.concat(l,"</p>"):""))({getNode:!0})}},{key:"cacheDOM",value:function(){this.headerCTAsElement=this.element.querySelector(".".concat("dealer-form__header--ctas"))}},{key:"setHeaderCTAs",value:function(e,t){t?this.selectedCTAs.push(e):this.selectedCTAs.indexOf(e)>-1&&this.selectedCTAs.splice(this.selectedCTAs.indexOf(e),1)}},{key:"getHeaderCTAs",value:function(){return this.selectedCTAs}},{key:"renderHeaderCTAs",value:function(){var e,t,n=this,i=this.config.vehicle||{},r=i.isNew,o=i.isCPO;null===(e=this.config.formConfig)||void 0===e||null===(t=e.ctas)||void 0===t||t.forEach((function(e){var t,i=n.content[e.contentLabelKey],a=e.selected;(r&&M===e.id||o&&x===e.id)&&(a=!0);var l=new V.PE({labelText:i,checked:a,analyticsTrigger:e.analyticsTrigger,onChangeCallback:n.setHeaderCTAs.bind(n,e.id)});n.setHeaderCTAs(e.id,a),null===(t=n.headerCTAsElement)||void 0===t||t.appendChild(l.render())}),this)}},{key:"render",value:function(){return this.element}}]),e}(),W=n(26015),G=n(616),Q=n(22209);function J(){var e=(0,A.Z)(['<div class="build-preview__section">\n            <h3 class="build-preview__title">','</h3>\n            <dl class="build-preview__table row">\n            ',"\n            </dl>\n        </div>\n    "]);return J=function(){return e},e}function z(){var e=(0,A.Z)(['\n            <dd class="column column--right">\n                <p class="build-preview__group-title">','</p>\n                <p class="build-preview__option-name"> ',"</p>\n            </dd>\n        "]);return z=function(){return e},e}function X(){var e=(0,A.Z)(['<dt class="column column--left"> '," </dt>"]);return X=function(){return e},e}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(){function e(t,n){(0,I.Z)(this,e),this.content=ee({},t),this.config=ee({},n),this.createBuildOptions()}return(0,N.Z)(e,[{key:"createBuildOptions",value:function(){var e,t,n,i,o,a,l,s,c,d,u,h,m,f,v=this.config.vehicle,p=JSON.parse(window.localStorage.getItem("lastBuild_".concat(v.model))||"{}").data,b=void 0===p?v:p,y=[];[null==b||null===(e=b.options)||void 0===e||null===(t=e.exterior)||void 0===t||null===(n=t.PAINT)||void 0===n?void 0:n[0],null==b||null===(i=b.options)||void 0===i||null===(o=i.exterior)||void 0===o||null===(a=o.WHEELS)||void 0===a?void 0:a[0],null==b||null===(l=b.options)||void 0===l||null===(s=l.interior)||void 0===s||null===(c=s.TRIM)||void 0===c?void 0:c[0],null==b||null===(d=b.options)||void 0===d||null===(u=d.interior)||void 0===u||null===(h=u.UPHOLSTERY)||void 0===h?void 0:h[0]].filter(Boolean).forEach((function(e){var t,n=(t=new Q.LazyPicture({className:"build-preview__image",forceLoad:!0,media:e.media[0],role:"presentation"}).render().outerHTML,(0,r.e2)(X(),t))({getNode:!0});y.push(n.outerHTML);var i,o=(i=e,(0,r.e2)(z(),i.groupTitle,i.name))({getNode:!0});y.push(o.outerHTML)})),y.length&&(this.element=(m=this.content.leadFormBuildPreviewTitle,f=y.join(""),(0,r.e2)(J(),m,f))({getNode:!0}))}},{key:"render",value:function(){return this.element}}]),e}();function ne(){var e=(0,A.Z)(['\n    <div class="dealer-form__vehicle">\n        <h2 class="dealer-form__section--header">',"</h2>\n    </div>\n"]);return ne=function(){return e},e}var ie="twoButton",re={CONTACT:"contact",REQUEST_QUOTE:"requestQuote",SPECIAL_OFFER:"specialOffer",TEST_DRIVE:"scheduleTestDrive"};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,I.Z)(this,e),this.content=ae({},t),this.config=ae({},n),this.config.templateType||this.config.formType!==re.SPECIAL_OFFER||(this.config.templateType=W.T.TEMPLATE_TYPES.NEW_OFFER),this.createVehicle(),this.renderVehicle()}return(0,N.Z)(e,[{key:"createVehicle",value:function(){var e,t;this.element=(t=void 0===(e={dealerFormVehicleTitle:this.content.vehicleTitle}.dealerFormVehicleTitle)?"":e,(0,r.e2)(ne(),t))({getNode:!0})}},{key:"renderVehicle",value:function(){var e,t;this.chosenVehicle=this.config.vehicle,null!==(e=this.chosenVehicle)&&void 0!==e&&e.modelId||null!==(t=this.chosenVehicle)&&void 0!==t&&t.offerName?this.renderVehicleOffer({hidePrice:!!this.config.hidePrice}):this.config.confirmationView||this.renderVehicleSelector()}},{key:"renderVehicleOffer",value:function(){var e=new W.h(this.content,this.config);this.element.appendChild(e.render()),this.config.confirmationView&&"build"===this.config.templateType&&this.renderBuildPreview()}},{key:"renderVehicleSelector",value:function(){var e,t,n,i={changeVehicleCtaLabel:this.content.changeVehicle,hideComingSoonModels:!0,selectVehicleOnSubmit:!0,submitCtaLabel:this.content.submitCtaLabel,onClickSubmitCallback:this.onClickSubmitCallback.bind(this),onResetCallback:this.onResetCallback.bind(this),onSelectCallback:this.onSelectVehicle.bind(this),enableYears:!1,selectorsRequired:this.selectorsRequired},r=(null===(e=this.chosenVehicle)||void 0===e?void 0:e.classId)||(null===(t=this.chosenVehicle)||void 0===t?void 0:t.class);this.chosenVehicle&&r&&(i.chosenVehicle={class:r.toUpperCase()||"",modelId:(null===(n=this.chosenVehicle.modelId)||void 0===n?void 0:n.toUpperCase())||"",year:this.chosenVehicle.year}),this.vehicleSelector=new G.u(i),this.element.appendChild(this.vehicleSelector.render())}},{key:"renderBuildPreview",value:function(){var e=new te(this.content,this.config).render();e&&this.element.appendChild(e)}},{key:"onClickSubmitCallback",value:function(){if(!this.selectorsRequired){var e,t,n=this.vehicleSelector,i=n.classSelect,r=n.modelSelect,o=null==i?void 0:i.getValue(),a=null==r?void 0:r.getValue();o?i.setErrorStatus(!1):i.setErrorStatus(!0,null===(e=i.config)||void 0===e?void 0:e.errorMessage),a?r.setErrorStatus(!1):r.setErrorStatus(!0,null===(t=r.config)||void 0===t?void 0:t.errorMessage)}}},{key:"onResetCallback",value:function(){this.element.removeChild(this.element.querySelector(".vehicle-selector")),this.element.removeChild(this.element.querySelector(".vehicle-offer")),delete this.config.vehicle,this.renderVehicle()}},{key:"onSelectVehicle",value:function(e){this.config.vehicle=this.parseChosenVehicle(e),this.content.useDefaultDisclaimer=!0,this.renderVehicle()}},{key:"parseChosenVehicle",value:function(e){var t=this.config,n=t.country,i=t.language,o=t.currency,a=t.vehicle,l=(a=void 0===a?{}:a).type,s=void 0===l?"NEW":l,c=e.model,d=(c=void 0===c?{}:c).code,u=c.modelTileImage,h=c.vehicleBodystyle,m=(h=void 0===h?{}:h).code,f=c.vehicleClass,v=(f=void 0===f?{}:f).code,p=f.name,b=e.modelName,y=e.msrp,g=e.type,E=void 0===g?s:g,_=e.year;return{bodyStyleId:m,classId:v,className:p,exteriorBaseImage:{alt:"",imgS:u,imgL:u},hasMSRP:!0,modelId:d,modelName:b,msrp:{price:y,priceCurrency:r.uf.toCurrency(y,n,i,o)},type:E,year:_}}},{key:"getChosenVehicle",value:function(){return this.chosenVehicle}},{key:"isValid",value:function(){return!this.vehicleSelector||(this.vehicleSelector.validate(),this.vehicleSelector.isValid())}},{key:"focusOnErrorElement",value:function(){var e=this.element.querySelector("[".concat("aria-invalid",'="true"]'));if(e)e.focus();else{var t=this.element.querySelector(".button-control__error");null==t||t.setAttribute("tabindex",-1),null==t||t.focus()}}},{key:"render",value:function(){return this.element}},{key:"selectorsRequired",get:function(){var e;return(null===(e=this.config.formConfig)||void 0===e?void 0:e.header)===ie}}]),e}(),se=n(97842);function ce(){var e=(0,A.Z)(['\n    <div class="dealer-form__dealer">\n    </div>\n']);return ce=function(){return e},e}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he={dealer:{},disableChangeDealer:null,showInventory:!1,showMap:!1},me=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,I.Z)(this,e),(0,i.Z)(this,"updateDealer",(function(e){n.chosenDealer=e.detail})),(0,i.Z)(this,"getChosenDealer",(function(){return n.chosenDealer})),this.init(t,r),this.createDealer(),this.createDealerForm(),this.attachEvents()}return(0,N.Z)(e,[{key:"init",value:function(e,t){var n,i=e.dealerSearchHeading,r=e.serverError,o=(r=void 0===r?{}:r).description,a=r.title;this.content=ue({selectedDealerHeading:i,serverErrorDescription:o,serverErrorTitle:a},e),this.config=ue({},he,{},t),this.chosenDealer=this.config.dealer||(null===(n=this.config.cacheData)||void 0===n?void 0:n.dealer)||{}}},{key:"createDealer",value:function(){this.element=(0,r.e2)(ce())({getNode:!0})}},{key:"createDealerForm",value:function(){var e=this.config,t=e.disableChangeDealer,n=e.showInventory,i=e.showMap,r=e.vehicle,o=(r=void 0===r?{}:r).vin,a=this.chosenDealer.dealerId||this.chosenDealer.dealerCode,l="boolean"==typeof t?t:a&&o;this.chooseADealerPlugin=new se.Z({content:this.content,disableChange:l,element:this.element,presetDealerId:a,showMap:i,showInventory:n})}},{key:"attachEvents",value:function(){r.Jw.addEventListener(w.fD.CHOSEN_DEALER_UPDATED,this.updateDealer)}},{key:"focusOnErrorElement",value:function(){var e=this.element.querySelector("[".concat("aria-invalid",'="true"]'));if(e)e.focus();else{var t=this.element.querySelector(".dealer-results__error-message");null==t||t.setAttribute("tabindex",-1),null==t||t.focus()}}},{key:"render",value:function(){return this.element}}]),e}();function fe(){var e=(0,A.Z)(['<div class="dealer-form__comments"></div>']);return fe=function(){return e},e}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be={leadFormAdditionalCommentLabel:""},ye=function(){function e(t,n){(0,I.Z)(this,e),this.content=pe({},be,{},t),this.config=pe({},n),this.createComments(),this.createCommentsField()}return(0,N.Z)(e,[{key:"createComments",value:function(){this.element=(0,r.e2)(fe())({getNode:!0})}},{key:"createCommentsField",value:function(){var e;this.commentsField=new V.ZF({labelText:this.content.leadFormAdditionalCommentLabel,maxLength:2500,showLabelText:!0,valueText:(null===(e=this.config.cacheData)||void 0===e?void 0:e.comments)||""}),this.element.appendChild(this.commentsField.render())}},{key:"getComments",value:function(){return this.commentsField.getValue()}},{key:"render",value:function(){return this.element}}]),e}();function ge(){var e=(0,A.Z)(['\n    <div class="dealer-form dealer-form--customer">\n        <h2 class="dealer-form--title">','</h2>\n        <div class="dealer-form__input-container">\n            <div class="dealer-form__input-container dealer-form__input-container--first-name"></div>\n        </div>\n        <div class="dealer-form__input-container">\n            <div class="dealer-form__input-container dealer-form__input-container--last-name"/></div>\n        </div>\n        <div class="dealer-form__input-container">\n            <div class="dealer-form__input-container dealer-form__input-container--email"></div>\n        </div>\n        <div class="dealer-form__input-container">\n            <div class="dealer-form__input-container dealer-form__input-container--phone"></div>\n        </div>\n        <div class="dealer-form__input-container">\n           <p class="dealer-form--pref-title">','</p>\n            <div class="dealer-form__input-container dealer-form__input-container--preferred"></div>\n        </div>\n        <div class="dealer-form__input-container dealer-form__input-container--best-way-inputs dealer-form__input-container--hidden">\n            <p class="dealer-form--best-title">','</p>\n            <div class="dealer-form__input-container dealer-form__input-container--best-way"></div>\n        </div>\n    </div>\n']);return ge=function(){return e},e}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe="dealerFormCustomer",Ce="dealer-form__input-container--hidden",Te=function(){function e(t,n){(0,I.Z)(this,e),this.content=_e({},t),this.config=_e({},n),this.init()}return(0,N.Z)(e,[{key:"init",value:function(){var e,t=null===(e=this.config.cacheData)||void 0===e?void 0:e.customerContact;if(t){var n=t;t={email:n.email,firstName:n.firstName,isEmailPreferredContactMethod:n.isEmailPreferredContactMethod,lastName:n.lastName,phone:n.phoneNumber,preferedContactPhoneMethods:n.preferedContactPhoneMethods}}this.userInfo=this.config.userInfo?_e({},this.config.userInfo):t,this.togglePreferenceRow=this.togglePreferenceRow.bind(this),this.createCustomer(),this.togglePreferenceRow(),this.userInfo||this.autoPopulateAuthInfo()}},{key:"cacheDOM",value:function(){this.formElement=this.element.querySelector(".".concat("dealer-form--customer")),this.firstName=this.element.querySelector(".".concat("dealer-form__input-container--first-name")),this.lastName=this.element.querySelector(".".concat("dealer-form__input-container--last-name")),this.email=this.element.querySelector(".".concat("dealer-form__input-container--email")),this.phone=this.element.querySelector(".".concat("dealer-form__input-container--phone")),this.preferredContainer=this.element.querySelector(".".concat("dealer-form__input-container--preferred")),this.bestWayContainer=this.element.querySelector(".".concat("dealer-form__input-container--best-way")),this.bestWayInputsContainer=this.element.querySelector(".".concat("dealer-form__input-container--best-way-inputs"))}},{key:"getAuthInfo",value:function(){var e=this,t=new T.$S,n=t.getAuthState();return n.loggedState||n.partialLoggedState?t.getAuthProfile().then((function(t){var n=_e({},t);return n.phone=t.mobilePhoneNumber||t.landlinePhone||t.primaryPhoneNumber||t.secondaryPhoneNumber,e.userInfo=n,n})):Promise.resolve(null)}},{key:"autoPopulateAuthInfo",value:function(){var e=this;this.getAuthInfo().then((function(t){t&&e.populateInputs(t)}))}},{key:"populateInputs",value:function(e){e&&(this.inputs.firstName.setValue(e.firstName),this.inputs.lastName.setValue(e.lastName),this.inputs.email.setValue(e.email),e.phone&&this.inputs.phone.setValue(e.phone))}},{key:"createCustomer",value:function(){var e=this.userInfo||{},t=e.email,n=void 0===t?"":t,i=e.firstName,o=void 0===i?"":i,a=e.isEmailPreferredContactMethod,l=void 0===a||a,s=e.lastName,c=void 0===s?"":s,d=e.phone,u=void 0===d?"":d,h=e.preferedContactPhoneMethods,m=void 0===h?[]:h,f=m.indexOf(this.content.leadFormPhonePrefText)>-1,v=m.indexOf(this.content.leadFormPhonePrefCall)>-1;this.inputs={firstName:new V.O8({formId:Oe,type:"text",labelText:this.content.leadFormCustomerFirstName,id:"df-first-name",required:!0,allowReset:!1,valueText:o,maxLength:255,validateOnBlur:!0,validation:[{type:V.O8.VALIDATION_TYPE.REQUIRED,errorMessage:this.content.leadFormCustomerPleaseEnterFirstName},{type:V.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:this.content.leadFormCustomerPleaseEnterFirstName}],restrictions:[V.O8.RESTRICTION_TYPE.NUMERIC],errorMessage:this.content.leadFormCustomerPleaseEnterFirstName,analyticsTrigger:"dealer-form-firstname"}),lastName:new V.O8({formId:Oe,type:"text",labelText:this.content.leadFormCustomerLastName,allowReset:!1,id:"df-last-name",valueText:c,required:!0,maxLength:255,validateOnBlur:!0,validation:[{type:V.O8.VALIDATION_TYPE.REQUIRED,errorMessage:this.content.leadFormCustomerPleaseEnterLastName},{type:V.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:this.content.leadFormCustomerPleaseEnterLastName}],restrictions:[V.O8.RESTRICTION_TYPE.NUMERIC],errorMessage:this.content.leadFormCustomerPleaseEnterLastName}),email:new V.O8({formId:Oe,allowReset:!1,type:"text",labelText:this.content.leadFormCustomerEmail,id:"df-email",valueText:n,required:!0,maxLength:50,validation:this.getEmailValidations(!0),restrictions:[V.O8.RESTRICTION_TYPE.EMAIL_SPECIAL_CHARS],validateOnBlur:!0,analyticsTrigger:"dealer-form-email"}),phone:new V.O8({type:"tel",allowReset:!1,required:!1,id:"df-phone",valueText:u,labelText:this.content.leadFormCustomerPhone,maxLength:15,validation:this.getPhoneValidations(),validateOnBlur:!0,formatting:[{type:V.O8.FORMAT_TYPE.PHONE}],restrictions:[V.O8.RESTRICTION_TYPE.PHONE_NUMBER]}),emailRadio:new V.iK({labelText:this.content.leadFormCustomerRadioLabelEmail,inputClassNames:["dealer-form__radio--email-pref"],onChangeCallback:this.togglePreferenceRow,valueText:"email",checked:l,name:"radioPrefGroup"}),phoneRadio:new V.iK({labelText:this.content.leadFormCustomerRadioLabelPhone,inputClassNames:["dealer-form__radio--phone-pref"],onChangeCallback:this.togglePreferenceRow,valueText:"phone",checked:!l,name:"radioPrefGroup"}),textPrefCheckbox:new V.ZS({labelText:this.content.leadFormPhonePrefText,inputClassNames:["dealer-form__checkbox--email"],valueText:"text",checked:f}),callPrefCheckbox:new V.ZS({labelText:this.content.leadFormPhonePrefCall,inputClassNames:["dealer-form__checkbox--phone"],valueText:"call",checked:v})},this.element=function(e){var t=e.preferredTitle,n=void 0===t?"":t,i=e.bestWayTitle,o=void 0===i?"":i,a=e.formTitle,l=void 0===a?"":a;return(0,r.e2)(ge(),l,n,o)}({formTitle:this.content.customerTitle,bestWayTitle:this.content.leadFormPhonePrefMessage,preferredTitle:this.content.preferredContactTitle})({getNode:!0}),this.cacheDOM(),this.firstName.parentNode.replaceChild(this.inputs.firstName.render(),this.firstName),this.lastName.parentNode.replaceChild(this.inputs.lastName.render(),this.lastName),this.email.parentNode.replaceChild(this.inputs.email.render(),this.email),this.phone.parentNode.replaceChild(this.inputs.phone.render(),this.phone),this.bestWayContainer.appendChild(this.inputs.callPrefCheckbox.render(),this.bestWayContainer),this.bestWayContainer.appendChild(this.inputs.textPrefCheckbox.render(),this.bestWayContainer),this.preferredContainer.appendChild(this.inputs.emailRadio.render(),this.preferredContainer),this.preferredContainer.appendChild(this.inputs.phoneRadio.render(),this.preferredContainer)}},{key:"getCustomerContactData",value:function(){var e=this.inputs,t=e.firstName,n=e.lastName,i=e.email,r=e.phone,o=e.emailRadio,a=e.callPrefCheckbox,l=e.textPrefCheckbox,s=this.userInfo||{},c=s.city,d=void 0===c?"":c,u=s.zip;return{address:{city:d,postalCode:void 0===u?"":u},email:i.getValue(),isEmailPreferredContactMethod:o.isChecked(),firstName:t.getValue(),lastName:n.getValue(),phoneNumber:r.getValue(),preferedContactPhoneMethods:[a.getValue()?a.labelElement.innerText:"",l.getValue()?l.labelElement.innerText:""]}}},{key:"getEmailValidations",value:function(e){var t=[{type:V.O8.VALIDATION_TYPE.MAX_LENGTH,errorMessage:this.content.leadFormCustomerInvalidEmail},{type:V.O8.VALIDATION_TYPE.EMAIL,errorMessage:this.content.leadFormCustomerInvalidEmail}];return e&&t.push({type:V.O8.VALIDATION_TYPE.REQUIRED,errorMessage:this.content.leadFormCustomerInvalidEmail}),t}},{key:"getPhoneValidations",value:function(e){var t=[{type:V.O8.VALIDATION_TYPE.PHONE_FORMATTED,errorMessage:this.content.leadFormCustomerPleaseEnterValidPhone}];return e&&t.push({type:V.O8.VALIDATION_TYPE.REQUIRED,errorMessage:this.content.leadFormCustomerPleaseEnterValidPhone}),t}},{key:"togglePreferenceRow",value:function(){var e=this.inputs,t=e.email,n=e.phone,i=e.emailRadio.isChecked(),r=this.getEmailValidations(i),o=this.getPhoneValidations(!i);i?this.bestWayInputsContainer.classList.add("".concat(Ce)):this.bestWayInputsContainer.classList.remove("".concat(Ce)),t.setRequired(i),n.setRequired(!i),t.setValidation(r),n.setValidation(o)}},{key:"getInputsToValidate",value:function(){var e=this.inputs;return{firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone}}},{key:"isValid",value:function(){var e=this.getInputsToValidate(),t=!0;return Object.keys(e).forEach((function(n){var i=e[n];i.validate(),i.isValid()||(t=!1)})),t}},{key:"render",value:function(){return this.element}}]),e}();function Pe(){var e=(0,A.Z)(['\n    <div class="dealer-form__subscribe">\n        <p class="dealer-form__subscribe--disclaimer">','</p>\n        <div class="dealer-form__subscribe--input"></div>\n        <p class="dealer-form__subscribe--copy">',"</p>\n    </div>"]);return Pe=function(){return e},e}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Ie={formID:"dealerSubscribe",checkboxID:"subscribeCheckbox"},Ne=function(){function e(t){(0,I.Z)(this,e),this.content=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Ie,{},t.content),this.config=t.config,this.inputs={},this.createEmailSubscription()}return(0,N.Z)(e,[{key:"cacheDom",value:function(){this.dealerFormCheckboxContainer=this.element.querySelector(".".concat("dealer-form__subscribe--input"))}},{key:"createEmailSubscription",value:function(){var e,t,n,i,o;this.inputs.dealerFormEmailSubscriptionCheckbox=new V.ZS({formId:this.content.formID,id:this.content.checkboxID,required:!1,labelText:this.content.leadFormEmailSubscribeCheckbox}),this.element=(n=void 0===(t=(e={dealerFormEmailSubscription:this.content.leadFormEmailSubscribeDisclaimer,dealerFormDisclaimer:this.content.leadFormDisclaimer}).dealerFormEmailSubscription)?"":t,o=void 0===(i=e.dealerFormDisclaimer)?"":i,(0,r.e2)(Pe(),o,n))({getNode:!0}),this.cacheDom(),this.dealerFormCheckboxContainer.parentNode.replaceChild(this.inputs.dealerFormEmailSubscriptionCheckbox.render(),this.dealerFormCheckboxContainer)}},{key:"isSubscribed",value:function(){return this.inputs.dealerFormEmailSubscriptionCheckbox.getValue()}},{key:"render",value:function(){return this.element}}]),e}();function De(){var e=(0,A.Z)(['\n    <div class="dealer-form__privacy">\n        <div class="dealer-form__privacy--input"></div>\n        <div id="dealer-form-error-message" class="dealer-form__error-message"></div>\n        <p class="dealer-form__privacy--copy">',"</p>\n    </div>"]);return De=function(){return e},e}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Le={formID:"dealerPrivacyPolicy",checkboxID:"privacyPolicyCheckbox"},Re=function(){function e(t){(0,I.Z)(this,e),this.content=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Le,{},t.content),this.config=t.config,this.inputs={},this.createPrivacy()}return(0,N.Z)(e,[{key:"cacheDom",value:function(){this.dealerFormCheckboxContainer=this.element.querySelector(".".concat("dealer-form__privacy--input"))}},{key:"createPrivacy",value:function(){var e,t,n="tos-".concat(this.config.formType);this.inputs.dealerFormPrivacyCheckbox=new V.ZS({formId:this.content.formID,id:this.content.checkboxID,required:!0,labelText:this.content.leadFormPrivacyCheckbox,analyticsTrigger:n,errorMessage:this.content.leadFormPrivacyDisclaimerError,validation:[{type:V.ZS.VALIDATION_TYPE.REQUIRED,errorMessage:this.content.leadFormPrivacyDisclaimerError}]}),this.element=(t=void 0===(e={dealerFormPrivacyCopy:this.content.leadFormPrivacyDisclaimer}.dealerFormPrivacyCopy)?"":e,(0,r.e2)(De(),t))({getNode:!0}),this.cacheDom(),this.dealerFormCheckboxContainer.parentNode.replaceChild(this.inputs.dealerFormPrivacyCheckbox.render(),this.dealerFormCheckboxContainer)}},{key:"isValid",value:function(){return this.inputs.dealerFormPrivacyCheckbox.validate(),this.inputs.dealerFormPrivacyCheckbox.valid}},{key:"render",value:function(){return this.element}}]),e}(),we=n(29554);function Ae(){var e=(0,A.Z)(['<div class="dealer-form__confirmation">\n                        <div class="dealer-form__message">\n                            <span class="icon-mb icon-checkmark-disc-stroke dealer-form__message__icon"></span>\n                            <h1 class="dealer-form__message__header">','</h1>\n                            <p class="dealer-form__message__copy">','</p>\n                        </div>\n                        <div class="dealer-form__dealer-info">\n                            <h2 class="dealer-form__header dealer-form__header--confirmation">','</h2>\n                        </div>\n                        <div class="dealer-form__contact-info">\n                            <h2 class="dealer-form__header dealer-form__header--confirmation">','</h2>\n                            <p class="dealer-form__contact-info__label">','</p>\n                            <p class="dealer-form__contact-info__value">'," ","</p>\n                            ",'\n                            <p class="dealer-form__contact-info__label">','</p>\n                            <p class="dealer-form__contact-info__value">','</p>\n                            <p class="dealer-form__contact-info__label">','</p>\n                            <p class="dealer-form__contact-info__value">',"</p>\n                        </div>\n                        ","\n                        ","\n                        ","\n                    </div>"]);return Ae=function(){return e},e}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve,Me=function(){function e(){var t,n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.content,a=r.config,l=r.confirmationData;(0,I.Z)(this,e);var s=null!==(t=a.vehicle)&&void 0!==t&&t.modelId?a.vehicle:null==l||null===(n=l.prospect)||void 0===n?void 0:n.vehicle;this.content=Fe({},o),this.config=Fe({},a,{confirmationView:!0,dealer:null==l||null===(i=l.prospect)||void 0===i?void 0:i.dealer,disableChangeDealer:!0,vehicle:s}),this.confirmationData=Fe({},l),this.createDealerFormConfirmation()}return(0,N.Z)(e,[{key:"createDealerFormConfirmation",value:function(){var e,t,n,i,o,a,l,s,c,d,u,h,m,f,v=Fe({},this.content),p=Fe({},null==this||null===(e=this.confirmationData.prospect)||void 0===e?void 0:e.customer,{},null==this||null===(t=this.confirmationData.prospect)||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.contact,{},null==this?void 0:this.config.vehicle,{},null==this||null===(i=this.confirmationData)||void 0===i||null===(o=i.prospect)||void 0===o||null===(a=o.customer)||void 0===a||null===(l=a.contact)||void 0===l?void 0:l.phone[0],{},null==this||null===(s=this.confirmationData)||void 0===s||null===(c=s.prospect)||void 0===c||null===(d=c.customer)||void 0===d||null===(u=d.contact)||void 0===u?void 0:u.email);v.leadConfirmationHeading=(0,r.NR)(v.leadConfirmationHeading,{firstName:p.firstName}),p.preferredContactMethod=null!==(h=p.email)&&void 0!==h&&h.isPreferredContactMethod?this.content.leadFormCustomerRadioLabelEmail:this.content.leadFormCustomerRadioLabelPhone,v.leadConfirmationSubhead="specialOffer"===this.config.formType&&!0===this.config.confirmationView?v.leadConfirmationSpecialOffersSubhead:v.leadConfirmationDefaultSubhead,p.interestedIn=C.getSelectedInterestsLabels(p.interestedIn,this.config.formConfig.ctas,this.content),p.hasVehicle=(null===(m=this.config.vehicle)||void 0===m?void 0:m.modelId)||(null===(f=this.config.vehicle)||void 0===f?void 0:f.offerName),p.isAuthenticated=this.isAuthenticated(),this.element=function(e){var t=e.contentObj,n=void 0===t?{leadConfirmationHeading:"",leadConfirmationSubhead:"",leadConfirmationEmailLabel:"",leadConfirmationPhoneNumberLabel:"",leadConfirmationNameLabel:"",leadConfirmationVehiclePrefsTitle:"",leadConfirmationInterestedInTitle:"",leadConfirmationYourDealerTitle:"",leadConfirmationContactInfoTitle:"",preferredContactTitle:""}:t,i=e.contentObjValues,o=void 0===i?{firstName:"",hasVehicle:!1,lastName:"",isAuthenticated:!1,interestedIn:"",phoneNumber:"",emailAddress:"",preferredContactMethod:""}:i;return(0,r.e2)(Ae(),n.leadConfirmationHeading,n.leadConfirmationSubhead,n.leadConfirmationYourDealerTitle,n.leadConfirmationContactInfoTitle,n.leadConfirmationNameLabel,o.firstName,o.lastName,""!==o.phoneNumber?'<p class="dealer-form__contact-info__label">'.concat(n.leadConfirmationPhoneNumberLabel,'</p>\n                            <p class="dealer-form__contact-info__value">').concat(o.phoneNumber,"</p>"):"",n.leadConfirmationEmailLabel,o.emailAddress,n.preferredContactTitle,o.preferredContactMethod,o.interestedIn.length>0?'<div class="dealer-form__interested-in">\n                                <h2 class="dealer-form__header dealer-form__header--confirmation">'.concat(n.leadConfirmationInterestedInTitle,'</h2>\n                                <p class="dealer-form__interested-in__value">').concat(o.interestedIn.join(", "),"</p>\n                            </div>"):"",o.hasVehicle?'<div class="dealer-form__vehicle-preferences">\n                                <h2 class="dealer-form__header dealer-form__header--confirmation">'.concat(n.leadConfirmationVehiclePrefsTitle,"</h2>\n                            </div>"):"",o.isAuthenticated?"":'<div class="dealer-form__registration"></div>')}({contentObj:v,contentObjValues:p})({getNode:!0}),this.createDealerInfoSection(),this.createRegistrationSection()}},{key:"isAuthenticated",value:function(){var e=(new T.$S).getAuthState();return e.loggedState||e.partialLoggedState}},{key:"createDealerInfoSection",value:function(){this.dealerInfoSection=this.element.querySelector(".dealer-form__dealer-info"),this.dealerInfo=new me(this.content,this.config),this.dealerInfoSection.appendChild(this.dealerInfo.render()),this.createVinInfo()}},{key:"createVinInfo",value:function(){var e;this.config.vehicle&&(this.vinInfoSection=this.element.querySelector(".dealer-form__vehicle-preferences"),this.vinInfo=new le(this.content,this.config),null===(e=this.vinInfoSection)||void 0===e||e.appendChild(this.vinInfo.render()))}},{key:"createRegistrationSection",value:function(){if(this.registrationSection=this.element.querySelector(".dealer-form__registration"),this.registrationSection){var e,t,n,i=null===(e=this.confirmationData)||void 0===e||null===(t=e.prospect)||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.contact,o=i.firstName,a=i.lastName,l=i.email,s=(l=void 0===l?{}:l).emailAddress,c={onCompleteCallback:this.config.onCompleteCallback||r.ZT,onDrawerToggle:this.onDrawerToggle.bind(this),userInfo:{firstName:o,lastName:a,email:s}};this.config.standalonePage&&(this.content.continue=null);var d=new we.qw(c,this.content);this.registrationSection.appendChild(d.render())}}},{key:"onDrawerToggle",value:function(e,t){if(t){var n=this.element.querySelector(".mbs-quick-registration__drawer-container");setTimeout((function(){n.scrollIntoView({behavior:"smooth"})}),w.O3.DELAY_300MS)}}},{key:"render",value:function(){return this.element}}]),e}(),xe=re.CONTACT,He=re.REQUEST_QUOTE,Ze=re.SPECIAL_OFFER,Be=re.TEST_DRIVE,Ue=(Ve={},(0,i.Z)(Ve,xe,{header:"fourButton",ctas:[{analyticsTrigger:"option-new-inventory",id:M,contentLabelKey:"leadFormNewInvButton",selected:!1},{analyticsTrigger:"option-cpo-inventory",id:x,contentLabelKey:"leadFormCpoButton",selected:!1},{analyticsTrigger:"option-special-offers",id:"special_offers",contentLabelKey:"leadFormSpecialoffersButton",selected:!1},{analyticsTrigger:"option-general-inquiry",id:"general",contentLabelKey:"leadFormGeneralButton",selected:!1}]}),(0,i.Z)(Ve,He,{header:ie,ctas:[{analyticsTrigger:"option-get-a-quote",id:H,contentLabelKey:"leadFormQuoteButton",selected:!0},{analyticsTrigger:"option-schedule-test-drive",id:Z,contentLabelKey:"leadFormTestdriveButton",selected:!1}]}),(0,i.Z)(Ve,Ze,{header:"copy"}),(0,i.Z)(Ve,Be,{header:ie,ctas:[{analyticsTrigger:"option-get-a-quote",id:H,contentLabelKey:"leadFormQuoteButton",selected:!1},{analyticsTrigger:"option-schedule-test-drive",id:Z,contentLabelKey:"leadFormTestdriveButton",selected:!0}]}),Ve);function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye={userInfo:null,country:"us",currency:"USD",dealer:null,formType:re.CONTACT,sourceType:"default",isNewInventory:!0,language:"en",onSubmitCallback:r.ZT,submitLead:null,vehicle:void 0},We={customerTitle:"Your Information",dealerTitle:"Dealer",preferredContactTitle:"Preferred Contact Method",leadsFormHeading:"Dealer Form",vehicleTitle:"Vehicle"},Ge=function(){function e(t,n){var i;(0,I.Z)(this,e);var o={variantInfo:window.mbNafta.ns("pageData").variantInfo};this.content=Ke({},We,{},n,{reserveVehicleStatusContent:(0,r.n3)((null===(i=window.mbNafta.pageData)||void 0===i?void 0:i.reservedVehicleStatus)||[])}),this.config=Ke({},Ye,{},t,{},o),this.config.formConfig=Ue[this.config.formType],[e.FORM_TYPE.E_PRICE,e.FORM_TYPE.IM_INTERESTED].indexOf(this.config.formType)>-1&&(this.config.formConfig=Ue[re.REQUEST_QUOTE]),this.virtualKeyboard=null,this.onVirtualKeyboardKeyPress=this.onVirtualKeyboardKeyPress.bind(this),this.onVirtualKeyboardChange=this.onVirtualKeyboardChange.bind(this),this.lastActiveInput=null,this.isCampaignLeadForm=this.config.sourceType===e.SOURCE_TYPE.CAMPAIGN_FORM,this.init()}return(0,N.Z)(e,[{key:"init",value:function(){this.createElement(),this.cacheDOM(),this.createHeader(),this.createVehicle(),this.createDealer(),this.createComments(),this.createCustomer(),(0,r.Hk)()?this.createEmailSubscription():this.createPrivacy(),this.attachEvents(),this.trackOpen()}},{key:"destroy",value:function(){this.element.remove()}},{key:"createElement",value:function(){var e,t,n=this.content,i=n.leadsFormHeading,o=n.submit,a=n.reserveVehicleStatusContent,l=this.config.formType;this.element=function(e){var t,n,i=e.submitButtonLabelText,o=void 0===i?"":i,a=e.formType,l=void 0===a?"contact":a,s=e.showReservationLabel,c=void 0!==s&&s,d=e.vehicleReservationStatus,u=void 0===d?"":d,h=e.reserveVehicleStatusContent,m=void 0===h?"":h;return(0,r.e2)(F(),l,c&&u===j.Z.RESERVATION_STATUSES.RESERVED?'\n                <div class="reservation-status-lead-form">\n                    <span class="tool-tip__icon"></span>\n                    <div class="dealer-form__reservation-tooltip">\n                        '.concat(null==m||null===(t=m.RESERVED)||void 0===t||null===(n=t.inventory)||void 0===n?void 0:n.tooltipMessage,"\n                    </div>\n                </div>\n            "):"",l,o)}({formType:l,leadsFormHeading:i,submitButtonLabelText:o,showReservationLabel:!(null===(e=this.config)||void 0===e||!e.showReservationLabel),vehicleReservationStatus:(null===(t=this.config)||void 0===t?void 0:t.vehicleReservationStatus)||"",reserveVehicleStatusContent:a})({getNode:!0}),this.config.variantInfo.isLargeFormat&&this.addKeyboard()}},{key:"cacheDOM",value:function(){this.formElement=this.element.querySelector("#".concat("dealer-form__form")),this.sectionHeaderElement=this.element.querySelector("#".concat("dealer-form__header")),this.sectionVehicleElement=this.element.querySelector("#".concat("dealer-form__vehicle")),this.sectionDealerElement=this.element.querySelector("#".concat("dealer-form__dealer")),this.sectionCommentsElement=this.element.querySelector("#".concat("dealer-form__comments")),this.sectionCustomerElement=this.element.querySelector("#".concat("dealer-form__customer")),this.sectionEmailSubscriptionElement=this.element.querySelector("#".concat("dealer-form__subscribe")),this.sectionPrivacyElement=this.element.querySelector("#".concat("dealer-form__privacy")),this.submitElement=this.element.querySelector("#".concat("dealer-form__submit"))}},{key:"addKeyboard",value:function(){var e=this,t=k.t7;t.theme="".concat(t.theme," small"),t.stopPropagation=!0,this.virtualKeyboard=new k.w4(document.querySelector(".lead-form-page"),{onChange:this.onVirtualKeyboardChange.bind(this),onKeyPress:this.onVirtualKeyboardKeyPress.bind(this)},t),window.addEventListener("click",(function(t){"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName||(e.lastActiveInput=t.target,e.virtualKeyboard.keyboard.setOptions({inputName:t.target.id}),e.virtualKeyboard.keyboard.setInput(t.target.value,t.target.id),t.target.value||"df-email"===t.target.id?e.virtualKeyboard.keyboard.setOptions({layoutName:"default"}):e.virtualKeyboard.keyboard.setOptions({layoutName:"shift"})),e.lastActiveInput&&("df-email"===e.lastActiveInput.id?e.virtualKeyboard.keyboard.keyboardDOM.classList.add("email-active"):"df-phone"===e.lastActiveInput.id||document.querySelector(".location-search")&&document.querySelector(".location-search").contains(e.lastActiveInput)?e.virtualKeyboard.keyboard.setOptions({layoutName:"symbols"}):e.virtualKeyboard.keyboard.keyboardDOM.classList.remove("email-active"))}))}},{key:"onVirtualKeyboardChange",value:function(e){this.lastActiveInput.value=e;var t=new Event("input",{bubbles:!0,cancelable:!0});this.lastActiveInput.dispatchEvent(t)}},{key:"onVirtualKeyboardKeyPress",value:function(e){var t;switch(e){case"{shift}":t="default"===this.virtualKeyboard.keyboard.options.layoutName?"shift":"default",this.virtualKeyboard.keyboard.setOptions({layoutName:t});break;case"{bksp}":break;default:this.lastActiveInput.value=this.lastActiveInput.value+e}}},{key:"createHeader",value:function(){var e,t,n,i,r,o;"copy"===(null==this||null===(e=this.config)||void 0===e||null===(t=e.formConfig)||void 0===t?void 0:t.header)&&(this.content.leadsFormHeading=(null===(n=this.content)||void 0===n?void 0:n.leadsFormHeadingOffers)||this.content.leadsFormHeading,this.content.leadsFormSubhead=(null===(i=this.content)||void 0===i?void 0:i.leadsFormSubheadOffers)||this.content.leadsFormSubhead),this.isCampaignLeadForm&&(this.content.leadsFormHeading=(null===(r=this.content)||void 0===r?void 0:r.leadsFormHeadingOffers)||this.content.leadsFormHeading,this.content.leadsFormSubhead=(null===(o=this.content)||void 0===o?void 0:o.leadsFormSubheadCampaign)||this.content.leadsFormSubhead,this.config.hideCTAs=!0),this.sectionHeader=new Y(this.content,this.config),this.sectionHeaderElement.innerHTML="",this.sectionHeaderElement.appendChild(this.sectionHeader.render())}},{key:"createVehicle",value:function(){this.isCampaignLeadForm&&(this.config.hidePrice=!0),this.sectionVehicle=new le(this.content,this.config),this.sectionVehicleElement.innerHTML="",this.sectionVehicleElement.appendChild(this.sectionVehicle.render())}},{key:"createDealer",value:function(){this.sectionDealer=new me(this.content,this.config),this.sectionDealerElement.innerHTML="",this.sectionDealerElement.appendChild(this.sectionDealer.render())}},{key:"createComments",value:function(){this.sectionComments=new ye(this.content,this.config),this.sectionCommentsElement.innerHTML="",this.sectionCommentsElement.appendChild(this.sectionComments.render())}},{key:"createCustomer",value:function(){this.sectionCustomer=new Te(this.content,this.config),this.sectionCustomerElement.innerHTML="",this.sectionCustomerElement.appendChild(this.sectionCustomer.render())}},{key:"createEmailSubscription",value:function(){this.sectionEmailSubscription=new Ne({content:this.content,config:this.config}),this.sectionEmailSubscriptionElement.innerHTML="",this.sectionEmailSubscriptionElement.appendChild(this.sectionEmailSubscription.render())}},{key:"createPrivacy",value:function(){this.sectionPrivacy=new Re({content:this.content,config:this.config}),this.sectionPrivacyElement.innerHTML="",this.sectionPrivacyElement.appendChild(this.sectionPrivacy.render()),this.errorElement=this.sectionPrivacy.element.querySelector("#".concat("dealer-form-error-message"))}},{key:"attachEvents",value:function(){this.submitElement.addEventListener(w.FP.CLICK,this.onSubmit.bind(this))}},{key:"trackOpen",value:function(){var e;"undefined"!=typeof _satellite&&(null===(e=_satellite)||void 0===e||e.track("leadFormStart",{name:this.config.formType}))}},{key:"getFormObject",value:function(){var t,n,i,o,a={},l=this.sectionVehicle.getChosenVehicle()||this.config.vehicle,s={};if(a.interests=this.sectionHeader.getHeaderCTAs(),a.dealer=this.dealer,a.comments=this.sectionComments.getComments(),a.customerContact=this.sectionCustomer.getCustomerContactData(),(0,r.Hk)()?a.customerContact.emailSubscribed=this.sectionEmailSubscription.isSubscribed():a.customerContact.emailSubscribed=!1,a.content=this.content,a.config=this.config,this.config.sourceType===e.SOURCE_TYPE.BYO&&null!=l&&l.modelId){var c,d=(0,L.d8)("".concat(w.I.LAST_BUILD,"_").concat(l.modelId.toUpperCase()).concat(null===(c=l.modelLineCode)||void 0===c?void 0:c.toUpperCase()));d&&(s=(0,R.oN)(d),a.unsavedBuild=s)}return l&&(a.vehicle={available:l.available,class:l.class||l.className,exteriorBaseImage:l.exteriorBaseImage||(null==l||null===(t=l.usedVehicleAttributes)||void 0===t||null===(n=t.images)||void 0===n?void 0:n[0]),exteriorcolor:l.exteriorMetaColor||s.exteriorColor,hasMSRP:l.hasMSRP,image:l.image,images:l.images,interiorcolor:l.interiorMetaColor||s.interiorColor,isCPO:l.isCPO,modelId:l.modelId,modelLineName:l.modelLineName,modelName:l.modelName,msrp:l.msrp,offerName:l.offerName,price:l.price||(null===(i=l.reservePrice)||void 0===i?void 0:i.price),stockId:(null==l?void 0:l.stockId)||(null==l||null===(o=l.vehicleAttributes)||void 0===o?void 0:o.stockId),type:l.type,vin:l.vin,year:l.year,eLink:l.eLink}),a}},{key:"getFormContainer",value:function(){return this.config.standalonePage?document.querySelector("[".concat("data-page-content","]")):document.querySelector("[".concat("data-modal-content","]"))}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.isFormValid()&&!this.isPosting){var t=this.config,n=t.endpoints,i=(n=void 0===n?{}:n).leads,r=t.recaptchaConfig;if(!i)throw Error("LFS invalid endpoint",i);this.formObject=this.getFormObject(),this.requestObj=C.createRequestObject(this.formObject),this.isPosting=!0,S(i,r,this.requestObj).then(this.onSubmitSuccess.bind(this)).catch(this.onSubmitError.bind(this))}}},{key:"onSubmitSuccess",value:function(){var e;this.requestObj.prospect.customer.interestedIn=this.formObject.interests,this.requestObj.prospect.vehicle=this.formObject.vehicle,this.isPosting=!1,this.config.onSubmitCallback();var t=new Me({config:this.config,content:this.content,confirmationData:this.requestObj}),n=this.config.standalonePage?null:document.querySelector(".modal__container");r.jG.insert(t.render(),this.getFormContainer()),(0,r.X5)(0,0,null,n),null===(e=_satellite)||void 0===e||e.track("leadFormSubmitSuccess",{name:this.config.formType})}},{key:"onSubmitError",value:function(){var e,t,n,i,r,o,a;this.isPosting=!1,this.serverError||(this.serverError=new D.Xq({title:null===(i=this.content)||void 0===i||null===(r=i.serverError)||void 0===r?void 0:r.title,description:null===(o=this.content)||void 0===o||null===(a=o.serverError)||void 0===a?void 0:a.description})),this.serverError.show(this.errorElement),null===(e=_satellite)||void 0===e||e.track("leadFormSubmitError",{name:this.config.formType,info:null===(t=this.content)||void 0===t||null===(n=t.serverError)||void 0===n?void 0:n.title})}},{key:"isDealerValid",value:function(){var e;return!(null===(e=this.dealer)||void 0===e||!e.dealerId)||(r.Jw.dispatchEvent(r.Jw.createCustomEvent(w.fD.CHOSEN_DEALER_VALIDATE)),!1)}},{key:"isFormValid",value:function(){var e,t=!0,n="",i=null;if(this.sectionVehicle.isValid()||(t=!1,n+="vehicle;",i=this.sectionVehicle),this.isDealerValid()||(t=!1,n+="dealer;",i||(i=this.sectionDealer)),this.sectionCustomer.isValid()||(t=!1,n+="customer;",i||(i=this.sectionCustomer)),(0,r.Hk)()||this.sectionPrivacy.isValid()||(t=!1,n+="privacy;",i||(i=this.sectionPrivacy)),!t)if(null===(e=_satellite)||void 0===e||e.track("leadFormSubmitError",{name:this.config.formType,info:n}),i.focusOnErrorElement)i.focusOnErrorElement();else{var o=this.formElement.querySelector("[".concat("aria-invalid",'="true"]'));o&&o.focus()}return t}},{key:"render",value:function(){return this.element}},{key:"dealer",get:function(){var e,t;return(null===(e=this.sectionDealer)||void 0===e?void 0:e.getChosenDealer())||(null===(t=this.config)||void 0===t?void 0:t.dealer)}}]),e}();(0,i.Z)(Ge,"FORM_TYPE",Ke({},re,{E_PRICE:"ePrice",IM_INTERESTED:"imInterested"})),(0,i.Z)(Ge,"SOURCE_TYPE",{BYO:"byo",CAMPAIGN_HERO:"campaignHero",CAMPAIGN_FORM:"campaignForm",HOLIDAY_CAMPAIGN_CAROUSAL:"holidayCampaignCarousel",HOLIDAY_CAMPAIGN_SPECIAL_OFFERS:"holidayCampaignSplOffers",CPO:"cpo",CPO_NON_DSE:"cpoNonDse",CPO_HOME:"cpoHome",DEFAULT:"default",INVENTORY:"inventory",INVENTORY_NON_DSE:"inventoryNonDse",MODEL:"model",NEW_VEHICLE_RESERVATION:"newReserve",PAYMENT_ESTIMATOR:"pe",PO:"po",PO_NON_DSE:"poNonDse",PO_VEHICLE_RESERVATION:"poReserve",PROFILE:"profile",PROFILE_CPO:"profileCpo",PROFILE_CREDIT:"profileCreditApp",PROFILE_PRICE_SOON:"profilepricesoon",SPECIAL_OFFERS:"so",VEHICLE_RESERVATION:"reserve",TRADE_IN_CALCULATOR_CONTACT_DEALER:"tradeIn"});var Qe=n(14569),Je=n(90921);function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e={callingContainer:null,dataAnalyticContainer:"{'blade': 'dealer-form-modal'}",markerElement:null,onClose:null},et={},tt=function(){function e(t){var n,r,o=t.modalConfig,a=void 0===o?$e:o,l=t.dealerFormConfig,s=t.content;(0,I.Z)(this,e),(0,i.Z)(this,"preloadImage",(function(e){return new Promise((function(t,n){var i=new Image;i.onload=n,i.onerror=t,i.src=e}))})),l=this.checkForBrokenLeadImage(l),this.config=a,this.content=Xe({},s,{},null==s||null===(n=s.v2)||void 0===n?void 0:n.content),this.dealerFormConfig=Xe({},l,{},null==s||null===(r=s.v2)||void 0===r?void 0:r.config),delete this.content.v2,this.modal=null,this.modalElm=null,this.init()}return(0,N.Z)(e,[{key:"init",value:function(){var e,t;this.onClose=this.onClose.bind(this),this.dealerFormConfig=Xe({cacheData:et,onCompleteCallback:this.onClose,onSubmitCallback:this.onSubmitCallback.bind(this),showReservationLabel:!(null===(e=this.config)||void 0===e||!e.showReservationLabel),vehicleReservationStatus:(null===(t=this.config)||void 0===t?void 0:t.vehicleReservationStatus)||""},this.dealerFormConfig),this.dealerForm=new Ge(this.dealerFormConfig,this.content),this.updateLegendDetailMarker=this.updateLegendDetailMarker.bind(this)}},{key:"checkForBrokenLeadImage",value:function(e){var t=this;try{var n,i=e.vehicle,r=W.T.getJellybean(i);this.preloadImage(null!==(n=r.imgL)&&void 0!==n?n:r.imgS).then((function(){var e;null!==(e=t.dealerFormConfig.vehicle.exteriorBaseImage)&&void 0!==e&&e.imgL?t.dealerFormConfig.vehicle.exteriorBaseImage.imgL=i.fallbackImage:t.dealerFormConfig.vehicle.exteriorBaseImage={imgL:i.fallbackImage},t.modalElm.querySelector(".vehicle-offer__jellybean img").src=i.fallbackImage,t.modalElm.querySelector(".vehicle-offer__jellybean source").srcset=i.fallbackImage}))}catch(e){console.log(e)}return e}},{key:"destroy",value:function(){this.detachEvents(),this.modal&&this.modal.destroy(),this.dealerForm&&this.dealerForm.destroy()}},{key:"createModal",value:function(){this.modalElm=r.jG.fromTemplate('<div class="dealer-form-modal"></div>'),this.modalElm.appendChild(this.dealerForm.render());var e="cta-".concat(this.dealerFormConfig.formType,"-close");this.modal=new Qe.Modal(void 0,{modalContent:this.modalElm,callbacks:{beforeClose:this.onClose},sizeSmall:Qe.Modal.SIZES.FULLSCREEN,sizeLarge:Qe.Modal.SIZES.INSET,theme:Qe.Modal.THEMES.SIDE_PANEL,dataAnalyticContainer:this.config.dataAnalyticContainer,dataAnalyticTriggerClose:e})}},{key:"attachEvents",value:function(){window.addEventListener(Je._U.OPEN_DISCLAIMER,this.updateLegendDetailMarker)}},{key:"detachEvents",value:function(){window.removeEventListener(Je._U.OPEN_DISCLAIMER,this.updateLegendDetailMarker)}},{key:"open",value:function(){this.createModal(),this.attachEvents(),this.modal.open({callingContainer:this.config.callingContainer})}},{key:"close",value:function(){var e,t;null!==(e=this.modal)&&void 0!==e&&null!==(t=e.adapter)&&void 0!==t&&t.modalNode&&this.modal.close()}},{key:"onSubmitCallback",value:function(){this.submitted=!0}},{key:"setCache",value:function(){if(this.submitted)et={};else{var e=this.dealerForm.getFormObject(),t=e.comments,n=e.customerContact,i=e.dealer;et={comments:t,customerContact:n,dealer:i}}}},{key:"updateLegendDetailMarker",value:function(){var e=this.dealerForm.getFormObject().vehicle,t=this.config.markerElement||this.config.callingContainer;if(!this.dealerFormConfig.vehicle&&e&&(this.dealerFormConfig.vehicle=e),this.dealerFormConfig.vehicle){var n=W.T.getVehicleDetails(this.content,this.dealerFormConfig).disclaimer;null!=n&&n.legend&&Je.em.getInstance().updateLegendDetailMarker(n.legend,t)}this.onClose()}},{key:"onClose",value:function(){if(this.setCache(),window.location.href.endsWith("#")){var e=window.location,t=e.origin+e.pathname+e.search;window.history.pushState(null,null,t)}this.config.onClose&&this.config.onClose(),this.destroy()}}]),e}();(0,i.Z)(tt,"FORM_TYPE",Xe({},Ge.FORM_TYPE)),(0,i.Z)(tt,"SOURCE_TYPE",Xe({},Ge.SOURCE_TYPE))},26015:function(e,t,n){n.d(t,{h:function(){return L},T:function(){return b}});var i=n(4942),r=n(8357),o=n(90921),a=n(73154);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var s={BUILD:"build",CPO:"cpo",CPO_OFFER:"cpo-offer",NEW:"new",NEW_OFFER:"new-offer"},c=function(e){return"NEW"===e.type},d=function(e){return"PRE"===e.type},u=function(e){return c(e)&&e.contactDealerForPrice},h=function(e){return d(e)&&e.contactDealerForPrice},m=function(e,t){var n=c(t),i=t.formattedPrice,o=t.msrp,a=(o=void 0===o?{}:o).priceCurrency,l=e.dealerPrice,s=e.startingAt,d=e.priceLabel,m=a||i;return u(t)?e.contactDealerForPrice:h(t)?e.contactDealerForEPrice:d?"".concat(d," ").concat(m):(d=n?s:l,(0,r.NR)(d,[m]))},f=function(e){var t,n,i,r,o,l,s,c,d=e.fallbackImage,u=e.images,h=void 0===u?[]:u,m=e.usedVehicleAttributes,f=(m=void 0===m?{}:m).images,v=void 0===f?[]:f,p=null==e?void 0:e.exteriorBaseImage;if(null!==(t=e.exteriorBaseImage)&&void 0!==t&&t.desktop||null!==(n=e.exteriorBaseImage)&&void 0!==n&&n.mobile){var b=e.exteriorBaseImage;p=a.eN.createMediaObject(b)}if(null!==(i=e.image)&&void 0!==i&&i.desktop||null!==(r=e.image)&&void 0!==r&&r.mobile){var y,g;null===(y=e.image)||void 0===y||!y.mobile||null!==(g=e.image)&&void 0!==g&&g.desktop||(e.image.desktop=e.image.mobile);var E=e.image;p=a.eN.createMediaObject(E)}e.usedVehicleAttributes&&null!==(o=e.usedVehicleAttributes)&&void 0!==o&&o.images&&(p=a.eN.createMediaObjectFromPath(null===(c=e.usedVehicleAttributes.images)||void 0===c?void 0:c[0]));var _=d&&{imgL:d,alt:""};return(null!==(l=p)&&void 0!==l&&l.imgL||null!==(s=p)&&void 0!==s&&s.imgS?p:null)||v[0]||h[0]||_},v=function(e,t){var n,r,a;if(u(t)||h(t))return null;var s=e.disclaimer,c=e.disclaimerLabel,d=e.disclaimerTotalOnlinePrice,m=e.useDefaultDisclaimer,f=void 0===m?!d:m,v=(null==d?void 0:d.globalDisclaimerCode)||o.d.GLOBAL_DISCLAIMER_CODES.MSRP,p=null===(n=window.mbNafta)||void 0===n||null===(r=n.pageData)||void 0===r||null===(a=r.globalDisclaimerLegends)||void 0===a?void 0:a[v],b={autoNum:!1,globalDisclaimerCode:v,legend:p};return d&&!d.legend&&(d.legend=p),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({disclaimerLabel:c||s},f?b:d)},p=function(e){var t=e.bodyStyle,n=e.bodyStyleId,i=e.classId,r=e.modelName,o=e.vin,a=e.year,l=t||n,s={class:e.class||i,model:r,body:l,year:a};o&&(s.vin=o);var c=JSON.stringify(s);return'data-analytics-container=\'{"vehicle": '.concat(c,"}'")},b={getVehicleDetails:function(e,t){var n=t.templateType,i=t.vehicle,o=s.CPO_OFFER,a=s.NEW_OFFER;return n===s.BUILD?function(e,t){var n=t.buildName,i=t.modelId,o=t.modelLineName,a=t.modelName,l=t.priceCurrency,c=t.year;return{disclaimer:v(e,t),jellybean:f(t),modelName:c?"".concat(c," ").concat(a):a,modelLine:o,price:(0,r.NR)(e.totalPrice,[l]),templateType:s.BUILD,title:n||"".concat(e.my," ").concat(i),analyticsTag:p(t)}}(e,i):n===a||n===o?function(e,t){var n=t.modelName,i=t.year;return{jellybean:f(t),modelName:i?"".concat(i," ").concat(n):n,title:e.newSpecialOfferTitle,templateType:s.NEW_OFFER,analyticsTag:p(t)}}(e,i):d(i)?function(e,t){var n,i=t.descriptionLabel,r=t.modelLineName,o=t.modelName,a=t.year,l="boolean"==typeof t.certified?t.certified:null==t||null===(n=t.usedVehicleAttributes)||void 0===n?void 0:n.certified;return{disclaimer:v(e,t),jellybean:f(t),modelName:i||"".concat(a," ").concat(o),modelLine:r,price:m(e,t),title:"boolean"==typeof l?l?e.cpoTitle:e.poTitle:"",templateType:s.CPO,analyticsTag:p(t)}}(e,i):function(e,t){var n=t.headerText,i=t.modelLineName,r=t.modelName,o=t.year;return{disclaimer:v(e,t),jellybean:f(t),modelName:n||"".concat(o," ").concat(r),modelLine:i,price:m(e,t),templateType:s.NEW,analyticsTag:p(t)}}(e,i)},getJellybean:f,TEMPLATE_TYPES:s},y=n(15671),g=n(43144),E=n(82051),_=n(22209),O=n(30168),C=n(67294),T=n(97762),P=n.n(T),S=n(50115);function I(){var e=(0,O.Z)(['\n    <section class="vehicle-offer vehicle-offer--','" ',">\n        ",'\n        <div class="vehicle-offer__details">\n            ',"\n        </div>\n    </section>\n"]);return I=function(){return e},e}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={vehicle:null},L=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,y.Z)(this,e),this.content=D({},t),this.config=D({},k,{},n),this.createVehicleOffer(),this.cacheDOM(),this.fetchJellybean(),this.createDisclaimer()}return(0,g.Z)(e,[{key:"createVehicleOffer",value:function(){var e,t,n,i,o,a,l,s,c,d,u,h,m,f,v,p;this.config.vehicle&&(this.vehicleDetails=b.getVehicleDetails(this.content,this.config),this.config.hidePrice&&this.vehicleDetails.price&&delete this.vehicleDetails.price,this.element=(i=D({},this.vehicleDetails,{reserveVehicleStatusContent:(null===(e=this.content)||void 0===e?void 0:e.reserveVehicleStatusContent)||{},showReservationLabel:!(null===(t=this.config)||void 0===t||!t.showReservationLabel),vehicleReservationStatus:(null===(n=this.config)||void 0===n?void 0:n.vehicleReservationStatus)||""}),(0,r.e2)(I(),i.templateType,i.analyticsTag,i.jellybean?(p=i.jellybean,new _.Picture({className:"vehicle-offer__jellybean",media:p}).render().outerHTML):"",(a=(o=i).title,l=o.modelName,s=o.modelLine,c=o.price,u=void 0===(d=o.reserveVehicleStatusContent)?{}:d,m=void 0!==(h=o.showReservationLabel)&&h,v=void 0===(f=o.vehicleReservationStatus)?"":f,"\n    ".concat(a?'<p class="vehicle-offer__details-title">'.concat(a,"</p>"):"",'\n    <p class="vehicle-offer__details-model-name">').concat(l,"</p>\n    ").concat(m?P().renderToString(C.createElement(S.Z,{status:v,content:u,isImInterestedLeadForm:!0})):"","\n    ").concat(s?'<p class="vehicle-offer__details-model-line">'.concat(s,"</p>"):"","\n    ").concat(c&&(0,r.oX)()?'<p class="vehicle-offer__details-price">'.concat(c,"</p>"):"","\n"))))({getNode:!0}))}},{key:"cacheDOM",value:function(){this.priceElement=this.element&&this.element.querySelector(".".concat("vehicle-offer__details-price"))}},{key:"fetchJellybean",value:function(){var e=this.config,t=e.templateType,n=e.vehicle;if(n&&!n.images&&!n.image&&!n.exteriorBaseImage){var i=E.W.getInstance(),r=E.W.PRESET_CATEGORIES,o=r.BYO,a=r.MODEL,l={presetCategory:t===b.TEMPLATE_TYPES.BUILD?o:a};i.getBuildImage(n,l).then(this.createJellybean.bind(this))}}},{key:"createDisclaimer",value:function(){var e,t,n=(null===(e=this.config)||void 0===e?void 0:e.disclaimer)||(null===(t=this.vehicleDetails)||void 0===t?void 0:t.disclaimer);if(n&&this.priceElement){var i=new o.d(n);this.priceElement.appendChild(i.render())}}},{key:"createJellybean",value:function(e){this.config.vehicle.images=[{alt:"",imgS:e.respObj.small.retina,imgL:e.respObj.large.retina}];var t=new _.LazyPicture({className:"vehicle-offer__jellybean",forceLoad:!0,media:this.config.vehicle.images[0],role:"presentation"});r.jG.prepend(t.render(),this.element)}},{key:"render",value:function(){return this.element}}]),e}()},24429:function(e,t,n){n.d(t,{w4:function(){return m},t7:function(){return f},pS:function(){return v}});var i=n(4942),r=n(15671),o=n(43144),a=n(8357),l=n(32086),s=n.n(l),c=n(30168);function d(){var e=(0,c.Z)(['\n    <section class="virtual-keyboard module-separator ','" id="','">\n        <div class="simple-keyboard"></div>\n    </section>\n']);return d=function(){return e},e}var u={theme:"hg-theme-default virtual-keyboard__simple-theme",buttonTheme:[{class:"virtual-keyboard__variable-button-theme",buttons:"{tab}"}],layout:{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},display:{"{bksp}":"backspace","{enter}":"< enter","{shift}":"shift","{s}":"shift","{tab}":"tab","{lock}":"caps","{space}":" ","{//}":" "},availableLayouts:{DEFAULT:"default",SHIFT:"shift"}};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var m=function(){function e(t,n){var o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,r.Z)(this,e),this.container=t,this.keyboardConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,{},{onChange:function(e){return o.onChange(e)},onKeyPress:function(e){return o.onKeyPress(e)}},{},a),this.availableLayouts=this.keyboardConfig.availableLayouts,this.callbacks=n,this.isLocked=!1,this.init()}return(0,o.Z)(e,[{key:"init",value:function(){null!==this.element&&void 0!==this.element||(this.createView(),this.addKeyboard())}},{key:"createView",value:function(){var e,t,n,i,r;this.element=(n=void 0===(t=(e={}).cssClass)?"":t,r=void 0===(i=e.id)?"":i,(0,a.e2)(d(),n,r))({getNode:!0}),a.jG.append(this.element,this.container)}},{key:"addKeyboard",value:function(){this.keyboard=new(s())(this.keyboardConfig)}},{key:"onChange",value:function(e){this.callbacks&&this.callbacks.onChange&&"function"==typeof this.callbacks.onChange&&this.callbacks.onChange(e)}},{key:"onKeyPress",value:function(e){switch(e.toLowerCase()){case"{shift}":this.isLocked=!1,this.setKeyboardLayout(this.availableLayouts.SHIFT);break;case"{lock}":this.isLocked=!this.isLocked,this.setKeyboardLayout(this.availableLayouts.SHIFT);break;case"{numbers}":this.setKeyboardLayout(this.availableLayouts.NUMBERS,!0);break;case"{symbols}":this.setKeyboardLayout(this.availableLayouts.SYMBOLS,!0);break;case"{abc}":this.setKeyboardLayout(this.availableLayouts.DEFAULT);break;default:this.onKeyPressAction(e)}}},{key:"onKeyPressAction",value:function(e){this.callbacks&&this.callbacks.onKeyPress&&"function"==typeof this.callbacks.onKeyPress&&(this.callbacks.onKeyPress(e),this.isLocked||this.keyboard.options.layoutName!==this.availableLayouts.SHIFT||this.setKeyboardLayout(this.availableLayouts.DEFAULT))}},{key:"setKeyboardLayout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.availableLayouts.DEFAULT;t&&this.keyboard.options.layoutName!==n&&(n=this.availableLayouts.NUMBERS);var i=this.keyboard.options.layoutName===n?e:n;this.keyboard.setOptions({layoutName:i})}},{key:"clearInput",value:function(){this.keyboard.clearInput()}},{key:"render",value:function(){return this.element}},{key:"destroy",value:function(){this.keyboard.clear(),this.keyboard=null,a.jG.empty(this.container),this.element=null}}]),e}(),f={theme:"hg-theme-default virtual-keyboard__simple-theme email-keyboard--dark-theme",layout:{default:["@gmail.com @yahoo.com @hotmail.com","q w e r t y u i o p {bksp}","a s d f g h j k l {enter}","{shift} z x c v b n m @ . {shift}","{numbers} .com {space} _ - {numbers}"],shift:["@gmail.com @yahoo.com @hotmail.com","Q W E R T Y U I O P {bksp}","A S D F G H J K L {enter}","{SHIFT} Z X C V B N M ! ? {SHIFT}","{numbers} .com {space} _ - {numbers}"],numbers:["@gmail.com @yahoo.com @hotmail.com","1 2 3 4 5 6 7 8 9 0 {bksp}","@ # $ & * ( ) ' \" {enter}","{symbols} % - + = / ; : , . {symbols}","{abc} .com {space} ! ? {abc}"],symbols:["@gmail.com @yahoo.com @hotmail.com","1 2 3 4 5 6 7 8 9 0 {bksp}","€ £ ¥ _ ^ [ ] { } {enter}","{numbers} § | ~ ... \\ < > ! ? {numbers}","{abc} .com {space} {abc}"]},display:{"{bksp}":"backspace","{enter}":"enter","{shift}":"shift","{SHIFT}":"SHIFT","{space}":" ","{numbers}":".?123","{symbols}":"#+=","{abc}":"ABC"},availableLayouts:{DEFAULT:"default",SHIFT:"shift",NUMBERS:"numbers",SYMBOLS:"symbols"},preventMouseDownDefault:!0,newLineOnEnter:!0},v={theme:"hg-theme-default virtual-keyboard__simple-theme number-keyboard number-keyboard--dark-theme",buttonTheme:[{class:"virtual-keyboard__variable-button-theme",buttons:"{tab}"}],layout:{default:["1 2 3","4 5 6","7 8 9"," 0 {bksp}"]},display:{"{bksp}":"","{enter}":"enter"},availableLayouts:{DEFAULT:"default"}}},97844:function(e,t,n){n.d(t,{Rg:function(){return u},oN:function(){return d},zn:function(){return h}});var i=n(4942),r=n(48218),o=n(8357);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){var t="";return Object.keys(e.options).forEach((function(n){if(e.options[n].STAND_ALONE_OPTIONS){var i=e.options[n].STAND_ALONE_OPTIONS.map((function(e){return e.name})).join(", ");t+="".concat(""===t?"":", ").concat(i)}})),t}function c(e){var t="";return Object.keys(e.options).forEach((function(n){if(e.options[n].PACKAGES){var i=e.options[n].PACKAGES.map((function(e){return e.name})).join(", ");t+="".concat(""===t?"":", ").concat(i)}})),t}function d(e){return{exteriorColor:e.options.exterior.PAINT[0].name,interiorColor:e.options.interior.UPHOLSTERY[0].name,vehicleName:e.vehicleName,trim:e.options.interior.TRIM[0].name,wheels:e.options.exterior.WHEELS[0].name,options:s(e),packages:c(e)}}function u(e){var t=d(e),n=o.tO.localStorage.read(r.I.UNSAVED_BUILD_INFO),a=(0,o.fV)(),s=new Date,c=new Date(s.setDate(s.getDate()+1));return n?o.tO.localStorage.update(r.I.UNSAVED_BUILD_INFO,l({},n,(0,i.Z)({},a,l({},t,{expiration:c})))):o.tO.localStorage.create(r.I.UNSAVED_BUILD_INFO,(0,i.Z)({},a,l({},t,{expiration:c}))),a}function h(){var e=o.tO.localStorage.read(r.I.UNSAVED_BUILD_INFO);if(e){var t=new Date;Object.keys(e).forEach((function(n){new Date(e[n].expiration)<t&&delete e[n]})),Object.keys(e).length>0?o.tO.localStorage.update(r.I.UNSAVED_BUILD_INFO,e):o.tO.localStorage.delete(r.I.UNSAVED_BUILD_INFO)}}}}]);
//# sourceMappingURL=a840450d0accdf83a4b1.bundle.js.map