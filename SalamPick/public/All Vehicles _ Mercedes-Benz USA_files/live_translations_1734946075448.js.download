var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},__assign.apply(this,arguments)},__read=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,o,i=t.call(e),a=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a},__spreadArray=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},__values=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(){function e(e){if(void 0===e&&(e=!1),te()&&!$)return k();$=!1;var n=["SVG","SCRIPT","STYLE","NOSCRIPT"],t=[],r=document.body,o=A.join(","),i=function(e){return e[T.PARSED]=!0},a=function(e){return e[T.PARSED]=!1},u=function(e){return!!e[T.PARSED]},l=function(n){return function(t){return!!t[T.FORCED]||(e?n(t):!n(t))}}(u),s=[function(e){var n="INPUT"===e.tagName;if(n){var t=e.getAttribute("type");if(t){t=t.toLowerCase();var r=e.getAttributeNode("value"),o="button"===t,i="reset"===t,a="submit"===t;return n&&(o||i||a)&&r}}}],d=B(S,s),f=function(e){if(e.className&&-1!==e.className.indexOf("uwy")&&"application"===e.getAttribute("role"))return!0;if(e.getAttribute("data-uw-ignore-translate"))return!0;var n=e.tagName&&e.tagName.toUpperCase();return"TEXTAREA"===n||"CODE"===n||"PRE"===n||!!e.getAttribute("contenteditable")};F(r)&&l(r)&&!f(r)&&t.push(r),d(r).forEach(function(e){l(e)&&(i(e),t.push(e))});var v=function(e){e.hasChildNodes()&&!f(e)&&Array.from(e.childNodes).forEach(function(e){var r;if(!o||!M(o,e)){var u=e.tagName&&e.tagName.toUpperCase();if((!u||-1===n.indexOf(u))&&(C[O]&&(Object.values(C[O]).includes(null===(r=e.nodeValue)||void 0===r?void 0:r.trim())||a(e)),e.nodeType===Node.TEXT_NODE&&l(e)&&F(e)&&(i(e),(e.nodeValue.startsWith(" ")||e.nodeValue.startsWith(" "))&&(e[_]=e.nodeValue[0]),(e.nodeValue.endsWith(" ")||e.nodeValue.endsWith(" "))&&(e[w]=e.nodeValue.slice(-1)),t.push(e)),e.nodeType===Node.ELEMENT_NODE))if("IFRAME"===u){var s=e,f=s.baseURI.includes(document.location.origin);if(f)try{var g=s.contentDocument||s.contentWindow.document;v(g.body)}catch(e){c.logger.log("Error::","parse embed iframe",e)}}else d(e).forEach(function(e){l(e)&&(i(e),t.push(e))}),v(e)}})};return v(r),t}function n(e,n){return c.request({method:"POST",url:h+"/remediation/translate",header:{"Content-Type":"application/json"},body:{translateAccCode:d.account,translateSiteId:d.services.siteId,translatePageUrl:window.location.href,translateSentences:e,translateToLanguage:n}}).then(function(e){try{return JSON.parse(null===e||void 0===e?void 0:e.response)}catch(e){return c.logger.error(l,e),null}}).then(function(e){return(null===e||void 0===e?void 0:e.code)&&200!==(null===e||void 0===e?void 0:e.code)?(c.logger.error(l,null===e||void 0===e?void 0:e.message),null):e})}function t(e){return new Promise(function(n,t){c.request({method:"GET",url:e}).then(function(e){try{n(JSON.parse(null===e||void 0===e?void 0:e.response))}catch(e){t(e)}},function(e){t(e)})})}function r(){var e=g["LIVE_TRANSLATIONS.ignoredWords"];return e?b.length?Promise.resolve(b):t(e).then(function(e){return b=e,e||[]}).catch(function(e){return c.logger.warn("Can't load Ignored Words for Translations resources.",e),[]}):Promise.resolve([])}function o(e){var n=e.resolve,t=e.reject,r=e.items;if(!r.length)return n();if(!O)return t(l+": No language specified!");try{X(r,O).then(function(){return J(r)}).catch(function(e){return t(e)})}catch(e){console.log("Error::",l,e),t(e)}n()}function i(e){return I()?e.filter(function(e){return!V(e)}):e}function a(n){var t=e(!0);return Promise.all(t.map(function(e){var t=W(e.nodeValue,n,e);return t?K(e,t).then(function(){delete e[T.PARSED]}):(console.log("Can't revert translation for the node: ",e),Promise.resolve())}))}var u,l="LIVE_TRANSLATIONS",s=UserWayWidgetApp.addLib(l),c=UserWayWidgetApp.getLib("util"),d=UserWayWidgetApp.ContextHolder.config,f=d,v=f.services,g=f.tunings,p=window.UserWayWidgetApp.getLib("dom_observer"),m=window.UserWayWidgetApp.getLib("event_emitter"),h="https://api.userway.org/api",_="string_start_space_value",w="string_end_space_value",y=["en","en-us","en-au","en-gb"],E=p.DOM_OBSERVER_DOM_CHANGED_EVENT,T={PARSED:"prs",FORCED:"uw_forced_translate"},b=[],A=[],N=[];((null===(u=null===v||void 0===v?void 0:v.LIVE_TRANSLATIONS)||void 0===u?void 0:u.noTranslates)||[]).forEach(function(e){if(e.startsWith("/"))return void N.push(e);c.isValidSelector(e)?A.push(e):console.warn("Error::invalid exception selector",e)});var S=function(){return 254989===(null!==v&&void 0!==v?v:v.userId)?["title","alt","placeholder"]:["aria-label","title","alt","placeholder"]}(),L=["$"],O=null,C={},P=!1,R=null,I=function(){return!!C[O]},V=function(e){return C[O][e]},W=function(e,n,t){e=c.customTrim(e);var r=C[n];if(!r)return null;var o=Object.keys(r).find(function(n){return c.customTrim(r[n])===e});return t[_]||t[w]?Y(t,o):o},D=function(e){return C[O]=__assign(__assign({},C[O]),e)},U=window.location.href,x=function(){if(P){var n=U!==window.location.href;if(U=window.location.href,te()&&n){$=!0;return void a(s.getCurrentLanguage()).then(function(){return Q()})}var t=e();s.doRemediation(null,t)}};s.getCurrentLanguage=function(){return O},s.enable=function(){P=!0,m.on(E,x)},s.disable=function(){P=!1,m.off(E,x)},s.isEnabled=function(){return P};var j=function(){var e,n,t=null===(e=null===v||void 0===v?void 0:v.LIVE_TRANSLATIONS)||void 0===e?void 0:e.is_enabled,r=!c.getProperty("userway-selectedLang",!1)&&(null===(n=null===d||void 0===d?void 0:d._userway_config)||void 0===n?void 0:n["site-language"]);return t?window.localStorage.getItem("userway-selectedSiteLang")||r||null:(!!r&&console.log("Automatic live site translation is not supported"),null)};s.awaitForResources=function(){var e,n=j();return n&&(null===(e=null===v||void 0===v?void 0:v.LIVE_TRANSLATIONS)||void 0===e?void 0:e.autoTranslation)?(O=n,s.translateSite().then(function(){return!0}).catch(function(){return console.log("Something went wrong in translating the site")})):(window.localStorage.removeItem("userway-selectedSiteLang"),Promise.resolve(!1))},s.doRemediation=function(e,n){return new Promise(function(e,t){o({items:n,resolve:e,reject:t})})},s.translateSite=function(n){if(void 0===n&&(n=O),!d.partner===atob("cmFrYmFuaw==")){var t=new CustomEvent("userway:translate",{detail:{locale:n},bubbles:!1,cancelable:!0});if(!document.dispatchEvent(t))return Promise.resolve()}if(!n)return c.logger.error(l,"No translation language specified!"),Promise.resolve();if(R===n)return Promise.resolve();if(R&&y.includes(R.toLowerCase())&&y.includes(n.toLowerCase()))return Promise.resolve();var r=e();return O=n,document.querySelector("html").setAttribute("lang",O),X(r,n).then(function(){return J(r)}).then(function(){return s.enable()}).catch(function(e){return console.log("Error::",l,e)})},s.revertToOriginal=function(){if(!s.isEnabled())return Promise.resolve();s.disable();var e=O;return O=null,a(e)};var M=function(e,n){var t,r;if(!e||!n)return!1;var o=n.nodeType===Node.ELEMENT_NODE,i=n.nodeType===Node.TEXT_NODE,a=n.nodeType===Node.ATTRIBUTE_NODE;return!(!o||!n.matches(e))||!!(i&&(null===(t=n.parentElement)||void 0===t?void 0:t.closest(e))||a&&(null===(r=n.ownerElement)||void 0===r?void 0:r.closest(e)))},k=function(){return[document.querySelector(".uai .accessibility-btn__text")].reduce(function(e,n){return __spreadArray(__spreadArray([],__read(e),!1),__read(Array.from((null===n||void 0===n?void 0:n.childNodes)||[]).filter(function(e){return e.nodeType===Node.TEXT_NODE})),!1)},[]).filter(Boolean)},$=!1,B=function(e,n){return void 0===n&&(n=[]),function(t){return t?e.map(function(e){return t.getAttributeNode(e)}).concat(n.map(function(e){return e(t)})).filter(Boolean):[]}},F=function(e){if(!e)return!1;var n=e.nodeType,t=e.nodeValue;return n===Node.TEXT_NODE&&t.length>0&&-1===t.search(/^\s+$/i)},X=function(e,t){var o=new Set;e.forEach(function(e){var n=c.customTrim(e.nodeValue);o.add(n)});var a=i(__spreadArray([],__read(o),!1));if(!a.length)return Promise.resolve();var u={"pt-BR":"pt","es-MX":"es","en-US":"en","en-AU":"en","en-GB":"en","zh-TW":"zh-TW",prs:"fa"};return u[t]?t=u[t]:t.includes("-")&&(t=t.split("-").at(0)),r().then(function(e){return G(a,e)}).then(function(e){return e.filter(function(e){return""!==e})}).then(function(e){return n(e,t)}).then(function(e){if(!e)throw new Error(l+": No translation data.");var n=e.data.translations;b.length&&(n=z(n)),D(n)})},q=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},G=function(e,n){if(!n.length)return e;var t=n.map(q),r=new RegExp("("+t.join("|")+")","gi");return e.map(function(e){return e.replace(r,'<span translate="no">$1</span>')})},z=function(e){var n,t,r=/<span translate="no">(.*?)<\/span>/g,o={};try{for(var i=__values(Object.entries(e)),a=i.next();!a.done;a=i.next()){var u=__read(a.value,2),l=u[0],s=u[1],c=l.replace(r,"$1"),d=s.replace(r,"$1");o[c]=d}}catch(e){n={error:e}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return o},H=function(e,n){return e[0].toUpperCase()===e[0]?n[0].toUpperCase()+n.slice(1):n[0].toLowerCase()+n.slice(1)},J=function(e,n){var t;void 0===n&&(n="");var r=null===(t=null===v||void 0===v?void 0:v.LIVE_TRANSLATIONS)||void 0===t?void 0:t.overrides;return Promise.all(e.map(function(e){var n=c.customTrim(e.nodeValue);if(L.includes(n))return Promise.resolve();var t;if(r["*"]||r[O]){var o=function(e){var n;return null!==(n=r[e])&&void 0!==n?n:[]};__spreadArray(__spreadArray([],__read(o("*")),!1),__read(o(O)),!1).map(function(r){var o;if(!t){var i=new RegExp(r.source,"ig");if(null===(o=r.selectors)||void 0===o?void 0:o.length)r.selectors.map(function(o){var a,u;t||((null===(a=e.parentElement)||void 0===a?void 0:a.matches(o))||(null===(u=e.ownerElement)||void 0===u?void 0:u.matches(o)))&&(t=e[_]||e[w]?Y(e,V(n)):V(n),t.toLowerCase().includes(r.correction.toLowerCase())||(t=t.replace(i,function(e){return H(e,r.correction)})))});else{var a=e[_]||e[w]?Y(e,V(n)):V(n);a&&a.toLowerCase().includes(r.source.toLowerCase())&&!a.toLowerCase().includes(r.correction.toLowerCase())&&(t=a.replace(i,function(e){return H(e,r.correction)}))}}})}return t?C[O][n]=c.customTrim(t):t=e[_]||e[w]?Y(e,V(n)):V(n),t?K(e,t):(console.log("Node ",e," is not translated."),Promise.resolve())}))},Y=function(e,n){return n?(e[w]&&e[_]?n=e[_]+n+e[w]:e[_]?n=e[_]+n:n+=e[w],n):null},K=function(e,n){return new Promise(function(t){var r=e.parentElement;if(e.nodeValue===n)return t();if(!r)return e.nodeValue=n,t();if(g.widget_is_lst_animation_disabled)return e.nodeValue=n,t();var o=r.style.backgroundColor,i=r.style.transition;setTimeout(function(){r.style.backgroundColor="rgba(255,241,141,0.9)",r.style.transition="background-color 0.3s",e.nodeValue=n,setTimeout(function(){r.style.backgroundColor=o,setTimeout(function(){r.style.transition=i,t()},300)},300)})})},Q=function(){c.postMessage({action:"websiteTranslationCompleted"}),window.postMessage({isUserWay:!0,action:"websiteTranslationCompleted"},"*")},Z=function(){window.postMessage({isUserWay:!0,action:"websiteTranslationReverted"},"*")},ee=function(e){window.localStorage.setItem("userway-selectedSiteLang",e),document.documentElement.setAttribute("lang",e)},ne=function(){var e=d.widgetPageLang;document.documentElement.setAttribute("lang",e),window.localStorage.removeItem("userway-selectedSiteLang")},te=function(){return N.some(function(e){return new RegExp(e).test(window.location.href)})};!function(){var e=document.querySelector("html");R=e.getAttribute("lang")||"en-us";var n=function(e){var n=e.data,t=n.action,r=n.value,o=n.shouldNotTriggerLiveTranslation,i=void 0!==o&&o;switch(t){case"setWidgetLanguage":case"disableLiveTranslation":if(i)break;s.revertToOriginal().then(function(){return ne()}).then(function(){return Z()});break;case"translateWebsite":s.revertToOriginal().then(function(){return ee(r)}).then(function(){return s.translateSite(r)}).then(function(){return Q()})}};c.registerPostMessageListener(n)}()}();